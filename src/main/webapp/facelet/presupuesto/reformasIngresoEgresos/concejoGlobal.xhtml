<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:sigef="http://xmlns.jcp.org/jsf/composite/sigef/components"
                xmlns:comp="http://xmlns.jcp.org/jsf/composite/comp"
                xmlns:u="http://xmlns.jcp.org/jsf/composite/comp"

                template="/WEB-INF/template/template.xhtml">

    <f:view encoding="UTF-8"></f:view>
    <ui:define name="title"> Aprobación Reforma</ui:define> 
    <ui:define name="content">

        <div class="ui-g ui-fluid">  
            <div class="ui-g-12">
                <u:titleTask task="#{emisionConcejoReformaMB.tarea}" tramite="#{emisionConcejoReformaMB.tramite}" />
            </div>

            <div class="ui-g-12"> 
                <h:form prependId="false" id="formularioGeneral">
                    <p:dataTable id="dataIngresoEgresoReforma2" widgetVar="dataIngresoEgresoReforma2" var="item" value="#{emisionConcejoReformaMB.lazyyReforma}" 
                                 paginator="true" rows="30" style="width: 100%; font-weight: bold;" paginatorPosition="bottom"
                                 currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}" filterEvent="enter"
                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                 rowsPerPageTemplate="30,40,50,100" lazy="true"   selectionMode="single" rowKey="#{item.id}"
                                 emptyMessage="No existen dataItemIngreso con el criterio de busqueda especificado">
                        <f:facet name="header">
                            <span style="font-weight: bold; font-size: 18px;"> REFORMAS </span>
                        </f:facet>

                        <p:column style="width:16px">
                            <p:rowToggler />
                        </p:column>


                        <p:column headerText="No.REFORMA" style="text-align: center;">
                            <p:outputLabel value="#{item.numeracion}"/>   
                        </p:column>
                        <p:column headerText="FECHA REGISTRO">
                            <p:outputLabel value="#{item.fechaOficioReforma}">
                                <f:convertDateTime pattern="yyyy-MM-dd"/>
                            </p:outputLabel>
                        </p:column>

                        <p:column headerText="TIPO" filterBy="#{item.tipo}">

                            <f:facet name="filter">

                                <p:selectOneMenu onchange="PF('dataIngresoEgresoReforma2').filter()" styleClass="custom-filter" >
                                    <f:converter converterId="javax.faces.Boolean" />
                                    <f:selectItem itemLabel="TODOS" itemValue=""/>
                                    <f:selectItem itemLabel="SUPLEMENTO CRÉDITOS" itemValue="true"/>
                                    <f:selectItem itemLabel="REDUCCIÓN CRÉDITOS" itemValue="false" />
                                </p:selectOneMenu>
                            </f:facet>
                            <p:outputLabel value="#{item.tipo==true?'SUPLEMENTO CRÉDITOS':'REDUCCIÓN CRÉDITOS'}" />    
                        </p:column>
                        <p:column headerText="PERIODO" filterBy="#{item.periodo}">
                            <p:outputLabel value="#{item.periodo}"/>

                        </p:column>


                        <p:column headerText="SUPLEMENTO" >
                            <p:outputLabel value="#{emisionConcejoReformaMB.getSuplemento(item)==null?0:emisionConcejoReformaMB.getSuplemento(item)}" style="float: right;">
                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                            </p:outputLabel> 
                        </p:column>

                        <p:column headerText="REDUCCIÓN" >
                            <p:outputLabel value="#{emisionConcejoReformaMB.getReduccion(item)==null?0:emisionConcejoReformaMB.getReduccion(item)}" style="float: right;">
                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                            </p:outputLabel> 
                        </p:column>

                        <p:column headerText="ESTADO" style="text-align: center;">
                            <p:outputLabel value="#{item.estado.texto}"/>
                        </p:column>

                        <p:column headerText="ACCIONES" style="width: 10%; text-align: center;">
                            <p:commandLink  title="Ver Reforma Ingreso"  actionListener="#{emisionConcejoReformaMB.visulauzarReformaIngreso(item)}"   >
                                <i class="fa fa-search" style="font-size: 1.5em; margin-right: 8px;" ></i>

                            </p:commandLink>
                            <p:commandLink  disabled="#{item.estado.codigo=='APRO'?false:true}" title="Aprobar" actionListener="#{emisionConcejoReformaMB.abriDlogo(item, true)}">
                                <i class="fa fa-thumbs-o-up" style="font-size: 1.5em; margin-right: 8px;"></i>
                            </p:commandLink>
                            <p:commandLink  disabled="#{item.estado.codigo=='APRO'?false:true}" title="Rechazar" actionListener="#{emisionConcejoReformaMB.abriDlogo(item, false)}" update="formularioGeneral">
                                <i class="fa fa-thumbs-o-down" style="font-size: 1.5em; margin-right: 8px;"></i>
                            </p:commandLink>

                            <p:commandLink  disabled="#{item.estado.codigo=='APRO'?false:true}" title="Subir Documentos"
                                            oncomplete="PF('dldocument').show()" update="formDocuments">
                                <i class="fa fa-upload"  style="font-size: 1.5em; margin-right: 8px;"></i>

                            </p:commandLink>


                        </p:column>

                        <p:rowExpansion>
                            <p:dataTable widgetVar="dataTipoReforma"  id="dataTipoReforma" style="width: 80%; margin: auto; margin-top: 1%;" value="#{emisionConcejoReformaMB.listaReforma}" var="data">
                                <f:facet name="header" >
                                    <span style="font-size: 18px; font-weight: bold;">Egresos</span>
                                </f:facet>
                                <p:column headerText="Tipo" > 
                                    <p:outputLabel value="#{data=='DISTRIBUTIVO'?'DISTRIBUTIVO GENERAL':data}" />
                                </p:column>

                                <!--                                <f:facet name="header" >
                                                                    Informacion Adicional
                                                                </f:facet>-->
                                <p:column rendered="#{item.tipo}" headerText="Suplemento"  > 
                                    <p:outputLabel value="#{emisionConcejoReformaMB.getValorReformas(item, data)}" style="float: right;">
                                        <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                    </p:outputLabel>
                                </p:column>


                                <p:column rendered="#{item.tipo==true?false:true}" headerText="Reducción"  > 
                                    <p:outputLabel value="#{emisionConcejoReformaMB.getValorReformas(item, data)}" style="float: right;">
                                        <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                    </p:outputLabel>
                                </p:column>


                                <p:column headerText="Acciones" style="text-align: center; width: 10%;"> 



                                    <p:commandLink title="ver" actionListener="#{emisionConcejoReformaMB.visualizarTipos(item, data)}">
                                        <i class="fa fa-search" style="font-size: 1.5em; margin-right: 8px;"></i>
                                    </p:commandLink>



                                </p:column>
                            </p:dataTable>

                            <p:panelGrid  columns="2" style=" width: 20%;margin-top: 1%;margin-bottom: 1%;float: right; text-align: right; font-size: 14px; font-weight: bold;" >
                                <f:facet name="header">
                                    Información Adicional
                                </f:facet>

                                <h:outputText value="Total Ingreso:" />
                                <h:outputText value="#{emisionConcejoReformaMB.gettoalIngreso(item)==null?0:emisionConcejoReformaMB.gettoalIngreso(item)}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                                <h:outputText value="Total Egreso:" />
                                <h:outputText value="#{emisionConcejoReformaMB.getTotalEgreso(item)==null?0:emisionConcejoReformaMB.getTotalEgreso(item)}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>


                            </p:panelGrid>

                        </p:rowExpansion>

                    </p:dataTable>


                </h:form>              
            </div>
        </div>


        <p:dialog width="800" id="dldocument" height="400"   header="Archivos del Concejo" widgetVar="dldocument" modal="true" showEffect="explode" hideEffect="explode" >
            <h:form id="formDocuments" prependId="false">
                <p:fileUpload fileUploadListener="#{emisionConcejoReformaMB.handleFileUpload}"   style="width: 100%" accept=".pdf"
                              skinSimple="true" allowTypes="/(\.|\/)(pdf)$/i" mode="advanced" dragDropSupport="false" 
                              messageTemplate="Solo puede subir archivos PDF"
                              label="Buscar" uploadLabel="Subir" cancelLabel="Cancelar" update="formDocuments" previewWidth="60" />

                <br/>
                <comp:documents entiti="#{emisionConcejoReformaMB.reforma}" rendered="#{emisionConcejoReformaMB.reforma ne null}" showDelete="true"/>
            </h:form>           
        </p:dialog>


        <p:dialog width="1200" id="dlgoVistaReformaIngreso" height="600"   header="Reforma Ingreso" widgetVar="dlgoVistaReformaIngreso" modal="true" showEffect="explode" hideEffect="explode" >


            <h:form id="formVistaIngreso" prependId="false">

                <p:dataTable  id="dataItemIngresotable" widgetVar="dataItemIngresotable" var="pl" value="#{emisionConcejoReformaMB.lazyreformaIngreso}" paginator="true" rows="15"
                              style="width: 100%;" paginatorPosition="bottom"
                              currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}" 
                              paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                              rowsPerPageTemplate="15,30,40,50,100" lazy="true" rowIndexVar="index"
                              emptyMessage="No existen items con el criterio de busqueda especificado" >
                    <f:facet name="header">
                        Lista de Item
                    </f:facet>

                    <p:column headerText="No." style="width: 20px;">
                        #{index+1}
                    </p:column>
                    <p:column headerText="Código" style="width: 10%; font-weight: bold; font-size: 15px;" filterBy="#{pl.proformaIngreso.item.codigo}" filterMatchMode="contains">
                        <h:outputText value="#{pl.proformaIngreso.item.codigo}"/>
                    </p:column>
                    <p:column headerText="Fuente" style="width: 10%;">
                        <h:outputText value="#{pl.proformaIngreso.fuente.nombre}" />

                    </p:column>
                    <p:column headerText="Descripción" style="width: 20%">
                        <h:outputText value="#{pl.proformaIngreso.item.descripcion}" />
                    </p:column>
                    <p:column headerText="Nivel" style="width: 80px; text-align: center;" filterBy="#{pl.proformaIngreso.item.confId.nivel}"  >

                        <h:outputText value="#{pl.proformaIngreso.item.confId.nivel}" />
                    </p:column>

                    <p:column filterBy="#{pl.proformaIngreso.item.clasificacion.texto}" headerText="Clasificación"  style="width:auto;">

                        <h:outputText value="#{pl.proformaIngreso.item.clasificacion.texto}" />
                    </p:column>
                    <p:column headerText="Tipo Item" filterBy="#{pl.proformaIngreso.item.movimiento}"  filterMatchMode="exact" style="width: 6%; text-align: center;">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('dataItemIngresotable').filter()" styleClass="custom-filter">
                                <f:converter converterId="javax.faces.Boolean" />
                                <f:selectItem itemLabel="Todos" itemValue=""/>
                                <f:selectItem itemLabel="A" itemValue="false" />
                                <f:selectItem itemLabel="M" itemValue="true" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{pl.proformaIngreso.item.movimiento ? 'M':'A' }" />
                    </p:column>
                    <p:column headerText="Presupuesto Inicial">
                        <h:outputText value="#{pl.proformaIngreso.presupuestoInicial}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>                        
                    <p:column headerText="Suplemento">

                        <h:outputText value="#{pl.suplemento}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>                                
                    </p:column>                        
                    <p:column  headerText="Reducción">
                        <h:outputText value="#{pl.reducido}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>                              
                    </p:column>

                    <p:column headerText="Monto Codificado">
                        <h:outputText value="#{pl.codificado}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                </p:dataTable>

            </h:form>
        </p:dialog> 


        <p:dialog width="1200" id="dlgoVistaReformaPapp"   header="Reforma Plan Anual Política Pública" widgetVar="dlgoVistaReformaPapp" modal="true" showEffect="explode" hideEffect="explode" >
            <h:form id="formVistaPapp" prependId="false">

                <p:panelGrid columns="4" styleClass="form-group ui-panelgrid-blank" style="margin-bottom: 15px">


                    <p:commandButton value="Limpiar filtros"  process="@this"
                                     icon="ui-icon-refresh" onclick="PF('dataTables').clearFilters()" update="dataTables"
                                     styleClass="Fs16" style="width: auto;"/>
                    <!--
                                        <p:selectBooleanButton value="" onLabel="Filtrado por NO APLICA" offLabel="Quitar Filtro" 
                                                               onIcon="fa fa-check" offIcon="fa fa-times" style="width:auto;">
                                            <p:ajax update="dataTables" listener="" />
                                        </p:selectBooleanButton>-->

                    <p:commandButton id="mostrarColumnas" type="button" value="Columnas Visibles" style="width: auto; " icon="fa fa-align-justify" />

                </p:panelGrid>

                <p:columnToggler datasource="dataTables" trigger="mostrarColumnas" />
                <p:dataTable  id="dataTables" widgetVar="dataTables" var="item" value="#{emisionConcejoReformaMB.vistaGeneralPlanAnualLazy}" paginator="true" rows="150" 
                              paginatorPosition="bottom"
                              currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                              paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                              rowsPerPageTemplate="150,300,450,600" lazy="true"
                              editable="true" editMode="cell"  scrollHeight="400"
                              scrollable="true" scrollWidth="100%"
                              emptyMessage="No existen cuentas con el criterio de busqueda especificado" >
                    <f:facet name="header">
                        TABLA GENERAL DE LOS PLANES ANUALES}
                    </f:facet>                   
                    <p:column headerText="Eje" filterBy="#{item.ejePlanNacional}" style="width: 150px;text-align: center;" >
                        <p:outputLabel value="#{item.ejePlanNacional == null ? 'NO APLICA':item.ejePlanNacional}"/>
                    </p:column>
                    <p:column headerText="Objetivo Nacional" filterBy="#{item.objetivoPlanNacional}" style="width: 150px;text-align: center; " >
                        <p:outputLabel value="#{item.objetivoPlanNacional == null ? 'NO APLICA':item.objetivoPlanNacional}"/>
                    </p:column>
                    <p:column headerText="Política Nacional" filterBy="#{item.politicaPlanNacional}" style="width: 150px; text-align: center;" >
                        <p:outputLabel value="#{item.politicaPlanNacional == null ? 'NO APLICA':item.politicaPlanNacional}"/>
                    </p:column>
                    <p:column headerText="Sistema" filterBy="#{item.sistemaPlanLocal}" style="width: 150px; text-align: center;">
                        <p:outputLabel value="#{item.sistemaPlanLocal ==  null ? 'NO APLICA':item.sistemaPlanLocal}"/>
                    </p:column>
                    <p:column headerText="Objetivo Local" filterBy="#{item.objetivoPlanLocal}" style="width: 150px; text-align: center;">
                        <p:outputLabel value="#{item.objetivoPlanLocal == null ? 'NO APLICA':item.objetivoPlanLocal}"/>
                    </p:column>
                    <p:column headerText="Política Local" filterBy="#{item.politicaPlanLocal}" style="width: 150px; text-align: center;">
                        <p:outputLabel value="#{item.politicaPlanLocal == null ? 'NO APLICA':item.politicaPlanLocal}"/>
                    </p:column>

                    <p:column headerText="Plan"  filterBy="#{item.plan}" style="width: 150px;; text-align: center;" groupRow="true">
                        <p:outputLabel value="#{item.plan ==null ? 'SIN DEFINIR':item.plan}"/>
                    </p:column>
                    <p:column headerText="Programa"  filterBy="#{item.programa}" style="width: 150px;; text-align: center;" groupRow="true">
                        <p:outputLabel value="#{item.programa ==null ? 'SIN DEFINIR':item.programa}"/>
                    </p:column>
                    <p:column headerText="Nº de identificación" sortBy="#{item.numeroIdentificacionProgramaProyecto}" style="width: 150px;; text-align: center;" groupRow="true">
                        <p:outputLabel value="#{item.numeroIdentificacionProgramaProyecto ==null ? 'SIN DEFINIR':item.numeroIdentificacionProgramaProyecto}"/>
                    </p:column>
                    <p:column headerText="Plan, programa y/o proyecto" filterBy="#{item.nombreProgramaProyecto}" style="width: 250px; " groupRow="true">
                        <p:outputLabel value="#{item.nombreProgramaProyecto ==null ? 'SIN DEFINIR':item.nombreProgramaProyecto}"/>
                    </p:column>
                    <p:column headerText="Actividad Operativa" filterBy="#{item.nombreActividad}" style="width: 250px; " groupRow="true">
                        <p:outputLabel value="#{item.nombreActividad ==null ? 'SIN DEFINIR':item.nombreActividad}"/>
                    </p:column>
                    <p:column headerText="Objetivo Operativa" filterBy="#{item.objetivoOperativo}" style="width: 250px; " groupRow="true">
                        <p:outputLabel value="#{item.objetivoOperativo ==null ? 'SIN DEFINIR':item.objetivoOperativo}"/>
                    </p:column>
                    <p:column headerText="Medición Meta" filterBy="#{item.medicionMeta}" style="width: 150px;">
                        <p:outputLabel value="#{item.medicionMeta ==null ? 'SIN DEFINIR':item.medicionMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Enero" filterBy="#{item.eneroMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.eneroMeta ==null ? 'SIN DEFINIR':item.eneroMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Febrero" filterBy="#{item.febreroMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.febreroMeta ==null ? 'SIN DEFINIR':item.febreroMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Marzo" filterBy="#{item.marzoMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.marzoMeta ==null ? 'SIN DEFINIR':item.marzoMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Abril" filterBy="#{item.abrilMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.abrilMeta ==null ? 'SIN DEFINIR':item.abrilMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Mayo" filterBy="#{item.mayoMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.mayoMeta ==null ? 'SIN DEFINIR':item.mayoMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Junio" filterBy="#{item.junioMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.junioMeta ==null ? 'SIN DEFINIR':item.junioMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Julio" filterBy="#{item.julioMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.julioMeta ==null ? 'SIN DEFINIR':item.julioMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Agosto" filterBy="#{item.agostoMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.agostoMeta ==null ? 'SIN DEFINIR':item.agostoMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Septiembre" filterBy="#{item.septiembreMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.septiembreMeta ==null ? 'SIN DEFINIR':item.septiembreMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Octubre" filterBy="#{item.octubreMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.octubreMeta ==null ? 'SIN DEFINIR':item.octubreMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Noviembre" filterBy="#{item.noviembreMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.noviembreMeta ==null ? 'SIN DEFINIR':item.noviembreMeta}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Diciembre" filterBy="#{item.diciembreMeta}" style="width: 150px;" >
                        <p:outputLabel value="#{item.diciembreMeta ==null ? 'SIN DEFINIR':item.diciembreMeta}" style="float: right;"/>
                    </p:column>

                    <p:column headerText="Indicador Meta" filterBy="#{item.indicadorMeta}" style="width: 250px;">
                        <p:outputLabel value="#{item.indicadorMeta ==null ? 'SIN DEFINIR':item.indicadorMeta}"/>
                    </p:column>
                    <p:column headerText="Unidad Responsable" filterBy="#{item.unidadResponsable}" style="width: 250px; " >
                        <p:outputLabel value="#{item.unidadResponsable ==null ? 'SIN DEFINIR':item.unidadResponsable}"/>
                    </p:column>
                    <p:column headerText="Monto de Actividad" filterBy="#{item.sistemaPlanLocal}" style="width: 150px;" >
                        <p:outputLabel value="#{item.montoActividad ==null ? 'SIN DEFINIR':item.montoActividad}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </p:outputLabel>                        
                    </p:column>

                    <p:column headerText="Presupuesto Enero" filterBy="#{item.enero}" style="width: 150px;" >
                        <p:outputLabel value="#{item.enero ==null ? 'SIN DEFINIR':item.enero}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Febrero" filterBy="#{item.febrero}" style="width: 150px;" >
                        <p:outputLabel value="#{item.febrero==null ? 'SIN DEFINIR':item.febrero}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Marzo" filterBy="#{item.marzo}" style="width: 150px;" >
                        <p:outputLabel value="#{item.marzo ==null ? 'SIN DEFINIR':item.marzo}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Abril" filterBy="#{item.abril}" style="width: 150px;" >
                        <p:outputLabel value="#{item.abril==null ? 'SIN DEFINIR':item.abril}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Mayo" filterBy="#{item.mayo}" style="width: 150px;" >
                        <p:outputLabel value="#{item.mayo ==null ? 'SIN DEFINIR':item.mayo}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Junio" filterBy="#{item.junio}" style="width: 150px;" >
                        <p:outputLabel value="#{item.junio ==null ? 'SIN DEFINIR':item.junio}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Julio" filterBy="#{item.julio}" style="width: 150px;" >
                        <p:outputLabel value="#{item.julio ==null ? 'SIN DEFINIR':item.julio}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Agosto" filterBy="#{item.agosto}" style="width: 150px;" >
                        <p:outputLabel value="#{item.agosto ==null ? 'SIN DEFINIR':item.agosto}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Septiembre" filterBy="#{item.septiembre}" style="width: 150px;" >
                        <p:outputLabel value="#{item.septiembre ==null ? 'SIN DEFINIR':item.septiembre}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Octubre" filterBy="#{item.octubre}" style="width: 150px;" >
                        <p:outputLabel value="#{item.octubre ==null ? 'SIN DEFINIR':item.octubre}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Noviembre" filterBy="#{item.noviembre}" style="width: 150px;" >
                        <p:outputLabel value="#{item.noviembre ==null ? 'SIN DEFINIR':item.noviembre}" style="float: right;"/>
                    </p:column>
                    <p:column headerText="Presupuesto Diciembre" filterBy="#{item.diciembre}" style="width: 150px;" >
                        <p:outputLabel value="#{item.diciembre ==null ? 'SIN DEFINIR':item.diciembre}" style="float: right;"/>
                    </p:column>

                    <p:column headerText="Producto" filterBy="#{item.nombreProducto}" style="width: 250px; text-align: justify">
                        <p:outputLabel value="#{item.nombreProducto ==null ? 'SIN DEFINIR':item.nombreProducto}"/>
                    </p:column>
                    <p:column headerText="Monto de Producto" filterBy="#{item.montoProducto}" style="width: 150px;">
                        <p:outputLabel value="#{item.montoProducto ==null ? 0:item.montoProducto}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Reserva" filterBy="#{item.reservado}" style="width: 150px;">
                        <p:outputLabel value="#{item.reservado ==null ? 0:item.reservado}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Saldo Disponible"  style="width: 150px;">
                        <p:outputLabel value="#{item.montoProducto-item.reservado}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Comprometido" filterBy="#{item.comprometidoFinal}" style="width: 150px;">
                        <p:outputLabel value="#{item.comprometidoFinal ==null ? 0:item.comprometidoFinal}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Suplemento" filterBy="#{item.suplementoEgreso}" style="width: 150px;">
                        <p:outputLabel value="#{item.suplementoEgreso ==null ? 0:item.suplementoEgreso}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Reducción" filterBy="#{item.reduccionEgreso}" style="width: 150px;">
                        <p:outputLabel value="#{item.reduccionEgreso ==null ? 0:item.reduccionEgreso}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column headerText="Monto Codificado" filterBy="#{item.montoReformada}" style="width: 150px;">
                        <p:outputLabel value="#{item.montoReformada ==null ? 0:item.montoReformada}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </p:outputLabel>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>


        <p:dialog width="1200" id="dlgoVistaReformaDistributivo"   header="Reforma Partidas Distributivo" widgetVar="dlgoVistaReformaDistributivo" modal="true" 
                  showEffect="explode" hideEffect="explode"  height="600" >
            <h:form id="formVistaDistributivo" prependId="false">
                <p:dataTable    value="#{emisionConcejoReformaMB.thCargoLazyModel}"  id="listaDistributivo" widgetVar="listaDistributivo"  
                                paginatorPosition="bottom" var="cargo" rows="20" paginator="true"   lazy="true"
                                paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                rowsPerPageTemplate="20,25,35,50"
                                emptyMessage="No existen cuentas con el criterio de busqueda especificado">
                    <f:facet name="header">
                        Distributivo 
                    </f:facet>

                    <p:column style="width:16px">
                        <p:rowToggler />
                    </p:column>
                    <p:ajax event="rowToggle" listener="#{emisionConcejoReformaMB.loadingRubros(cargo)}" update="lista"/>

                    <p:column headerText="Nombre" style="width: 20%;" filterBy="#{cargo.nombreCargo}" filterMatchMode="contains">
                        <h:outputText value="#{cargo.nombreCargo}" />
                    </p:column>
                    <p:column headerText="Código" style="width: 10%;" filterBy="#{cargo.codigo}" filterMatchMode="contains">
                        <h:outputText value="#{cargo.codigo}" />
                    </p:column>                                      
                    <p:column headerText="Unidad administrativa" style="width: 13%;" filterBy="#{cargo.idUnidad.nombre}" filterMatchMode="contains">
                        <h:outputText value="#{cargo.idUnidad.nombre}" />
                    </p:column>                                      
                    <p:column headerText="Regimen laboral" style="width: 13%;" filterBy="#{cargo.idRegimen.nombre}" filterMatchMode="contains">
                        <h:outputText value="#{cargo.idRegimen.nombre}" />
                    </p:column>                                      
                    <p:column headerText="Grupo organizacional" style="width: 13%;" filterBy="#{cargo.idGrupo.grupoOrganizacional}" filterMatchMode="contains">
                        <h:outputText value="#{cargo.idGrupo.grupoOrganizacional}" />
                    </p:column>
                    <p:column headerText="Activo" style="width: 7%;text-align: center" filterBy="#{cargo.activo}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('listaDistributivo').filter()" styleClass="custom-filter">
                                <f:converter converterId="javax.faces.Boolean" />
                                <f:selectItem itemLabel="Todos" itemValue=""/>
                                <f:selectItem itemLabel="SI" itemValue="true" />
                                <f:selectItem itemLabel="NO" itemValue="false" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{cargo.activo?'SI':'NO'}" />
                    </p:column>
                    <p:column headerText="Asignado" style="width: 7%;text-align: center" filterBy="#{cargo.asignado}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('listaDistributivo').filter()" styleClass="custom-filter">
                                <f:converter converterId="javax.faces.Boolean" />
                                <f:selectItem itemLabel="Todos" itemValue=""/>
                                <f:selectItem itemLabel="SI" itemValue="true" />
                                <f:selectItem itemLabel="NO" itemValue="false" />
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{cargo.asignado?'SI':'NO'}" />
                    </p:column>
                    <p:column headerText="Tipo" style="width: 7%;text-align: center" filterBy="#{cargo.idCatalogoItem}">
                        <f:facet name="filter">
                            <p:selectOneMenu onchange="PF('listaDistributivo').filter()" converter="#{utilConverter}" style="width: 100%">
                                <f:selectItem itemLabel="Todos" itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{thPartidaPresupuestariaView.listTipoCargo}" var="n" itemLabel="#{n.texto}" itemValue="#{n}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{cargo.idCatalogoItem.texto}" />
                    </p:column>


                    <p:rowExpansion>


                        <p:dataTable  paginator="true" id="lista"  paginatorPosition="bottom" style="text-align: center; margin: 20px"
                                      paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                      rowsPerPageTemplate="10,15,20,25" scrollable="true"  widgetVar="lista"  editable="true" editMode="cell"
                                      emptyMessage="No existen cuentas con el criterio de busqueda especificado" 
                                      value="#{emisionConcejoReformaMB.copiaDiReforma}" var="item3" >
                            <f:facet name="header">
                                Rubros
                            </f:facet>
                            <p:column headerText="Tipo" style="width: 20%; text-align: justify">
                                <h:outputText value="#{item3.idRubro.nombre}" />
                            </p:column> 

                            <p:column headerText="Monto" style="width: 10%;" >
                                <h:outputText value="#{item3.monto}" style="float: right;">
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>

                            <p:column headerText="Reserva" style="width: 5%; text-align: right;" >
                                <h:outputText value="" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>

                            <p:column headerText="Item" style="width: 10%;text-align: center;">
                                <h:outputText value="#{item3.idPresupuesto.codigo}" />

                            </p:column>

                            <p:column headerText="Estructura" style="width: 10%;text-align: center;">
                                <h:outputText value="#{item3.idEstructura.codigo}" />
                            </p:column>


                            <p:column headerText="Fuente" style="width: 10%;text-align: center;">
                                <h:outputText value="#{item3.idFuente.codFuente}" />
                            </p:column>


                            <p:column headerText="Partida" style="width: 10%; text-align: center;">
                                <h:outputText value="#{item3.partidaPresupuestaria}" />
                            </p:column>

                            <p:column  headerText="Suplemento" style="width: 10%;">
                                <h:outputText value="#{item3.reformaSuplemento}" style="float: right;">
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>                                   

                            </p:column>

                            <p:column    headerText="Reducción" style="width: 10%;">           
                                <h:outputText value="#{item3.reformaReduccion}" style="float: right;">
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>                                
                            </p:column>

                            <p:column   headerText="Monto Codificado" style="width: 10%;">

                                <h:outputText value="#{item3.reformaCodificado==null?0:item3.reformaCodificado}" style="float: right;">
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>

                        </p:dataTable>
                    </p:rowExpansion>

                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog width="1200" id="dlgoVistaReformaDistributivoAnexo" height="600"   header="Reforma Partidas Distributivo Anexo" widgetVar="dlgoVistaReformaDistributivoAnexo"
                  modal="true" showEffect="explode" hideEffect="explode"  >
            <h:form id="formVistaDistributivoAnexo" prependId="false">




                <p:dataTable  paginator="true" id="listaAnexo"  paginatorPosition="bottom" style="text-align: center; margin: 20px" rows="20"
                              paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                              rowsPerPageTemplate="10,15,20,25" scrollable="true"  widgetVar="lista"  editable="true" editMode="cell"
                              emptyMessage="No existen cuentas con el criterio de busqueda especificado"  
                              value="#{emisionConcejoReformaMB.thCargoLazyModelRubros}" var="itema3" >
                    <f:facet name="header">
                        Rubros
                    </f:facet>
                    <p:column headerText="Tipo" style="width: 20%; text-align: justify" filterBy="#{itema3.idRubro.nombre}" filterMatchMode="contains">
                        <h:outputText value="#{itema3.idRubro.nombre}" />
                    </p:column> 

                    <p:column headerText="Monto" style="width: 10%;" filterBy="#{itema3.monto}">
                        <h:outputText value="#{itema3.monto}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Item" style="width: 10%;text-align: center;"  filterBy="#{itema3.idPresupuesto.codigo}" filterMatchMode="contains">
                        <h:outputText value="#{itema3.idPresupuesto.codigo}" />
                    </p:column>
                    <p:column headerText="Estructura" style="width: 10%;text-align: center;" filterBy="#{itema3.idEstructura.codigo}"  filterMatchMode="contains">
                        <h:outputText value="#{itema3.idEstructura.codigo}" />
                    </p:column>
                    <p:column headerText="Fuente" style="width: 10%;text-align: center;"  filterBy="#{itema3.idFuente.codFuente}" filterMatchMode="contains">
                        <h:outputText value="#{itema3.idFuente.codFuente}" />
                    </p:column>
                    <p:column headerText="Partida" style="width: 10%; text-align: center;" filterBy="#{itema3.partidaPresupuestaria}" filterMatchMode="contains">
                        <h:outputText value="#{itema3.partidaPresupuestaria}" />
                    </p:column>
                    <p:column  headerText="Suplemento" style="width: 10%;" filterBy="#{itema3.reformaSuplemento}">
                        <h:outputText value="#{itema3.reformaSuplemento}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>                                   
                    </p:column>
                    <p:column    headerText="Reducción" style="width: 10%;" filterBy="#{itema3.reformaReduccion}">           
                        <h:outputText value="#{itema3.reformaReduccion}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>                                
                    </p:column>
                    <p:column   headerText="Monto Codificado" style="width: 10%;" filterBy="#{itema3.reformaCodificado}">
                        <h:outputText value="#{itema3.reformaCodificado==null?0:itema3.reformaCodificado}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>


                </p:dataTable>
            </h:form>
        </p:dialog>



        <p:dialog width="1200" id="dlgoAsignacionPartidasPapp"   header="Reforma Asignación Partidas PAPP" widgetVar="dlgoAsignacionPartidasPapp"
                  modal="true" showEffect="explode" hideEffect="explode"  >
            <h:form id="formAsignacionPartidasPapp" prependId="false">
                <p:dataTable  id="dataTablePappPartidas" widgetVar="dataTablePappPartidas" var="asignar" value="#{emisionConcejoReformaMB.lazyAsignacionProducto}" 
                              paginator="true" rows="150" paginatorPosition="bottom" 
                              currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                              paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                              rowsPerPageTemplate="150,300,450,600"  lazy="true"
                              editable="true" editMode="cell"   scrollHeight="400"
                              filterEvent="enter" 
                              scrollable="true" scrollWidth="100%" 
                              emptyMessage="No existen cuentas con el criterio de busqueda especificado">
                    <f:facet name="header">
                        TABLA GENERAL DE LOS PLANES ANUALES 
                    </f:facet>

                    <p:column headerText="Nombre del plan, programa, proyecto" style="width: 260px;" filterBy="#{asignar.actividadOperativa.planProgramaProyecto.planAnual.planLocal.descripcion}">
                        <h:outputText value="#{asignar.actividadOperativa.planProgramaProyecto.planAnual.planLocal.descripcion == null ? 'NO APLICA':asignar.actividadOperativa.planProgramaProyecto.planAnual.planLocal.descripcion}" />
                    </p:column>
                    <p:column headerText="Nº de identificación" style="width: 100px;"  >
                        <h:outputText value="#{asignar.actividadOperativa.planProgramaProyecto.id}" />
                    </p:column>
                    <p:column headerText="Plan, programa y/o proyecto" style="width: 200px;"  filterBy="#{asignar.actividadOperativa.planProgramaProyecto.nombreProgramaProyecto}" >
                        <h:outputText value="#{asignar.actividadOperativa.planProgramaProyecto.nombreProgramaProyecto}" />
                    </p:column>
                    <p:column headerText="Actividad Operativa" style="width: 200px;"  filterBy="#{asignar.actividadOperativa.nombreActividad}">
                        <h:outputText value="#{asignar.actividadOperativa.nombreActividad}" />
                    </p:column>
                    <p:column headerText="Objetivo Operativa" style="width: 200px;"  filterBy="#{asignar.actividadOperativa.objetivoOperativo}">
                        <h:outputText value="#{asignar.actividadOperativa.objetivoOperativo}" />
                    </p:column>
                    <p:column headerText="Medición Meta" style="width: 100px;">
                        <h:outputText value="#{asignar.actividadOperativa.medicionMeta}" />
                    </p:column>
                    <p:column headerText="Meta Cuatrimestre 1" style="width: 100px;">
                        <h:outputText value="#{asignar.actividadOperativa.cuatrimestre1Meta}" />
                    </p:column>
                    <p:column headerText="Meta Cuatrimestre 2" style="width: 100px;">
                        <h:outputText value="#{asignar.actividadOperativa.cuatrimestre2Meta}" />
                    </p:column>
                    <p:column headerText="Meta Cuatrimestre 3" style="width: 100px;">
                        <h:outputText value="#{asignar.actividadOperativa.cuatrimestre3Meta}" />
                    </p:column>
                    <p:column headerText="Indicador Meta" style="width: 200px;"  filterBy="#{asignar.actividadOperativa.indicadorMeta}">
                        <h:outputText value="#{asignar.actividadOperativa.indicadorMeta}" />
                    </p:column>
                    <p:column headerText="Unidad Responsable" style="width: 200px;"  filterBy="#{asignar.actividadOperativa.unidadResponsable.id}">
                        <f:facet name="filter">
                            <p:selectOneMenu filter="true" filterMatchMode="startsWith" effect="fade" onchange="PF('dataTablePappPartidas').filter()" styleClass="custom-filter"   style="width: 100%;">

                                <f:selectItem itemLabel="Todos" itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{emisionConcejoReformaMB.unidades}" var="n" itemLabel="#{n.nombre}" itemValue="#{n.id}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{asignar.actividadOperativa.unidadResponsable.nombre}" />
                    </p:column>
                    <p:column headerText="Monto Actividad" style="width: 100px;">
                        <h:outputText value="#{asignar.actividadOperativa.monto}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Presupuesto Cuatrimestre 1" style="width: 100px;">
                        <h:outputText value="#{asignar.actividadOperativa.cuatrimestre1Actividad}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Presupuesto Cuatrimestre 2" style="width: 100px;">
                        <h:outputText value="#{asignar.actividadOperativa.cuatrimestre2Actividad}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Presupuesto Cuatrimestre 3" style="width: 100px;">
                        <h:outputText value="#{asignar.actividadOperativa.cuatrimestre3Actividad}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Producto" style="width: 200px;" filterBy="#{asignar.descripcion}">
                        <h:outputText value="#{asignar.descripcion}"/>
                    </p:column>
                    <p:column headerText="Monto Producto" style="width: 100px;">
                        <h:outputText value="#{asignar.monto}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Item Presupuestario" style="width: 200px;" filterBy="#{asignar.itemPresupuestario.id}">
                        <f:facet name="filter">
                            <p:selectOneMenu filter="true" filterMatchMode="startsWith" effect="fade" onchange="PF('dataTablePappPartidas').filter()" styleClass="custom-filter" style="width: 100%;">
                                <f:selectItem itemLabel="Todos" itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{emisionConcejoReformaMB.listaCatalogoPresupuestos}" var="n" itemLabel="#{n.codigo}" itemValue="#{n.id}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <p:cellEditor >
                            <f:facet name="output"><h:outputText value="#{asignar.itemPresupuestario.codigo}" /></f:facet>
                            <f:facet name="input" id="comboItem">
                                <p:selectOneMenu id="advanced" value="#{asignar.itemPresupuestario}" converter="#{utilConverter}" panelStyle="width:400px"
                                                 effect="fade" var="t" style="width:160px" filter="true" filterMatchMode="contains">
                                    <f:selectItem itemLabel="Seleccione Item Presupuestario" itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{emisionConcejoReformaMB.listaCatalogoPresupuestos}" var="theme" itemLabel="#{theme.codigo}" itemValue="#{theme}" />

                                    <p:column style="width:10%" >
                                        <f:facet name="header">
                                            <h:outputText value="codigo"/>
                                        </f:facet>
                                        <h:outputText value="#{t.codigo}" style="font-weight: bold;" />
                                    </p:column>

                                    <p:column style="width: 80%;">
                                        <f:facet name="header">
                                            <h:outputText value="Nombre"/>
                                        </f:facet>
                                        <h:outputText value="#{t.descripcion}" />

                                    </p:column>
                                    <p:ajax event="change" listener="#{emisionConcejoReformaMB.editarCell(asignar)}" update="dataTablePappPartidas"/>
                                </p:selectOneMenu>

                            </f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Estructura Programática" style="width: 200px;" filterBy="#{asignar.estructuraProgramatica.id}">
                        <f:facet name="filter">
                            <p:selectOneMenu filter="true" filterMatchMode="startsWith" effect="fade"  onchange="PF('dataTablePappPartidas').filter()" styleClass="custom-filter" autoWidth="false" style="width: 100%;">
                                <f:selectItem itemLabel="Todos" itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{emisionConcejoReformaMB.listaPlanProgramaticos}" var="n" itemLabel="#{n.codigo}" itemValue="#{n.id}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <p:cellEditor>
                            <f:facet name="output"><h:outputText value="#{asignar.estructuraProgramatica.codigo}" /></f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu value="#{asignar.estructuraProgramatica}" converter="#{utilConverter}" panelStyle="width:400px"
                                                 effect="fade" var="e" style="width:160px" filter="true" filterMatchMode="contains">
                                    <f:selectItem itemLabel="Seleccione Estructura Programática" itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems  value="#{emisionConcejoReformaMB.listaPlanProgramaticos}" var="n" itemLabel="#{n.descripcion}" itemValue="#{n}" />
                                    <p:column style="width:10%" >
                                        <f:facet name="header">
                                            <h:outputText value="codigo"/>
                                        </f:facet>
                                        <h:outputText value="#{e.codigo}" style="font-weight: bold;" />
                                    </p:column>

                                    <p:column style="width: 80%;">
                                        <f:facet name="header">
                                            <h:outputText value="Nombre"/>
                                        </f:facet>
                                        <h:outputText value="#{e.descripcion}" />
                                    </p:column>
                                    <p:ajax  event="change" listener="#{emisionConcejoReformaMB.editarCell(asignar)}" update="dataTablePappPartidas"/>
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Fuente" style="width: 200px;" filterBy="#{asignar.fuente.id}">
                        <f:facet name="filter">
                            <p:selectOneMenu filter="true" filterMatchMode="startsWith" effect="fade" onchange="PF('dataTablePappPartidas').filter()" styleClass="custom-filter" style="width: 100%;">
                                <f:selectItem itemLabel="Todos" itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{emisionConcejoReformaMB.listaFuente}" var="n" itemLabel="#{n.nombre}" itemValue="#{n.id}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <p:cellEditor >
                            <f:facet name="output"><h:outputText value="#{asignar.fuente.nombre}"/></f:facet>
                            <f:facet name="input">
                                <p:selectOneMenu value="#{asignar.fuente}" converter="#{utilConverter}" panelStyle="width:400px"
                                                 effect="fade" var="f" style="width:160px" filter="true" filterMatchMode="startsWith">
                                    <f:selectItem itemLabel="Selecciones Fuente" itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems  value="#{emisionConcejoReformaMB.listaFuente}" var="n" itemLabel="#{n.nombre}" itemValue="#{n}" />
                                    <p:column style="width:10%" >
                                        <f:facet name="header">
                                            <h:outputText value="Código"/>
                                        </f:facet>
                                        <h:outputText value="#{f.tipoFuente.orden}" style="font-weight: bold;" />
                                    </p:column>

                                    <p:column style="width: 50%;">
                                        <f:facet name="header">
                                            <h:outputText value="Fuente"/>
                                        </f:facet>
                                        <h:outputText value="#{f.tipoFuente.texto}" />
                                    </p:column>

                                    <p:column style="width: 90%;">
                                        <f:facet name="header">
                                            <h:outputText value="Tipo Fuente"/>
                                        </f:facet>
                                        <h:outputText value="#{f.nombre}" />
                                    </p:column>
                                    <p:ajax  event="change" listener="#{emisionConcejoReformaMB.editarCell(asignar)}" update="dataTablePappPartidas"/>
                                </p:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>


                    <p:column headerText="Tipo Fuente" style="width: 200px;" filterBy="#{asignar.fuente.tipoFuente.id}">
                        <f:facet name="filter">
                            <p:selectOneMenu filter="true" filterMatchMode="startsWith" effect="fade" onchange="PF('dataTablePappPartidas').filter()" styleClass="custom-filter" style="width: 100%;">
                                <f:selectItem itemLabel="Todos" itemValue="#{null}" noSelectionOption="true" />
                                <f:selectItems value="#{emisionConcejoReformaMB.listafuenteFinanciamiento}" var="n" itemLabel="#{n.orden} - #{n.texto}" itemValue="#{n.id}"/>
                            </p:selectOneMenu>
                        </f:facet>
                        <h:outputText value="#{asignar.fuente.tipoFuente.orden} - #{asignar.fuente.tipoFuente.texto}" style="text-align: left"/>
                    </p:column>

                    <p:column headerText="Partida Presupuestaria" style="width: 200px;" filterBy="#{asignar.codigoPresupuestario}" >
                        <h:outputText value="#{asignar.codigoPresupuestario}" id="ini"/>
                    </p:column>
                    <p:column headerText="Período" style="width: 200px;" filterBy="#{asignar.periodo}">
                        <h:outputText value="#{asignar.periodo}" />
                    </p:column>


                    <p:column headerText="Suplemento" style="width: 200px;"  >
                        <h:outputText value="#{asignar.suplementoEgreso==null?0:asignar.suplementoEgreso}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>                        
                    </p:column>


                    <p:column headerText="Reducción" style="width: 200px;" >
                        <h:outputText value="#{asignar.reduccionEgreso==null?0:asignar.reduccionEgreso}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>                        
                    </p:column>

                    <p:column headerText="Monto Codificado" style="width: 200px;" >
                        <h:outputText value="#{asignar.montoReformada==null?0:asignar.montoReformada}" style="float: right;">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>                        
                    </p:column>


                </p:dataTable>
            </h:form>
        </p:dialog>


        <p:dialog width="800" id="dlgoAprbacionReforma"    widgetVar="dlgoAprbacionReforma" modal="true" showEffect="explode" hideEffect="explode" >
            <h:form id="formAprobacionReforma" prependId="false">
                <p:panel header="Aprobación Reforma">
                    <p:panelGrid columns="3" layout="grid" columnClasses="ui-grid-col-4" styleClass="ui-panelgrid-blank form-group" >

                        <p:panelGrid columns="1">                  
                            <p:outputLabel value="N. OFICIO:" style="font-weight: bold;"/>
                            <p:inputText readonly="true"  value="#{emisionConcejoReformaMB.reformaObjeto.numeracion}"/>
                        </p:panelGrid>
                        <p:panelGrid columns="1">  
                            <p:outputLabel value="N. AUTORIZACION:" style="font-weight: bold;"/>
                            <p:inputText  value="#{emisionConcejoReformaMB.reformaObjeto.codigo}" required="true"/>
                        </p:panelGrid>

                        <p:panelGrid columns="1">  
                            <p:outputLabel value="FECHA APROBACIÓN:" style="font-weight: bold;"/>
                            <p:calendar  navigator="true" locale="es" required="true" yearRange="c-50:c+50" value="#{emisionConcejoReformaMB.reformaObjeto.fechaAprobacion}" pattern="yyyy-MM-dd" mask="true"  />
                        </p:panelGrid>

                        <p:panelGrid columns="1">  
                            <p:outputLabel value="FECHA OFICIO:" style="font-weight: bold;"/>
                            <p:calendar readonly="true" disabled="true" navigator="true" locale="es" yearRange="c-50:c+50" value="#{emisionConcejoReformaMB.reformaObjeto.fechaCreacion}" pattern="yyyy-MM-dd" mask="true" >

                            </p:calendar>

                        </p:panelGrid>

                        <p:panelGrid columns="1">  
                            <p:outputLabel value="TIPO" style="font-weight: bold;"/>
                            <p:inputText readonly="true" value="#{emisionConcejoReformaMB.reformaObjeto.tipo==true?'SUPLEMENTO CRÉDITOS':'REDUCCIÓN CRÉDITOS'}"/>

                        </p:panelGrid>

                        <p:panelGrid columns="1">  
                            <p:outputLabel value="PERIODO:" style="font-weight: bold;"/>
                            <p:inputText readonly="true" value="#{emisionConcejoReformaMB.reformaObjeto.periodo}"/>
                        </p:panelGrid>


                    </p:panelGrid>
                    <center style="margin-top: 2%;">
                        <p:commandButton value="Aprobar" icon="fa fa-save"   actionListener="#{emisionConcejoReformaMB.completarTarea(1)}" update="formularioGeneral"/>
                        <p:spacer width="10"/>
                        <p:commandButton value="Cancelar" icon="fa fa-remove"  process="@this" actionListener="#{emisionConcejoReformaMB.canclear()}" style="background: red;" />

                    </center> 
                </p:panel>

            </h:form>
        </p:dialog>


        <p:dialog width="800" id="dlogoCodigoRepetidos"    widgetVar="dlogoCodigoRepetidos" modal="true" showEffect="explode" hideEffect="explode" >


            <h:form prependId="false" id="dlogoPartidasRepetidas">
                <p:dataGrid var="data" value="#{emisionConcejoReformaMB.showCodigoRepetidosList}" columns="3" layout="grid"
                            rows="10" paginator="true" id="cars" paginatorPosition="bottom"
                            paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                            rowsPerPageTemplate="5,12,20">

                    <f:facet name="header">
                        Codigos Repetidos
                    </f:facet>

                    <p:panel header="PARTIDA ==> #{data.partidaPresupuestaria}" style="font-weight: bold;">
                        <h:panelGrid columns="1" style="width:100%">

                            <h:outputText value="TIPO: #{data.codigo}" />


                            <h:outputText value="ITEM: #{data.itemPresupuestario.codigo}" style="text-align:left" />
                            <h:outputText value="ESTRUCTURA: #{data.estructuraProgramatica.codigo}" style="text-align:left"/>

                            <h:outputText value="TIPO FUENTE: #{data.fuenteDirecta.orden}" style="text-align:left" />




                        </h:panelGrid>
                    </p:panel>

                </p:dataGrid>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgObservaciones" widgetVar="dlgObservaciones" width="30%" position="center" draggable="false" header="Observación"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false" >
            <div class="ui-g-12" >
                <h:form id="frmDlgObser">
                    <p:outputPanel id="panelObsevacion" style="width: 100%;" >
                        <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" >
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:inputTextarea value="#{emisionConcejoReformaMB.observaciones}" onkeyup="toUpperCase(this)"
                                                 rows="7" style="border: 1px solid;text-transform: uppercase;width: 100%;border-radius: 5px 5px 5px 5px;"/>
                            </h:panelGroup> 
                        </p:panelGrid>
                        <center>
                            <p:commandButton rendered="#{emisionConcejoReformaMB.btnAprobar}" icon="fa fa-thumbs-o-up" value="Aprobar"  title="Culminar Tarea" process="frmDlgObser" update="frmDlgObser"
                                             actionListener="#{emisionConcejoReformaMB.completarTarea(1)}" style="width: 150px;margin: 10px"  />

                            <p:commandButton rendered="#{!emisionConcejoReformaMB.btnAprobar}" icon="fa fa-thumbs-o-up" value="Aprobar"  title="Culminar Tarea" process="frmDlgObser" update="frmDlgObser"
                                             actionListener="#{emisionConcejoReformaMB.completarTarea(0)}" style="width: 150px;margin: 10px"  />
                            <p:commandButton icon="fa fa-thumbs-o-remove" value="Cerrar" onclick="PF('dlgObservaciones').hide()"
                                             style="background: red; width: 150px;margin: 10px" />
                        </center> 
                    </p:outputPanel>
                </h:form>  
            </div>
        </p:dialog>



        <p:dialog width="1200" id="dlgoVistaReformaPartidasDirectas"   header="Reforma Partidas Directas" widgetVar="dlgoVistaReformaPartidasDirectas"
                  modal="true" showEffect="explode" hideEffect="explode"  >
            <h:form id="formVistaPartidasDirectas" prependId="false">

                <p:dataTable expandableRowGroups="true" value="#{emisionConcejoReformaMB.lazyPartidasDirectas}" id="proformaEgresos"  widgetVar="proformaEgresos"
                             paginatorPosition="bottom" var="item" rows="10" paginator="true"  
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             rowsPerPageTemplate="10,20,25,35,50" lazy="true" rowIndexVar="index" editable="true" editMode="cell"
                             emptyMessage="No existen cuentas con el criterio de busqueda especificado">
                    <f:facet name="header">
                        Partidas Directas
                    </f:facet>
                    <p:column headerText="id" style="width: 20px;">
                        <h:outputText value="#{item.id}" />
                    </p:column>
                    <p:column headerText="Estructura Programatica"  style="width: 20%;text-align: center;" filterBy="#{item.estructruaNew.codigo}">
                        <h:outputText value="#{item.estructruaNew.codigo}" />
                    </p:column>
                    <p:column  headerText=" Partida Presupuestaria" style="width: 20%;text-align: center" filterBy="#{item.partidaPresupuestaria}">
                        <p:outputLabel value="#{item.partidaPresupuestaria}" />
                    </p:column>
                    <p:column  headerText="Item Presupuestario"  style="width: 30%;" filterBy="#{item.itemNew.codigo}">
                        <h:outputText value="#{item.itemNew.codigo}" />
                    </p:column>
                    <p:column  headerText="Fuente:"  style="width: 30%; text-align: center;" filterBy="#{item.fuenteNew.codFuente}">
                        <h:outputText value="#{item.fuenteNew.codFuente}" />
                    </p:column>

                    <p:column  headerText="Período" style="width: 10%;text-align: center;" >
                        <p:outputLabel value="#{item.periodo}"/>
                    </p:column>
                    <p:column  headerText="Monto asignado" style="width: 20%;">
                        <p:outputLabel value="#{item.valor}" style="float: right" >
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </p:outputLabel>
                    </p:column>
                    <p:column   headerText="Suplemento" style="width: 20%;">
                        <h:outputText value="#{item.reformaSuplemento}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                    <p:column  headerText="Reducción" style="width: 20%;">

                        <h:outputText value="#{item.reformaReduccion}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>

                    </p:column>
                    <p:column  headerText="Monto codificado" style="width: 20%;">
                        <p:outputLabel value="#{item.reformaCodificado}" style="float: right" >
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </p:outputLabel>
                    </p:column>

                </p:dataTable>

            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>