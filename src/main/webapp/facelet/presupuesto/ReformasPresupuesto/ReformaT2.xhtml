<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:u="http://xmlns.jcp.org/jsf/composite/comp">
    <ui:define name="title">
        Reforma Traspaso Tipo 2
    </ui:define>
    <ui:define name="content">
        <style>
            .condicion1{
                background-color: #E7C402 !important;
            }
            .condicion2{
                background-color: white !important;
            }
            .condicion3{
                background-color: #E7C402 !important;
                color:white;
            }
            #comboItem{
                width: 20px;
            }
        </style>
        <div class="ui-g ui-fluid">
            <div class="ui-g-12">
                <u:titleTask task="#{reformaT2View.tarea}" tramite="#{reformaT2View.tramite}" />
            </div>
            <div class="ui-g-12">
                <h:panelGroup id="accionesButton" layout="block">
                    <p:commandButton icon="fa fa-plus"  value="Nueva Solicitud" actionListener="#{reformaT2View.registrarMostrarOcultar()}"
                                     styleClass="Fs16" style="width: 150px;margin-right: 15px" rendered="#{reformaT2View.btnRegistrar}"
                                     update="accionesButton,consultaTablaReforma,formBusqueda,formBusquedaConsT2,formTablaReforma,botonesReforma,formMain,actividadesOperativa,productos"/>
                    <p:commandButton icon="fa fa-plus"  value="Añadir/Editar Traspaso" actionListener="#{reformaT2View.registrarMostrarOcultarT2()}"
                                     styleClass="Fs16" style="width: 150px;margin-right: 15px" rendered="#{reformaT2View.btnRegistrarT2}"
                                     update="accionesButton,consultaTablaReforma,formBusqueda,formBusquedaConsT2,formTablaReforma,formMain,actividadesOperativa,productos"/>
                    <p:commandButton icon="fa fa-mail-reply" value="Regresar" actionListener="#{reformaT2View.consultarMostrarOcultar()}"
                                     styleClass="Fs16" style="width: 150px;margin-right: 15px" rendered="#{reformaT2View.btnConsultar}"
                                     update="accionesButton,consultaTablaReforma,formBusqueda,formBusquedaConsT2,formTablaReforma,botonesReforma,formMain,actividadesOperativa,productos,formReformaPartidaDirecta,formAsignacionDistributivo,formTablaReformaPDA" />
                </h:panelGroup>
            </div>
            <h:form id="formBusqueda" style="width:100%;">
                <p:fieldset id="fsetBusqueda" legend="Encabezado" toggleable="true" toggleSpeed="500" collapsed="false" 
                            style="width:100%; margin-top: 15px" rendered="#{reformaT2View.formBusqRegistrar}">
                    <div class="ui-g-12">
                        <div class="ui-g-7">
                            <p:panelGrid columns="#{reformaT2View.bolPapp ? 4:3}" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:outputLabel value="Código Reforma:"/>
                                    <p:inputText value="#{reformaT2View.reformaTraspaso.codigo}" readonly="true"/>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:outputLabel value="Tipo de Traspaso:" style="margin-right:  10px; font-weight: bold" />
                                    <p:selectOneMenu filter="true" value="#{reformaT2View.tipoTraspaso}" styleClass="custom-filter" disabled="false">
                                        <p:ajax listener="#{reformaT2View.generarTipoTraspaso()}" 
                                                update="formTablaReforma,formBusqueda,formBusquedaConsT2,formAsignacionDistributivo,formTablaReformaPDA,formReformaPartidaDirecta"/>
                                        <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItem itemLabel="Plan Anual Politica Pública" itemValue="PAPP" />
<!--                                        <f:selectItem itemLabel="Plan Distributivo General" itemValue="PD" />
                                        <f:selectItem itemLabel="Plan Distributivo Anexo" itemValue="PDA" />
                                        <f:selectItem itemLabel="Partidas Directas" itemValue="PDI" />-->
                                    </p:selectOneMenu>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{reformaT2View.bolPapp}">
                                    <p:outputLabel for="@next" value="Unidad Administrativa" style="font-weight: bold"/>
                                    <p:selectOneMenu id="unidAdminCrear" value="#{reformaT2View.idUnidadA}"
                                                     filter="true" filterMatchMode="contains" style="width: 100%">
                                        <f:selectItem itemLabel="-Seleccionar-" itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{reformaT2View.unidades}" var="n" itemLabel="#{n.nombre}" itemValue="#{n.id}" itemLabelEscaped="false"/>
                                        <p:ajax listener="#{reformaT2View.generarTipoTraspaso()}" update="formTablaReforma,formBusqueda"/>
                                    </p:selectOneMenu>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:outputLabel value="Período:"/>
                                    <p:selectOneMenu value="#{reformaT2View.busqueda.anio}" id="periodCrear" disabled="false" style="width: 100%">
                                        <p:ajax listener="#{reformaT2View.cargarDatosTablaGeneralPlanAnual()}" update="formTablaReforma,formBusqueda"/>
                                        <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                        <f:selectItems value="#{reformaT2View.listaAnio}" var="p" itemLabel="#{p.anio}" itemValue="#{p.anio}" />
                                        <p:ajax process="periodCrear" listener="#{reformaT2View.getSetPeriodoReforma()}"/>
                                    </p:selectOneMenu>
                                </h:panelGroup>
                            </p:panelGrid>
                        </div>
                        <div class="ui-g-5">
                            <p:panelGrid columns="3" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:outputLabel for="@next" value="Fecha Reforma:"/>
                                    <p:calendar id="fechaReformaTraspaso" pattern="dd-MM-yyyy" readonly="false" navigator="true" yearRange="c-100:c+100"
                                                value="#{reformaT2View.reformaTraspaso.fechaTraspasoReforma}" style="width: 100%" locale="es">
                                        <p:ajax event="dateSelect"/>
                                    </p:calendar>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:outputLabel value="Estado:"/>
                                    <p:inputText value="#{reformaT2View.reformaTraspaso.estadoReforma.texto}" readonly="true"/>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:commandButton value="Generar Reforma"  process="periodCrear,unidAdminCrear" actionListener="#{reformaT2View.generarReforma(false)}"
                                                     icon="fa fa-check-square-o" disabled="#{reformaT2View.btnGenerarReforma}" rendered="#{!reformaT2View.btnGenerarReforma}"
                                                     update="formTablaReforma,formBusqueda,formMain,formAsignacionDistributivo,formTablaReformaPDA,botonesReforma,formReformaPartidaDirecta" 
                                                     styleClass="Fs16" style="width: 100%;"/>
                                </h:panelGroup> 
                            </p:panelGrid>
                        </div>
                    </div>
                </p:fieldset>
            </h:form>

            <h:form id="formBusquedaConsT2" style="width:98%;">
                <p:fieldset id="fsetBusquedaConsT2" legend="Información" toggleable="true" toggleSpeed="500" collapsed="false" 
                            style="width:100%; margin-top: 15px" rendered="#{reformaT2View.formBusqRegistrarT2}">
                    <div class="ui-g-12">
                        <div class="ui-g-7">
                            <p:panelGrid columns="#{reformaT2View.bolPapp ? 4:3}" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:outputLabel value="Código Reforma:"/>
                                    <p:selectOneMenu value="#{reformaT2View.reformaTraspaso.codigo}" id="codReformT2" style="width: 100%">
                                        <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                        <f:selectItems value="#{reformaT2View.listaCodReforma}" var="p" itemLabel="#{p.codigo}" itemValue="#{p.codigo}"/>
                                        <p:ajax listener="#{reformaT2View.generarReformaT2()}" process="codReformT2,periodT2,unidAdminT2"
                                                update="formTablaReforma,formBusquedaConsT2,formMain,formAsignacionDistributivo,formTablaReformaPDA,formReformaPartidaDirecta,botonesReforma"/>
                                    </p:selectOneMenu>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:outputLabel value="Tipo de Traspaso:" style="margin-right:  10px; font-weight: bold" />
                                    <p:selectOneMenu filter="true" value="#{reformaT2View.tipoTraspaso}" styleClass="custom-filter" disabled="false">
                                        <p:ajax listener="#{reformaT2View.generarTipoTraspaso()}" 
                                                update="formTablaReforma,formBusqueda,formBusquedaConsT2,formAsignacionDistributivo,formTablaReformaPDA,formReformaPartidaDirecta"/>
                                        <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItem itemLabel="Plan Anual Politica Pública" itemValue="PAPP" />
<!--                                        <f:selectItem itemLabel="Plan Distributivo General" itemValue="PD" />
                                        <f:selectItem itemLabel="Plan Distributivo Anexo" itemValue="PDA" />
                                        <f:selectItem itemLabel="Partidas Directas" itemValue="PDI" />-->
                                    </p:selectOneMenu>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{reformaT2View.bolPapp}">
                                    <p:outputLabel for="@next" value="Unidad Administrativa" style="font-weight: bold"/>
                                    <p:selectOneMenu id="unidAdminT2" value="#{reformaT2View.idUnidadA}"
                                                     filter="true" filterMatchMode="contains" style="width: 100%">
                                        <f:selectItem itemLabel="-Seleccionar-" itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{reformaT2View.unidades}" var="n" itemLabel="#{n.nombre}" itemValue="#{n.id}" itemLabelEscaped="false"/>
                                        <p:ajax listener="#{reformaT2View.generarTipoTraspaso()}" update="formTablaReforma,formBusquedaConsT2"/>
                                    </p:selectOneMenu>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:outputLabel value="Período:"/>
                                    <p:selectOneMenu value="#{reformaT2View.reformaTraspaso.periodo}" id="periodT2" disabled="true">
                                        <p:ajax listener="#{reformaT2View.cargarDatosTablaGeneralPlanAnual()}" update="formTablaReforma,formBusquedaConsT2" process="@this"/>
                                        <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                        <f:selectItems value="#{reformaT2View.listaAnio}" var="p" itemLabel="#{p.anio}" itemValue="#{p.anio}"/>
                                    </p:selectOneMenu>
                                </h:panelGroup>
                            </p:panelGrid>
                        </div>
                        <div class="ui-g-5">
                            <p:panelGrid columns="3" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:outputLabel value="Fecha Reforma:"/>
                                    <p:calendar value="#{reformaT2View.reformaTraspaso.fechaTraspasoReforma}" pattern="dd-MM-yyyy" navigator="true" readonly="true" locale="es"/>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:outputLabel value="Estado:"/>
                                    <p:inputText value="#{reformaT2View.reformaTraspaso.estadoReforma.texto}" readonly="true"/>
                                </h:panelGroup>
                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                    <p:commandButton value="Generar Reforma T2"  process="periodT2,unidAdminT2" actionListener="#{reformaT2View.generarReforma(false)}"
                                                     icon="fa fa-check-square-o" disabled="#{reformaT2View.btnGenerarReforma}" rendered="#{!reformaT2View.btnGenerarReforma}" 
                                                     update="formTablaReforma,formBusquedaConsT2,formMain,formAsignacionDistributivo,formTablaReformaPDA,botonesReforma,formReformaPartidaDirecta" 
                                                     styleClass="Fs16" style="width: 100%;"/>
                                </h:panelGroup> 
                            </p:panelGrid>
                        </div>
                    </div>
                </p:fieldset>
            </h:form>

            <div class="ui-g-12">
                <h:form id="consultaTablaReforma" >
                    <p:panel rendered="#{reformaT2View.formConsultaReforma}">
                        <p:dataTable id="dataplanificacion" widgetVar="dataplanificacion" var="item" value="#{reformaT2View.lazyReformaTraspaso}" paginator="true" rows="15" style="width: 100%;" paginatorPosition="bottom"
                                     currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}" 
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="15,20,30,40,50,100" lazy="true" 
                                     emptyMessage="No existen registros con el criterio de búsqueda especificado">
                            <p:column headerText="Código" style="width:4%;text-align: center">
                                <p:outputLabel value="#{item.numeracion}" />
                            </p:column>

                            <p:column headerText="Fecha Traspaso" style="width: 7%; text-align: center">
                                <p:outputLabel value="#{item.fechaTraspasoReforma}">
                                    <f:convertDateTime pattern="dd-MM-yyyy"/>
                                </p:outputLabel>
                            </p:column>

                            <p:column headerText="Período" style="width: 7%; text-align: center">
                                <p:outputLabel value="#{item.periodo}"/>
                            </p:column>

                            <p:column headerText="Estado" style="width: 15%; text-align: center">
                                <p:outputLabel value="#{item.estadoReformaTramite == null ? 'REGISTRADA':item.estadoReformaTramite}"/>
                            </p:column>

                            <p:column headerText="Tipo de Reforma" style="width: 10%;text-align: center">
                                <p:outputLabel value="#{item.tipo == true ? 'TRASPASO TIPO 1':'TRASPASO TIPO 2'}"/>
                            </p:column>

                            <p:column headerText="Unidad Administrativa" style="width: 20%; text-align: center;">
                                <p:outputLabel value="#{item.unidadRequiriente.nombre}"/>
                            </p:column>

                            <p:column headerText="Total Incremento" style="width: 10%; text-align: center;">
                                <p:outputLabel value="#{reformaT2View.getTotalIncrementoOrReduccionByReforma(item, true)}">
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </p:outputLabel>
                            </p:column>

                            <p:column headerText="Total Reducción" style="width: 10%; text-align: center;">
                                <p:outputLabel value="#{reformaT2View.getTotalIncrementoOrReduccionByReforma(item, false)}">
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </p:outputLabel>
                            </p:column>

                            <p:column headerText="Acciones" style="width: 10%; text-align: center;">

                                <p:commandLink  title="Enviar" process="@this" actionListener="#{reformaT2View.dlogoObservaciones(item)}" update="dataplanificacion" >
                                    <i class="fa fa-send" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                </p:commandLink>

                                <p:commandLink actionListener="#{reformaT2View.buscarEditar(item)}" title="Editar" process="@this" update="formTablaReforma,consultaTablaReforma,formBusqueda,accionesButton,formBusquedaConsT2,botonesReforma" rendered="#{item.estadoReformaTramite.codigo == 'OBS-REF' || item.estadoReformaTramite.codigo == 'OBSP-REF' ?  true:false}">
                                    <p:graphicImage value="/resources/icons/editar.png"
                                                    width="16" height="15" 
                                                    style="margin-right: 8px;"/>  
                                </p:commandLink>
                                
                                <p:commandLink  title="Documentos" process="@this" actionListener="#{reformaT2View.dlgoDocumento(item)}" update="formDocumento" >
                                    <i class="fa fa-file-text" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                </p:commandLink>

                                <p:commandLink  title="Visualizar" process="@this"  actionListener="#{reformaT2View.consultarReforma(item)}" update="consultaTablaReforma,formDlgVistaReforma">
                                    <i class="fa fa-search" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                </p:commandLink>

                            </p:column>   
                        </p:dataTable>
                    </p:panel>
                </h:form>
            </div>

            <!--PAPP-->
            <div class="ui-g-12">
                <h:form id="formTablaReforma">
                    <p:panel rendered="#{reformaT2View.bolPapp}">
                        <p:panelGrid columns="4" styleClass="form-group ui-panelgrid-blank" style="margin:15px 0px; float: right">
                            <p:commandButton value="Limpiar filtros"  process="@this"
                                             icon="ui-icon-refresh" onclick="PF('dataTReformaT2').clearFilters()" update="dataTReformaT2"
                                             styleClass="Fs16" style="width: 150px"/>
                            <p:commandButton id="mostrarColumnas" type="button" value="Columnas visibles" style="width: 150px;" icon="fa fa-align-justify" />
                        </p:panelGrid>
                        <p:commandButton value="Nuevo PAPP"  process="@this" actionListener="#{reformaT2View.nuevoPAPP()}" disabled="#{reformaT2View.btnNuevoPapp}"
                                         icon="ui-icon-plus" update="formTablaReforma,formMain,actividadesOperativa,productos"
                                         styleClass="Fs16" style="width: 150px; float: left; margin-top: 20px;"/>
                        <p:columnToggler datasource="dataTReformaT2" trigger="mostrarColumnas" />
                        <br></br>
                        <br></br>
                        <br></br>
                        <br></br>
                        <br></br>
                        <p:dataTable id="dataTReformaT2" widgetVar="dataTReformaT2" var="item" value="#{reformaT2View.listaProducto}" 
                                     paginator="true" rows="15" paginatorPosition="bottom" 
                                     currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="15,30,50,100" 
                                     editable="true" editMode="cell" rowIndexVar="can"
                                     filterEvent="keyup" rowExpandMode="single"
                                     scrollable="true" scrollWidth="100%" rowStyleClass="#{item.codigoPresupuestario.isEmpty()||item.codigoPresupuestario==null? 'condicion1':'condicion2'}"
                                     emptyMessage="No existen datos con el criterio de búsqueda especificado">
                            <f:facet name="header">
                                <center>TABLA REFORMA DE LOS PLANES ANUALES - #{reformaT2View.busqueda.anio == 0 ? '20XX':reformaT2View.busqueda.anio}</center>
                            </f:facet>
                            <!--                        <p:ajax event="cellEdit" oncomplete="onCellEdit()"  />                        -->
                            <p:column style="width:16px">
                                <p:rowToggler />
                            </p:column>
                            <p:column headerText="#" style="width:10px; font-weight: bold;" >
                                <h:outputText value="#{can +1 }"/>
                            </p:column>
                            <p:column headerText="Producto" style="width: 200px;" filterBy="#{item.descripcion}">
                                <h:outputText value="#{item.descripcion}"/>
                            </p:column>
                            <p:column headerText="Monto Producto" style="width: 100px;">
                                <h:outputText value="#{item.monto}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Unidad Responsable" style="width: 200px;">
                                <!--                                <f:facet name="filter"> filterBy="# {item.actividadOperativa.unidadResponsable.id}"
                                                                    <p:selectOneMenu filter="true" filterMatchMode="startsWith" effect="fade" value="# {reformaT2View.idUnidadA}" onchange="PF('dataTReformaT2').filter()" styleClass="custom-filter"   style="width: 100%;">
                                                                        <p:ajax listener="# {reformaT2View.sumatotalArticulosPartidas()}" update="formTablaMain"/>
                                                                        <f:selectItem itemLabel="Todos" itemValue="# {null}" noSelectionOption="true" />
                                                                        <f:selectItems value="# {reformaT2View.unidades}" var="n" itemLabel="# {n.nombre}" itemValue="# {n.id}"/>
                                                                    </p:selectOneMenu>
                                                                </f:facet>-->
                                <h:outputText value="#{item.actividadOperativa.unidadResponsable.nombre}" />
                            </p:column>
                            <p:column headerText="Partida Presupuestaria" style="width: 120px; text-align: center" filterBy="#{item.codigoPresupuestario}">
                                <h:outputText value="#{item.codigoPresupuestario == null ? 'S/N':item.codigoPresupuestario}" />
                            </p:column>
                            <p:column headerText="Reservas Aprobadas" style="width: 110px;">
                                <h:outputText value="#{item.reserva}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Saldo Disponible" style="width: 110px;">
                                <h:outputText value="#{item.saldoDisponible}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Traspaso Incremento" style="width: 110px;">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{item.traspasoIncremento}" style="float: right">
                                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                        </h:outputText>
                                    </f:facet>
                                    <f:facet name="input">
                                        <p:inputNumber value="#{item.traspasoIncremento}" disabled="#{reformaT2View.bolReformaT1}">
                                            <p:ajax listener="#{reformaT2View.calcular(item, true)}" update="formTablaReforma"/>
                                        </p:inputNumber>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Traspaso Reducción" style="width: 110px;">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{item.traspasoReduccion}" style="float: right">
                                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                        </h:outputText>
                                    </f:facet>
                                    <f:facet name="input"><p:inputNumber value="#{item.traspasoReduccion}" disabled="#{reformaT2View.bolReformaT1}">
                                            <p:ajax listener="#{reformaT2View.calcular(item, false)}" update="formTablaReforma"/>
                                        </p:inputNumber></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Monto Reformada" style="width: 110px;">
                                <h:outputText value="#{item.montoReformada}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>

                            <p:rowExpansion>
                                <center>
                                    <p:dataTable id="Subta" var="subt" value="#{item}" style="width:97%">
                                        <p:column headerText="Nombre del plan, programa, proyecto" style="width: 260px;" filterBy="#{subt.actividadOperativa.planProgramaProyecto.planAnual.planLocal.descripcion}">
                                            <h:outputText value="#{subt.actividadOperativa.planProgramaProyecto.planAnual.planLocal.descripcion == null ? 'NO APLICA':subt.actividadOperativa.planProgramaProyecto.planAnual.planLocal.descripcion}" />
                                        </p:column>
                                        <p:column headerText="Nº de identificación" style="width: 100px;" >
                                            <h:outputText value="#{subt.actividadOperativa.planProgramaProyecto.id}" />
                                        </p:column>
                                        <p:column headerText="Plan, programa y/o proyecto" style="width: 200px;"  filterBy="#{subt.actividadOperativa.planProgramaProyecto.nombreProgramaProyecto}" >
                                            <h:outputText value="#{subt.actividadOperativa.planProgramaProyecto.nombreProgramaProyecto}" />
                                        </p:column>
                                        <p:column headerText="Actividad Operativa" style="width: 200px;"  filterBy="#{subt.actividadOperativa.nombreActividad}">
                                            <h:outputText value="#{subt.actividadOperativa.nombreActividad}" />
                                        </p:column>
                                        <p:column headerText="Objetivo Operativa" style="width: 200px;"  filterBy="#{subt.actividadOperativa.objetivoOperativo}">
                                            <h:outputText value="#{subt.actividadOperativa.objetivoOperativo}" />
                                        </p:column>
                                        <p:column headerText="Medición Meta" style="width: 100px;">
                                            <h:outputText value="#{subt.actividadOperativa.medicionMeta}" />
                                        </p:column>
                                        <p:column headerText="Meta Cuatrimestre 1" style="width: 100px;">
                                            <h:outputText value="#{subt.actividadOperativa.cuatrimestre1Meta}" />
                                        </p:column>
                                        <p:column headerText="Meta Cuatrimestre 2" style="width: 100px;">
                                            <h:outputText value="#{subt.actividadOperativa.cuatrimestre2Meta}" />
                                        </p:column>
                                        <p:column headerText="Meta Cuatrimestre 3" style="width: 100px;">
                                            <h:outputText value="#{subt.actividadOperativa.cuatrimestre3Meta}" />
                                        </p:column>
                                        <p:column headerText="Indicador Meta" style="width: 200px;"  filterBy="#{subt.actividadOperativa.indicadorMeta}">
                                            <h:outputText value="#{subt.actividadOperativa.indicadorMeta}" />
                                        </p:column>
                                        <p:column headerText="Monto Actividad" style="width: 100px;">
                                            <h:outputText value="#{subt.actividadOperativa.monto}">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Presupuesto Cuatrimestre 1" style="width: 100px;">
                                            <h:outputText value="#{subt.actividadOperativa.cuatrimestre1Actividad}" >
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Presupuesto Cuatrimestre 2" style="width: 100px;">
                                            <h:outputText value="#{subt.actividadOperativa.cuatrimestre2Actividad}" >
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Presupuesto Cuatrimestre 3" style="width: 100px;">
                                            <h:outputText value="#{subt.actividadOperativa.cuatrimestre3Actividad}">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Item Presupuestario" style="width: 200px;">
                                            <h:outputText value="#{subt.itemNew == null ? 'Sin definir':subt.itemNew.codigo}" />
                                        </p:column>
                                        <p:column headerText="Estructura Programática" style="width: 200px;">
                                            <h:outputText value="#{subt.estructruaNew == null ? 'Sin definir':subt.estructruaNew.codigo}" />
                                        </p:column>
                                        <p:column headerText="Fuente" style="width: 200px;" filterBy="#{item.fuente.id}">
                                            <h:outputText value="#{subt.fuente == null ? 'Sin definir':subt.fuente.nombre}"/>
                                        </p:column>
                                        <p:column headerText="Tipo Fuente" style="width: 200px;">
                                            <h:outputText value="#{subt.fuente_new == null ? 0:subt.fuenteNew.codFuente} - #{subt.fuente_new == null ? 'Sin Fuente':subt.fuenteNew.nombre}" style="text-align: left"/>
                                        </p:column>
                                        <p:column headerText="Partida Presupuestaria" style="width: 200px;">
                                            <h:outputText value="#{subt.codigoPresupuestario == null ? 'S/Partida':subt.codigoPresupuestario}" id="ini"/>
                                        </p:column>
                                        <p:column headerText="Período" style="width: 200px;">
                                            <h:outputText value="#{subt.periodo}" />
                                        </p:column>
                                    </p:dataTable>
                                </center>
                            </p:rowExpansion>
                        </p:dataTable>
                        <br></br>
                        <div align="right" style="margin-right: 5px">
                            <p:panelGrid columns="2" style="margin-top: 1%;text-align: right; font-size: 13px; font-weight: bold;" >
                                <f:facet name="header">
                                    Información Adicional
                                </f:facet>

                                <h:outputText value="Total Traspaso Incremento" />
                                <h:outputText value="#{reformaT2View.totalTraspasoIncremento}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                                <h:outputText value="Total Traspaso Reducción" />
                                <h:outputText value="#{reformaT2View.totalTraspasoReduccion}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                                <h:outputText value="Monto Total Reformado" />
                                <h:outputText value="#{reformaT2View.totalMontoReformado}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                            </p:panelGrid>
                        </div>
                        <br></br>
                    </p:panel>
                </h:form>
            </div>

            <!--Partida Distributivo General-->
            <div class="ui-g-12" style="text-align: center">
                <h:form prependId="false" id="formAsignacionDistributivo">
                    <p:panel rendered="#{reformaT2View.panelDistributivo}">
                        <div style="width: 100% !important; display: inline-block">
                            <div class="ui-g" style="float: right; width: 25% !important; text-align: right;">
                                <div class="ui-g-12 ui-md-6 ui-lg-3 estado-normal" style="cursor: pointer;">ACTIVO</div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3 estado-activo" style="cursor: pointer;">VACANTE</div>
                                <div class="ui-g-12 ui-md-6 ui-lg-3 estado-inactivo" style="cursor: pointer;">INACTIVO</div>
                            </div>
                        </div>
                        <br></br>
                        <p:dataTable    value="#{reformaT2View.listaDistributivo}"  id="listaDistributivo" widgetVar="listaDistributivo"  
                                        paginatorPosition="bottom" var="item" rows="20" paginator="true"  
                                        paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                        rowsPerPageTemplate="20,25,35,50,100" rowIndexVar="disg" 
                                        rowStyleClass="#{item.estadoActivo eq false ? 'estado-inactivo':(item.servidorPublico ne null ? 'estado-normal':'estado-activo')}"
                                        emptyMessage="No existen registros con el criterio de búsqueda especificado">
                            <f:facet name="header">
                                DISTRIBUTIVO #{reformaT2View.busqueda.anio==0?'2xxx':reformaT2View.busqueda.anio}
                            </f:facet>
                            <p:column headerText="#" style="width:10px; font-weight: bold;" >
                                <h:outputText value="#{disg +1 }"/>
                            </p:column>
                            <p:column headerText="CEDULA SERVIDOR" style="width: 75px;">
                                <h:outputText value="#{item.servidorPublico.persona.identificacion}"/>
                            </p:column>
                            <p:column headerText="NOMBRE SERVIDOR" style="width: 80px; font-weight: bold; font-size: 13px">
                                <h:outputText value="#{item.servidorPublico.persona.nombreCompleto == null?'VACANTE':item.servidorPublico.persona.nombreCompleto.toUpperCase()}"/>
                            </p:column>
                            <p:column headerText="CÓDIGO " style="width: 30px;" >                                      
                                <h:outputText value="#{reformaT2View.loadCodigo(item.id)}"/>
                            </p:column>
                            <p:column headerText="CARGO" style="width: 90px;" filterBy="#{item.cargo.nombreCargo}" filterMatchMode="contains">
                                <h:outputText value="#{item.cargo.nombreCargo}"/>
                            </p:column>
                            <p:column headerText="VIGENCIA DESDE" style="width: 65px;">
                                <h:outputText value="#{item.vigenciaDesde}" >
                                    <f:convertDateTime pattern="dd-MM-yyyy" />
                                </h:outputText>
                            </p:column>
                            <p:column headerText="VIGENCIA HASTA" style="width: 65px; ">
                                <h:outputText value="#{item.vigenciaHasta == null?'NO HAY FECHA CADUCIDAD':item.vigenciaHasta}" >
                                    <f:convertDateTime pattern="dd-MM-yyyy" />
                                </h:outputText>
                            </p:column>
                            <p:column headerText="UNIDAD" style="width: 90px; " >
                                <h:outputText value="#{item.unidadAdministrativa.nombre}"/>
                            </p:column>
                            <p:column headerText="SUPERVISA" style="width: 90px; " >
                                <h:outputText value="#{item.unidadAdministrativa.padre.nombre}"/>
                            </p:column>
                            <p:column headerText="TIPO DE UNIDAD" style="width: 80px;" >
                                <h:outputText value="#{item.unidadAdministrativa.tipoUnidad.descripcion}"/>
                            </p:column>


                            <p:column headerText="Acciones" style="width: 60px">
                                <p:commandLink  title="Asignar Traspaso" process="@this" actionListener="#{reformaT2View.abrirDlgPartidasPresupuestariaDistributivo(item)}" update="">
                                    <i class="fa fa-dollar" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                </p:commandLink>
                                <p:commandLink  title="ver" process="@this" actionListener="#{reformaT2View.listaVisualizacion(item, false)}">
                                    <i class="fa fa-search" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                </p:commandLink>

                            </p:column>

                        </p:dataTable>

                        <div align="right" style="margin-right: 5px">
                            <p:panelGrid columns="2" style="margin-top: 1%;text-align: right; font-size: 13px; font-weight: bold;" >
                                <f:facet name="header">
                                    Información Adicional
                                </f:facet>

                                <h:outputText value="Total Traspaso Incremento" />
                                <h:outputText value="#{reformaT2View.totalTraspasoIncrementoDGeneral}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                                <h:outputText value="Total Traspaso Reducción" />
                                <h:outputText value="#{reformaT2View.totalTraspasoReduccionDGeneral}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                                <h:outputText value="Monto Total Reformado" />
                                <h:outputText value="#{reformaT2View.totalMontoReformadoDGeneral}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                            </p:panelGrid>
                        </div>
                    </p:panel>
                </h:form> 




            </div>

            <!--Partida Distributivo Anexo-->
            <div class="ui-g-12">
                <h:form id="formTablaReformaPDA">
                    <p:panel rendered="#{reformaT2View.bolDistributivoAnexo}">
                        <p:panelGrid columns="4" styleClass="form-group ui-panelgrid-blank" style="margin:15px 0px; float: right">
                            <p:commandButton value="Limpiar filtros"  process="@this"
                                             icon="ui-icon-refresh" onclick="PF('dataTReformaT2PDA').clearFilters()" update="dataTReformaT2PDA"
                                             styleClass="Fs16" style="width: auto"/>
                            <p:commandButton id="mostrarColumnas" type="button" value="Columnas visibles" style="width: auto;" icon="fa fa-align-justify" />

                        </p:panelGrid>
                        <p:columnToggler datasource="dataTReformaT2PDA" trigger="mostrarColumnas" />
                        <br></br>
                        <br></br>
                        <br></br>
                        <br></br>
                        <br></br>
                        <p:dataTable id="dataTReformaT2PDA" widgetVar="dataTReformaT2PDA" var="item" value="#{reformaT2View.listaPartidaDistributivoAnexo}" 
                                     paginator="true" rows="15" paginatorPosition="bottom" 
                                     currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="10,15,20,30,40,50,100" lazy="false"
                                     editable="true" editMode="cell" rowIndexVar="can"
                                     filterEvent="keyup" rowExpandMode="single"
                                     scrollable="true" scrollWidth="100%" 
                                     emptyMessage="No existen partidas con el criterio de búsqueda especificado">
                            <f:facet name="header">
                                <center>DISTRIBUTIVO ANEXO - #{reformaT2View.busqueda.anio == 0 ? '20XX':reformaT2View.busqueda.anio}</center>
                            </f:facet>
                            <!--                        <p:ajax event="cellEdit" oncomplete="onCellEdit()"  />                        -->

                            <p:column headerText="#" style="width:10px; font-weight: bold;" >
                                <h:outputText value="#{can +1 }"/>
                            </p:column>
                            <p:column headerText="Tipo" style="width: 200px;" filterBy="#{item.distributivoAnexo.valorParametrizado.tipo}">
                                <h:outputText value="#{item.distributivoAnexo.valorParametrizado.tipo}"/>
                            </p:column>
                            <p:column headerText="Descripción" style="width: 20%;" filterBy="#{item.distributivoAnexo.nombre}" filterMatchMode="contains">
                                <h:outputText value="#{item.distributivoAnexo.nombre}" />
                            </p:column> 
                            <p:column headerText="Monto" style="width: 100px;">
                                <h:outputText value="#{item.monto}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>

                            <p:column headerText="Partida Presupuestaria" style="width: 120px;" >
                                <h:outputText value="#{item.partidaAp == null ? 'S/N':item.partidaAp}" style="text-align: right"/>
                            </p:column>
                            <p:column headerText="Reservas Aprobadas" style="width: 110px;">
                                <h:outputText value="#{item.reserva}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Saldo Disponible" style="width: 110px;">
                                <h:outputText value="#{item.monto-item.reserva}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Traspaso Incremento" style="width: 110px;">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{item.traspasoIncremento}" style="float: right">
                                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                        </h:outputText>
                                    </f:facet>
                                    <f:facet name="input">
                                        <h:inputText value="#{item.traspasoIncremento}" disabled="#{reformaT2View.bolReformaT1}">
                                            <p:ajax listener="#{reformaT2View.calcularDistributivoAnexo(item)}" update="formTablaReformaPDA"/>
                                        </h:inputText>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Traspaso Reducción" style="width: 110px;">
                                <p:cellEditor>
                                    <f:facet name="output">
                                        <h:outputText value="#{item.traspasoReduccion}" style="float: right">
                                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                        </h:outputText>
                                    </f:facet>
                                    <f:facet name="input"><h:inputText value="#{item.traspasoReduccion}" disabled="#{reformaT2View.bolReformaT1}">
                                            <p:ajax listener="#{reformaT2View.calcularDistributivoAnexo(item)}" update="formTablaReformaPDA"/>
                                        </h:inputText></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Monto Reformada" style="width: 110px;">
                                <h:outputText value="#{item.reformaCodificado}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column>

                        </p:dataTable>
                        <br></br>
                        <div align="right" style="margin-right: 5px">
                            <p:panelGrid columns="2" style="margin-top: 1%;text-align: right; font-size: 13px; font-weight: bold;" >
                                <f:facet name="header">
                                    Información Adicional
                                </f:facet>

                                <h:outputText value="Total Traspaso Incremento" />
                                <h:outputText value="#{reformaT2View.totalTraspasoIncrementoDAnexo}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                                <h:outputText value="Total Traspaso Reducción" />
                                <h:outputText value="#{reformaT2View.totalTraspasoReduccionDAnexo}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                                <h:outputText value="Monto Total Reformado" />
                                <h:outputText value="#{reformaT2View.totalMontoReformadoDAnexo}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                            </p:panelGrid>
                        </div>
                        <br></br>

                    </p:panel>
                </h:form>
            </div>

            <!--Partida Directa-->
            <div class="ui-g-12">  
                <h:form prependId="false" id="formReformaPartidaDirecta">    

                    <p:panel rendered="#{reformaT2View.bolPartidaDirecta}" >         

                        <p:commandButton disabled="#{reformaT2View.btnNuevoPartidaDirecta}" value="Nuevo" icon="fa fa-plus" style="width: auto; margin-top: 1%; margin-bottom: 1%;" actionListener="#{reformaT2View.abriDlgPartidas()}"/>
                        <p:dataTable expandableRowGroups="true" value="#{reformaT2View.proformaPresupuestoLazy}" id="proformaEgresos"  widgetVar="proformaEgresos"
                                     paginatorPosition="bottom" var="item" rows="10" paginator="true"  
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="10,20,25,35,50" lazy="true" rowIndexVar="index" editable="true" editMode="cell"
                                     emptyMessage="No existen datos con el criterio de búsqueda especificado">
                            <f:facet name="header">
                                Partidas Directas
                            </f:facet>
                            <p:column headerText="No." style="width: 20px;">
                                <h:outputText value="#{index+1}" />
                            </p:column>
                            <p:column headerText="Estructura Programática"  style="width: 20%;">
                                <h:outputText value="#{item.estructuraProgramatica.descripcion}" />
                            </p:column>
                            <p:column  headerText="Partida Presupuestaria" style="width: 20%;text-align: center">
                                <p:outputLabel value="#{item.partidaPresupuestaria}" />
                            </p:column>
                            <p:column  headerText="Item Presupuestario"  style="width: 30%;">
                                <h:outputText value="#{item.itemPresupuestario.descripcion}" />
                            </p:column>
                            <p:column  headerText="Tipo" style="width: 10%;text-align: center">
                                <p:outputLabel value="#{item.codigo}" />
                            </p:column>
                            <p:column  headerText="Período" style="width: 7%;text-align: center" >
                                <p:outputLabel value="#{item.periodo}"/>
                            </p:column>
                            <p:column  headerText="Valor asignado" style="width: 15%;">
                                <p:outputLabel value="#{item.valor}" style="float: right" >
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </p:outputLabel>
                            </p:column>
                            <p:column headerText="Traspaso Incremento" style="width: 15%;">
                                <p:cellEditor disabled="#{item.codigoReformaTraspaso!=null and item.codigoReferencia==null?true:false}">
                                    <f:facet name="input">
                                        <p:inputNumber id="suplemento"
                                                       value="#{item.traspasoIncremento}" style="width:100%;">
                                            <p:ajax event="change" listener="#{reformaT2View.calcularPartidaDirecta(item)}" update="proformaEgresos"   />
                                        </p:inputNumber>
                                    </f:facet>
                                    <f:facet name="output"> 
                                        <h:outputText value="#{item.traspasoIncremento}" style="float: right">
                                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                        </h:outputText>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Traspaso Reducción" style="width: 15%;">
                                <p:cellEditor disabled="#{item.codigoReformaTraspaso!=null and item.codigoReferencia==null?true:false}" >
                                    <f:facet name="input">
                                        <p:inputNumber id="reduccion"
                                                       value="#{item.traspasoReduccion}" style="width:100%;">
                                            <p:ajax event="change" listener="#{reformaT2View.calcularPartidaDirecta(item)}" update="proformaEgresos"   />
                                        </p:inputNumber>
                                    </f:facet>
                                    <f:facet name="output"> 
                                        <h:outputText value="#{item.traspasoReduccion}" style="float: right">
                                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                        </h:outputText>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column  headerText="Reforma codificado" style="width: 15%;">
                                <p:outputLabel value="#{item.reformaCodificado}" style="float: right" >
                                    <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                </p:outputLabel>
                            </p:column>
                            <p:column headerText="Acciones" style="width: auto;">
                                <p:commandLink style="width: auto;" title="Editar" process="@this" actionListener="#{reformaT2View.editarPartidaDirectaValor(item)}"
                                               disabled="#{item.codigoReformaTraspaso!=null and item.codigoReferencia==null?false:true}">
                                    <p:graphicImage value="/resources/icons/editar.png"  width="16" height="15" style="margin-right: 8px;"/>    
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                        <div align="right" style="margin-right: 5px">
                            <p:panelGrid columns="2" style="margin-top: 1%;text-align: right; font-size: 13px; font-weight: bold;" >
                                <f:facet name="header">
                                    Información Adicional
                                </f:facet>

                                <h:outputText value="Total Traspaso Incremento" />
                                <h:outputText value="#{reformaT2View.totalTraspasoIncrementoPDirecta}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                                <h:outputText value="Total Traspaso Reducción" />
                                <h:outputText value="#{reformaT2View.totalTraspasoReduccionPDirecta}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                                <h:outputText value="Monto Total Reformado" />
                                <h:outputText value="#{reformaT2View.totalMontoReformadoPDirecta}" >
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>

                            </p:panelGrid>
                        </div>
                    </p:panel>
                </h:form>
            </div>

            <!--Botones Reforma-->
            <div class="ui-g-12">
                <h:form id="botonesReforma">
                    <h:panelGroup  layout="block" rendered="#{reformaT2View.btnTraspasos}">
                        <center>
                            <p:commandButton value="#{reformaT2View.formBusqConsultar == true ? 'Editar':'Guardar'} Reforma" actionListener="#{reformaT2View.saveReformaTraspaso()}"
                                             icon="ui-icon-save" update="formTablaReforma,formBusqueda,botonesReforma" disabled="#{reformaT2View.btnGuardar}"
                                             styleClass="Fs16" style="width: 150px; text-align: center; "/>
                            <p:spacer width="10" />
                            <p:commandButton value="Continuar y Terminar Reforma" actionListener="#{reformaT2View.continuarYTerminarTarea()}"
                                             icon="fa fa-check" update="formTablaReforma,formBusqueda,botonesReforma,formBusquedaConsT2,formReformaPartidaDirecta,formTablaReformaPDA,formAsignacionDistributivo,consultaTablaReforma,accionesButton" 
                                             disabled="#{reformaT2View.btnContinuarTerminarTarea}"
                                             styleClass="Fs16" style="width: 190px; text-align: center; "/>
                            <p:spacer width="10" />
                            <p:commandButton value="Cancelar" icon="ui-icon-clear" disabled="#{reformaT2View.btnCancelar}"
                                             actionListener="#{reformaT2View.resetValuesReforma()}" style="width: 150px; text-align: center; "
                                             styleClass="red-btn" update="formTablaReforma,formBusqueda,formBusquedaConsT2,botonesReforma,formReformaPartidaDirecta,formTablaReformaPDA,formAsignacionDistributivo,consultaTablaReforma,accionesButton">
                                <p:confirm header="Confirmación de eliminación" message="Está seguro de eliminar todos los datos de la reforma? " icon="fa fa-exclamation-triangle" />
                            </p:commandButton>
                        </center>
                    </h:panelGroup>
                </h:form>
            </div>
            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
            </p:confirmDialog>
        </div>

        <p:dialog id="dlgPapp" header="Formulario de PAPP" widgetVar="dlgPapp" width="85%" height="600" modal="true" showEffect="fold" hideEffect="fold" resizable="false" >
            <div class="ui-g-12">
                <p:accordionPanel id="formMain" prependId="false" style="width: 100%; border: 1px solid #FCFBFB" activeIndex="#{reformaT2View.indiceDeAcordian}">
                    <p:tab title="|ACTIVIDAD OPERATIVA|" rendered="#{reformaT2View.registraNuevoPapp}">
                        <h:form id="actividadesOperativa" prependId="false" rendered="#{reformaT2View.registraNuevoPapp}">
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:commandButton value="Nueva Actividad" icon="fa fa-plus" actionListener="#{reformaT2View.openActividadOperativa(null)}"
                                                 oncomplete="PF('DlgActividadReforma').show()" update="formActividad,formActividadReforma" style="width: auto;"/>
                            </p:panelGrid>
                            <p:dataTable rendered="#{reformaT2View.registraNuevoPapp}"   expandableRowGroups="true" id="listaactividad" widgetVar="listaactividad" paginatorPosition="bottom" var="item"
                                         value="#{reformaT2View.lazyActividadOperativas}" rows="20" paginator="true"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         style="text-align: center; margin: 20px"
                                         rowsPerPageTemplate="20,25,35,50" lazy="true"
                                         emptyMessage="No existen cuentas con el criterio de busqueda especificado">
                                <f:facet name="header">
                                    LISTADO DE ACTIVIDADES - #{reformaT2View.busqueda.anio == 0 ? '20XX':reformaT2View.busqueda.anio}
                                </f:facet>
                                <p:column  headerText="Plan proyecto programa" style="width: 20%"  filterBy="#{item.planProgramaProyecto.planAnual.planLocal.descripcion}" groupRow="true">
                                    <h:outputText value="#{item.planProgramaProyecto.planAnual.planLocal.descripcion == null ?'NO APLICA':item.planProgramaProyecto.planAnual.planLocal.descripcion}" />
                                </p:column>
                                <p:column  headerText="PLAN, PROGRAMA Y/O PROYECTO" style="width: 20%" filterBy="#{item.planProgramaProyecto.nombreProgramaProyecto}" groupRow="true">
                                    <h:outputText value="#{item.planProgramaProyecto.nombreProgramaProyecto}" />
                                </p:column>
                                <p:column  headerText="Actividad Operacional" style="width: 20%" filterBy="#{item.nombreActividad}">
                                    <h:outputText value="#{item.nombreActividad}"/>
                                </p:column>
                                <p:column  headerText="Monto" style="width: 8%" filterBy="#{item.monto}">
                                    <h:outputText value="#{item.monotReformado}" style="text-align: right;">
                                        <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Unidad Responsable" style="width: 16%" filterBy="#{item.unidadResponsable.id}" >
                                    <f:facet name="filter">
                                        <p:selectOneMenu onchange="PF('listaactividad').filter()" styleClass="custom-filter"   style="width: 100%;">
                                            <f:selectItem itemLabel="Todos" itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{reformaT2View.unidades}" var="n" itemLabel="#{n.nombre}" itemValue="#{n.id}"/>
                                        </p:selectOneMenu>
                                    </f:facet>
                                    <h:outputText value="#{item.unidadResponsable.nombre}"/>
                                </p:column>
                                <p:column  headerText="Período" style="width: 5%; " >
                                    <h:outputText value="#{item.periodo} "/>
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center; width: 8%">
                                    <p:commandLink disabled="#{reformaT2View.bloqueo}" title="Añadir Producto" process="@this" actionListener="#{reformaT2View.añadirActividadOperativa(item)}">
                                        <i class="fa fa-plus" style="font-size: 1.5em; margin-right: 8px;"></i>
                                    </p:commandLink>
                                    <p:commandLink disabled="#{reformaT2View.bloqueo}" title="Editar Actividad"   process="@this"  update="listaactividad" actionListener="#{reformaT2View.editarActividadOperativa(item)}" >
                                        <p:graphicImage value="/resources/icons/editar.png"
                                                        width="16" height="15" 
                                                        style="margin-right: 8px;"/>  
                                    </p:commandLink>
                                    <p:commandLink disabled="true" title="Eliminar"   process="@this"  actionListener="#{reformaT2View.eliminarActividadOperativa(item)}" update="listaactividad">
                                        <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 8px; color: red;"></i>
                                        <p:confirm header="Confirmación de eliminación" message="Esta seguro de eliminar la esta plan proyecto"  icon="fa fa-exclamation-triangle" />
                                    </p:commandLink>
                                </p:column>
                            </p:dataTable>
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                            </p:confirmDialog>
                        </h:form>
                    </p:tab>

                    <p:tab title="|PRODUCTOS|" rendered="#{reformaT2View.registraNuevoPapp}">
                        <h:form id="productos" prependId="false" rendered="#{reformaT2View.registraNuevoPapp}">
                            <p:dataTable rendered="#{reformaT2View.registraNuevoPapp}"   expandableRowGroups="true" value="#{reformaT2View.productoLazy}" id="listaProductos" widgetVar="listaProductos"
                                         paginatorPosition="bottom" var="item" rows="20" paginator="true"  style="text-align: center;margin: 20px"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="20,25,35,50,100" lazy="true"
                                         emptyMessage="No existen cuentas con el criterio de busqueda especificado">
                                <f:facet name="header">
                                    LISTADO DE PRODUCTOS - #{reformaT2View.busqueda.anio == 0 ? '20XX':reformaT2View.busqueda.anio}
                                </f:facet>

                                <p:column  headerText="Plan-Programa-Proyecto" filterBy="#{item.actividadOperativa.planProgramaProyecto.nombreProgramaProyecto}" groupRow="true">
                                    <p:outputLabel value="#{item.actividadOperativa.planProgramaProyecto.nombreProgramaProyecto}" />
                                </p:column>
                                <p:column  headerText="Actividad Operacional/Monto" filterBy="#{item.actividadOperativa.nombreActividad}" groupRow="true" style="width: 25%;" filterMatchMode="contains">
                                    <div style="width: 100%;">
                                        <div style="width: 70%;float: left;">
                                            <p:outputLabel value="#{item.actividadOperativa.nombreActividad}"/>
                                        </div>
                                        <div style="width: 30%;float: right;text-align: right;">

                                            <p:outputLabel value="#{item.actividadOperativa.monotReformado}" class="FontBold">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </p:outputLabel>

                                        </div>
                                    </div>

                                </p:column>
                                <p:column headerText="Producto" filterBy="#{item.descripcion}">
                                    <p:outputLabel value="#{item.descripcion}"/>
                                </p:column>
                                <p:column headerText="Monto Producto" style="text-align: right;">
                                    <p:outputLabel value="#{item.monto}">
                                        <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                    </p:outputLabel>
                                </p:column>                                
                                <p:column headerText="Reserva" style="text-align: right;">
                                    <p:outputLabel value="#{item.reserva}">
                                        <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                    </p:outputLabel>
                                </p:column>                                
                                <p:column headerText="Saldo Disponible" style="text-align: right;">
                                    <p:outputLabel value="#{item.saldoDisponible}">
                                        <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                    </p:outputLabel>
                                </p:column>
                                <p:column headerText="Traspaso Incremento" style="text-align: right;">
                                    <p:outputLabel value="#{item.traspasoIncremento}">
                                        <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                    </p:outputLabel>
                                </p:column>
                                <p:column headerText="Traspaso Reducción" style="text-align: right;">
                                    <p:outputLabel value="#{item.traspasoReduccion}">
                                        <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                    </p:outputLabel>
                                </p:column>

                                <p:column headerText="Monto Reformando" style="text-align: right;">
                                    <p:outputLabel value="#{item.montoReformada}">
                                        <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                    </p:outputLabel>
                                </p:column>
                                <p:column headerText="Acciones" style="text-align: center; width: 8%">
                                    <p:commandLink disabled="#{item.codigoReformaTraspaso!=null and item.numeroOrdenId==null and item.estadoPapp == null?false:true}" title="Añadir Producto a la Reforma" actionListener="#{reformaT2View.anadirProductoAReforma(item)}" update="listaProductos,formTablaReforma"   process="@this" >
                                        <i class="fa fa-arrow-circle-o-left" style="font-size: 1.5em; margin-right: 8px; color: blue;"></i>
                                    </p:commandLink>
                                    <p:commandLink  disabled="#{item.codigoReformaTraspaso!=null and item.numeroOrdenId==null?false:true}"  title="Editar Producto" actionListener="#{reformaT2View.editarProducto(item)}"   process="@this"  >
                                        <p:graphicImage value="/resources/icons/editar.png"
                                                        width="16" height="15"  
                                                        style="margin-right: 8px;"/>  
                                    </p:commandLink>
                                    <p:commandLink disabled="true" title="Eliminar" actionListener="#{reformaT2View.eliminarProducto(item)}" update="listaProductos"   process="@this" >
                                        <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 8px; color: red;"></i>
                                        <p:confirm header="Confirmación de eliminación" message="Esta seguro de eliminar este producto"  icon="fa fa-exclamation-triangle" />
                                    </p:commandLink>
                                </p:column>
                            </p:dataTable>
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                            </p:confirmDialog>
                        </h:form>
                    </p:tab>
                </p:accordionPanel>
            </div>
        </p:dialog>

        <p:dialog width="400" id="DdlgProducto"  header="Producto" widgetVar="DdlgProducto" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
            <h:form id="formProducto" prependId="false">
                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" style="width: 100%">
                    <p:outputLabel value="Nombre Producto:" />
                    <p:inputText value="#{reformaT2View.producto.descripcion}" onkeyup="javascript:this.value = this.value.toUpperCase();" style="width: 100%"/>
                </p:panelGrid>
                <br></br>
                <center>
                    <p:commandButton value="Añadir"
                                     icon="ui-icon-plus"  actionListener="#{reformaT2View.saveProducto()}"
                                     styleClass="Fs16" style="width: auto; margin-bottom: 15px;" update="productos"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog id="DlgPlanProyecto"  header="Formulario Plan-Proyecto" widgetVar="DlgPlanProyecto" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
            <h:form id="formPlanProyecto"  prependId="false">
                <div class="ui-g">
                    <div class="ui-g-12">
                        <div class="card card-w-title">
                            <p:outputPanel id="formProgramaProyecto" style="width: 100%;">
                                <p:panelGrid  columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <p:outputLabel value="Nombre del plan anual, programa, proyecto"/>
                                    <p:selectOneMenu value="#{reformaT2View.programaProyecto.nombreProgramaProyecto}" onkeyup="javascript:this.value = this.value.toUpperCase();" editable="true" style="width: 100%" >
                                        <f:selectItem itemLabel="NO APLICA" itemValue="NO APLICA"/>
                                    </p:selectOneMenu>
                                </p:panelGrid>
                            </p:outputPanel>
                        </div>
                    </div>
                </div>
                <center>
                    <p:commandButton value="Adicionar" actionListener="#{reformaT2View.savePlanNombreProyecto()}"
                                     icon="ui-icon-plus"
                                     styleClass="Fs16" style="width: auto; margin-bottom: 15px; margin-top: 5%;" />
                </center>
            </h:form>
        </p:dialog>

        <p:dialog width="900" height="520" id="DlgActividad"  header="Actividad Operativa" widgetVar="DlgActividad" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
            <h:form id="formActividad" prependId="false">
                <p:fieldset title="DESCRIPCIÓN" legend="DESCRIPCIÓN" toggleable="true" rendered="#{reformaT2View.actividad.numeroOrdenId eq null}">
                    <p:panelGrid columns="2" style="width: 100%" layout="grid" styleClass="ui-panelgrid-blank form-group">
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <h:outputText value="PLAN" style="font-size: 20px; font-weight: bold;"/>
                            <p:inputText style="width: 100%"
                                         value="#{reformaT2View.programaProyecto.programa.panificacion.descripcion eq null? 'NO APLICA': 
                                                  reformaT2View.programaProyecto.programa.panificacion.descripcion.toUpperCase()}" readonly="true"/>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <h:outputText value="PROGRAMA" style="font-size: 20px; font-weight: bold;"/>
                            <p:inputText style="width: 100%"
                                         value="#{reformaT2View.programaProyecto.programa.descripcion eq null?'NO APLICA':
                                                  reformaT2View.programaProyecto.programa.descripcion.toUpperCase()}" readonly="true"/>
                        </p:panelGrid>                  
                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                        <h:panelGroup>
                            <h:outputText value="PROYECTO " style="font-size: 20px; font-weight: bold;"/>
                            <p:commandLink title="Buscar Proyecto" oncomplete="PF('dlogoProyecto').show()" process="@this" 
                                           actionListener="#{reformaT2View.loadingProgramas()}" update="fomProyecto,datatable2">
                                <i class="fa fa-search" style="font-size: 1.5em; margin-right: 8px;"></i>
                            </p:commandLink>
                        </h:panelGroup>
                        <p:inputTextarea value="#{reformaT2View.programaProyecto.nombreProgramaProyecto.toUpperCase()}" readonly="true" style="width: 100%" rows="5" cols="12"/>
                    </p:panelGrid>
                </p:fieldset>
                <p:fieldset title="DATOS ADICIONALES" legend="DATOS ADICIONALES" toggleable="true">
                    <p:panelGrid columns="4" style="width: 100%" layout="grid" styleClass="ui-panelgrid-blank form-group">
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <h:panelGroup>
                                <h:outputText value="PAI:"/>
                                <p:selectOneRadio value="#{reformaT2View.actividad.pai}" unselectable="true">
                                    <f:selectItem itemLabel="SI" itemValue="true"/>
                                    <f:selectItem itemLabel="NO" itemValue="false"/>
                                </p:selectOneRadio>
                            </h:panelGroup>
                        </p:panelGrid>
                        <p:panelGrid columns="2" styleClass="ui-panelgrid-blank" style="width: 100%;" id="editlabelaniopresupuestopar">
                            <h:panelGroup>
                                <h:outputText value="PRESUPUESTO PARTICIPATIVO:" class="FontBold"/>
                                <p:selectOneRadio value="#{reformaT2View.actividad.presupuestoParticipacion}" unselectable="true">
                                    <f:selectItem itemLabel="SI" itemValue="true"/>
                                    <f:selectItem itemLabel="NO" itemValue="false"/>
                                    <p:ajax update="editlabelaniopresupuestopar"/>
                                </p:selectOneRadio>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{reformaT2View.actividad.presupuestoParticipacion}" style="width: 85px">
                                <h:outputText value="PERIODO: " style="font-size: 15px; font-weight: bold;width: 85px"/>
                                <p:inputText style="font-size: 14px; font-weight: bold; width: 85px" value="#{reformaT2View.actividad.presParticipacionAnio}"
                                             required="true" requiredMessage="REQUERIDO" id="editpresPartiAnio"/>
                                <p:message for="editpresPartiAnio"/>
                            </h:panelGroup>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <h:outputText value="GRUPO ATENCION:" class="FontBold"/>
                            <p:selectOneRadio value="#{reformaT2View.actividad.grupoAtencion}" unselectable="true">
                                <f:selectItem itemLabel="SI" itemValue="true"/>
                                <f:selectItem itemLabel="NO" itemValue="false"/>
                            </p:selectOneRadio>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <h:outputText value="COMPONENTE:" class="FontBold"/>
                            <p:selectOneMenu value="#{reformaT2View.actividad.tipoComponete}" converter="#{utilConverter}" style="width: 100%;">
                                <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                <f:selectItems value="#{reformaT2View.listacomponentes}" var="c" itemLabel="#{c.texto}" itemValue="#{c}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                    </p:panelGrid>
                    <p:fieldset class="ui-g-1">
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank">
                            <h:outputText value="NUEVO/ARRASTRE:" class="FontBold"/> 
                            <p:selectBooleanButton value="#{reformaT2View.actividad.arrastre}" onLabel="NUEVO" offLabel="ARRASTRE" style="width:auto;"/>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset class="ui-g-10">
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <p:outputLabel value="NOMBRE DE LA ACTIVIDAD:" class="FontBold"/>
                            <p:inputTextarea value="#{reformaT2View.actividad.nombreActividad}"  style="width: 95%" rows="2" cols="7" scrollHeight="5" disabled="#{reformaT2View.actividad.numeroOrdenId ne null}"/>
                        </p:panelGrid>
                    </p:fieldset>
                </p:fieldset>
                <p:panelGrid columns="3" styleClass="form-group ui-panelgrid-blank">
<!--                    <p:panelGrid  columns="1"   >
                        <p:outputLabel value="Nombre Actividad:" />
                        <p:inputText value="#{reformaT2View.actividad.nombreActividad}" onkeyup="javascript:this.value = this.value.toUpperCase();"/>
                    </p:panelGrid>-->
                    <p:panelGrid columns="1">
                        <p:outputLabel value="Objetivo Operativo:" />
                        <p:inputText value="#{reformaT2View.actividad.objetivoOperativo}" onkeyup="javascript:this.value = this.value.toUpperCase();"/>
                    </p:panelGrid>
                    <p:panelGrid columns="1">
                        <p:outputLabel value="Descripción meta:" />
                        <p:inputText value="#{reformaT2View.actividad.descripcionMeta}" onkeyup="javascript:this.value = this.value.toUpperCase();"/>
                    </p:panelGrid>

                    <p:panelGrid columns="1">
                        <p:outputLabel value="Medición Porcentaje:" />
                        <p:selectBooleanButton style="widows: auto;" value="#{reformaT2View.actividad.medicionPorcentaje}" 
                                               onLabel="Si" offLabel="No" offIcon="fa fa-times" onIcon="fa fa-check">
                            <p:ajax update="medMeta" listener="#{reformaT2View.cambiarMedicionPorcentual()}"/>
                        </p:selectBooleanButton>
                    </p:panelGrid>

                </p:panelGrid>
                <p:fieldset legend="Detalles de Actividad">
                    <p:panelGrid columns="5" styleClass="form-group ui-panelgrid-blank">
                        <p:panelGrid columns="1">
                            <p:outputLabel value="Medicion Meta:" />
                            <p:inputNumber id="medMeta" value="#{reformaT2View.actividad.medicionMeta}" disabled="#{reformaT2View.actividad.medicionPorcentaje}"/>
                        </p:panelGrid>
                        <p:panelGrid columns="1">
                            <p:outputLabel value="Distribucción Meta:" />
                            <p:inputText id="medDistMet" value="#{reformaT2View.actividad.distribucionMeta.texto}" disabled="true"/>
                        </p:panelGrid>
                        <h:panelGroup id="groupDistrubtionMetaEdit">
                            <p:panelGrid columns="2" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.actividad.distribucionMeta.codigo eq 'S'}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEMESTRE UNO:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.semestreUnoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEMESTRE DOS:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.semestrDosMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid columns="4" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.actividad.distribucionMeta.codigo eq 'T'}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE UNO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreUnoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE DOS:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreDosMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE TRES:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreTresMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE CUATRO:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreCuatroMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid columns="3" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.actividad.distribucionMeta.codigo eq 'C'}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE UNO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreUnoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE DOS:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreDosMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE TRES:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreTresMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid  columns="4" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.actividad.distribucionMeta.codigo eq 'M'}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="ENERO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.eneroMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="FEBRERO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.febreroMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="MARZO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.marzoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="ABRIL" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.abrilMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="MAYO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.mayoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="JUNIO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.junioMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="JULIO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.julioMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="AGOSTO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.agostoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEPTIEMBRE" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.septiembreMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="OCTUBRE" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.octubreMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="NOVIEMBRE" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.noviembreMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="DICIEMBRE" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.diciembreMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                        </h:panelGroup>
                    </p:panelGrid>
                </p:fieldset>



                <p:fieldset legend="Actividad">
                    <p:panelGrid columns="5" styleClass="form-group ui-panelgrid-blank">
                        <p:panelGrid columns="1">
                            <p:outputLabel value="Monto:" />
                            <p:inputNumber value="#{reformaT2View.actividad.monotReformado}"/>
                        </p:panelGrid>
                        
                        <p:panelGrid columns="1">
                            <p:outputLabel value="Distribucción:" />
                            <p:inputText id="medDist" value="#{reformaT2View.actividad.tipoDistribuccion.texto}" disabled="true"/>
                        </p:panelGrid>

                       <h:panelGroup id="groupDistrubtionx">
                            <p:panelGrid id="semestralx" columns="2" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.actividad.tipoDistribuccion.codigo eq 'S'}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEMESTRE UNO REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.semestreUno}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEMESTRE DOS REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.semestrDos}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid id="trimestralx" columns="4" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.actividad.tipoDistribuccion.codigo eq 'T'}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE UNO REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreUno}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE DOS REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreDos}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE TRES REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreTres}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE CUATRO REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreCuatro}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid id="cuatrimestrex" columns="3" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.actividad.tipoDistribuccion.codigo eq 'C'}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE UNO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreUno}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE DOS REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreDos}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE TRES REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreTres}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid id="mensualx" columns="4" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.actividad.tipoDistribuccion.codigo eq 'M'}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="ENERO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.eneroReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="FEBRERO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.febreroReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="MARZO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.marzoReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="ABRIL REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.abrilReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="MAYO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.mayoReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="JUNIO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.junioReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="JULIO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.julioReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="AGOSTO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.agostoReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEPTIEMBRE REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.septiembreReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="OCTUBRE REFORMA" class="FontBold"/>
                                    <p:inputNumber  value="#{reformaT2View.actividad.octubreReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="NOVIEMBRE REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.noviembreReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="DICIEMBRE REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.diciembreReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                        </h:panelGroup>
                    </p:panelGrid>
                </p:fieldset>
                <p:panelGrid columns="4" styleClass="form-group ui-panelgrid-blank">
                    <p:panelGrid columns="1">
                        <p:outputLabel value="Indicador meta:" />
                        <p:inputText value="#{reformaT2View.actividad.indicadorMeta}" onkeyup="javascript:this.value = this.value.toUpperCase();"/>
                    </p:panelGrid>
                    <p:panelGrid columns="1">
                        <p:outputLabel value="Unidad Administrativa:" />
                        <p:selectOneMenu value="#{reformaT2View.actividad.unidadResponsable}" converter="#{utilConverter}" disabled="true">
                            <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                            <f:selectItems value="#{reformaT2View.unidades}" var="item" itemLabel="#{item.nombre}" itemValue="#{item}" />
                        </p:selectOneMenu>
                    </p:panelGrid>

                    <p:panelGrid columns="1" style="text-align: center;">
                        <p:commandButton value="AÑADIR"  actionListener="#{reformaT2View.saveActividadOperativa()}"
                                         icon="ui-icon-plus"  update="actividadesOperativa,listaProductos" style="margin: auto; width: 100%" />
                    </p:panelGrid>
                </p:panelGrid>



            </h:form>
        </p:dialog>

        <p:dialog width="300" id="DlgProductoTraspaso"  header="Producto" widgetVar="DlgProductoTraspaso" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
            <h:form id="formProductoTraspaso" prependId="false">

                <p:panelGrid columns="2" styleClass="form-group ui-panelgrid-blank">
                    <p:panelGrid  columns="1"  styleClass="form-group ui-panelgrid-blank" >
                        <p:outputLabel value="Monto Suplemento:" />
                        <p:inputNumber value="#{reformaT2View.producto.traspasoIncremento}"/>
                    </p:panelGrid>
                    <p:panelGrid  columns="1"  styleClass="form-group ui-panelgrid-blank" >
                        <p:commandButton value="Añadir"
                                         icon="ui-icon-plus"  actionListener="#{reformaT2View.editarTraspaso()}"
                                         styleClass="Fs16" style="width: auto; margin-bottom: 15px;" update="productos"/>
                    </p:panelGrid>


                </p:panelGrid>



            </h:form>
        </p:dialog>

        <p:dialog id="DlgpartidasDistributivosvista" width="1300"  header="Partidas Presupuestarias" 
                  widgetVar="DlgpartidasDistributivosvista" position="center"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false">  
            <h:form id="formDlgpartidasDistributivosvista"  prependId="false">

                <p:panel  style="text-align: left; ">
                    <p:panelGrid columns="3" layout="grid" style="font-size: 12px; "  styleClass="ui-panelgrid-blank form-group">


                        <h:panelGroup class="Wid100 TaskProperty" layout="block" style="padding-top: 15px;padding-bottom: 15px;" >
                            <p:outputLabel value="RMU: " class="FontBold"/>
                            <p:outputLabel value="#{reformaT2View.rmu}">
                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                            </p:outputLabel>  
                        </h:panelGroup>
                        <h:panelGroup class="Wid100 TaskProperty" layout="block" style="padding-top: 15px;padding-bottom: 15px;" >
                            <p:outputLabel value="Unidad: " class="FontBold"/>
                            <p:outputLabel value="#{reformaT2View.dataView.unidadAdministrativa.nombre}">
                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                            </p:outputLabel>
                        </h:panelGroup>

                        <h:panelGroup class="Wid100 TaskProperty" layout="block" style="padding-top: 15px;padding-bottom: 15px;" >
                            <p:outputLabel value="Cargo: " class="FontBold"/>
                            <p:outputLabel value="#{reformaT2View.dataView.cargo.nombreCargo}">
                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                            </p:outputLabel>
                        </h:panelGroup>
                    </p:panelGrid>
                </p:panel>
                <p:dataTable  paginator="true" id="listavistaDistributivo" widgetVar="listavistaDistributivo" paginatorPosition="bottom" style="text-align: center; margin: 20px"
                              paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                              rowsPerPageTemplate="10,15,20,25" scrollable="true"    editable="true" editMode="cell"
                              emptyMessage="No existen datos con el criterio de búsqueda especificado" value="#{reformaT2View.listaVista}" var="item4" >

                    <f:facet name="header">
                        Rubros
                    </f:facet>

                    <p:column headerText="Tipo" style="width: 20%; text-align: justify">
                        <h:outputText value="#{item4.distributivo.valoresParametrizados.tipo.texto}" />
                    </p:column> 

                    <p:column headerText="Monto" style="width: 7%;" >
                        <h:outputText value="#{item4.distributivo.valorResultante}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Reservas" style="width: 7%;" >
                        <h:outputText value="#{item4.reserva}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Item" style="width: 9%;">

                        <h:outputText value="#{item4.itemAp.codigo}" />

                    </p:column>


                    <p:column headerText="Estructura" style="width: 9%;">

                        <h:outputText value="#{item4.estructuraAp.codigo}" />

                    </p:column>


                    <p:column headerText="Fuente" style="width: 7%;">

                        <h:outputText value="#{item4.fuenteAp.tipoFuente.orden}" />

                    </p:column>

                    <p:column headerText="Partida" style="width: 10%; text-align: center">
                        <h:outputText value="#{item4.partidaAp}" />
                    </p:column>

                    <p:column headerText="Traspaso Incremento" style="width: 10%;">
                        <h:outputText value="#{item4.traspasoIncremento}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Traspaso Reducción" style="width: 10%;">
                        <h:outputText value="#{item4.traspasoReduccion}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>

                    <p:column headerText="Monto Codificado" style="width: 10%; text-align: center">
                        <h:outputText value="#{item4.reformaCodificado}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>

                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog id="DlgPartidasDistributivos" width="1300"  header="Partidas Presupuestarias" 
                  widgetVar="DlgPartidasDistributivos" position="center"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false">

            <h:form id="formDlgpartidasDistributivos"  prependId="false">
                <div style="width: 100%; ">
                </div>
                <p:panel  style="text-align: left; ">
                    <p:panelGrid columns="3" layout="grid" style="font-size: 12px; "  styleClass="ui-panelgrid-blank form-group">
                        <h:panelGroup class="Wid100 TaskProperty" layout="block" style="padding-top: 15px;padding-bottom: 15px;" >
                            <p:outputLabel value="RMU: " class="FontBold"/>
                            <p:outputLabel value="#{reformaT2View.rmu}">
                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                            </p:outputLabel>  
                        </h:panelGroup>
                        <h:panelGroup class="Wid100 TaskProperty" layout="block" style="padding-top: 15px;padding-bottom: 15px;" >
                            <p:outputLabel value="Unidad: " class="FontBold"/>
                            <p:outputLabel value="#{reformaT2View.mostrarData.unidadAdministrativa.nombre}">
                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                            </p:outputLabel>
                        </h:panelGroup>
                        <h:panelGroup class="Wid100 TaskProperty" layout="block" style="padding-top: 15px;padding-bottom: 15px;" >
                            <p:outputLabel value="Cargo: " class="FontBold"/>
                            <p:outputLabel value="#{reformaT2View.mostrarData.cargo.nombreCargo}">
                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                            </p:outputLabel>
                        </h:panelGroup>
                    </p:panelGrid>
                </p:panel>
                <p:dataTable  paginator="true" id="lista"  paginatorPosition="bottom" style="text-align: center; margin: 20px"
                              paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                              rowsPerPageTemplate="10,15,20,25" scrollable="true"  widgetVar="lista"  editable="true" editMode="cell"
                              emptyMessage="No existen datos con el criterio de búsqueda especificado" rowStyleClass="#{item3.partidaAp.isEmpty()||item3.partidaAp==null? 'condicion1':'condicion2'}"
                              value="#{reformaT2View.listaRubros}" var="item3" >
                    <f:facet name="header">
                        Rubros
                    </f:facet>
                    <p:column headerText="Tipo" style="width: 20%; text-align: justify">
                        <h:outputText value="#{item3.distributivo.valoresParametrizados.tipo.texto}" />
                    </p:column> 
                    <p:column headerText="monto" style="width: 5%; text-align: right;" >
                        <!--<h:outputText value="# {item3.distributivo.valorResultante}" >-->
                        <h:outputText value="#{item3.monto}" >
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Reserva" style="width: 5%; text-align: right;" >
                        <h:outputText value="#{item3.reserva}" >
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Saldo Disponible" style="width: 5%; text-align: right;" >
                        <h:outputText value="#{item3.monto-item3.reserva}" >
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Item" style="width: 10%;">

                        <!--                        <p:cellEditor disabled="# {item3.partidaAp==null?false:true}">
                                                    <f:facet name="output">-->
                        <h:outputText value="#{item3.itemAp == null ? 'S/N':item3.itemAp.codigo}" />
                        <!--                            </f:facet>
                                                    <f:facet name="input" >
                                                        <p:selectOneMenu  value="# {item3.itemAp}" converter="# {utilConverter}" panelStyle="width:400px"
                                                                          effect="fade" var="t" style="width:160px" filter="true" filterMatchMode="contains">
                                                            <f:selectItem itemLabel="Seleccione Item Presupuestario" itemValue="# {null}" noSelectionOption="true" />
                                                            <f:selectItems value="# {reformaT2View.listaItem}" var="th" itemLabel="# {th.codigo}" itemValue="# {th}" />
                        
                                                            <p:column style="width:10%" >
                                                                <f:facet name="header">
                                                                    <h:outputText value="codigo"/>
                                                                </f:facet>
                                                                <h:outputText value="# {t.codigo}" style="font-weight: bold;" />
                                                            </p:column>
                        
                                                            <p:column style="width: 80%;">
                                                                <f:facet name="header">
                                                                    <h:outputText value="Nombre"/>
                                                                </f:facet>
                                                                <h:outputText value="# {t.descripcion}" />
                        
                                                            </p:column>
                                                            <p:ajax event="change" listener="# {asignacionDistributivoReformaView.editarCeldas(item3)}" update="lista"   />
                                                        </p:selectOneMenu>
                        
                                                    </f:facet>
                                                </p:cellEditor>-->

                    </p:column>
                    <p:column headerText="Estructura" style="width: 10%;">

                        <!--                        <p:cellEditor disabled="# {item3.partidaAp==null?false:true}">
                                                    <f:facet name="output">-->
                        <h:outputText value="#{item3.estructuraAp == null ? 'S/N':item3.estructuraAp.codigo}" />
                        <!--                            </f:facet>
                                                    <f:facet name="input" >
                                                        <p:selectOneMenu  value="# {item3.estructuraAp}" converter="# {utilConverter}" panelStyle="width:400px"
                                                                          effect="fade" var="t" style="width:160px" filter="true" filterMatchMode="contains">
                                                            <f:selectItem itemLabel="Seleccione Estructura" itemValue="# {null}" noSelectionOption="true" />
                                                            <f:selectItems value="# {reformaT2View.listaEstructura}" var="the" itemLabel="# {the.codigo}" itemValue="# {the}" />
                        
                                                            <p:column style="width:10%" >
                                                                <f:facet name="header">
                                                                    <h:outputText value="codigo"/>
                                                                </f:facet>
                                                                <h:outputText value="# {t.codigo}" style="font-weight: bold;" />
                                                            </p:column>
                        
                                                            <p:column style="width: 80%;">
                                                                <f:facet name="header">
                                                                    <h:outputText value="Nombre"/>
                                                                </f:facet>
                                                                <h:outputText value="# {t.descripcion}" />
                        
                                                            </p:column>
                                                            <p:ajax event="change" listener="# {asignacionDistributivoReformaView.editarCeldas(item3)}"  update="lista"  />
                                                        </p:selectOneMenu>
                        
                                                    </f:facet>
                                                </p:cellEditor>-->

                    </p:column>
                    <p:column headerText="Fuente" style="width: 10%;">

                        <!--                        <p:cellEditor disabled="# {item3.partidaAp==null?false:true}" >
                                                    <f:facet name="output">-->
                        <h:outputText value="#{item3.fuenteAp == null ? 'S/N':item3.fuenteAp.tipoFuente.orden}" />
                        <!--                    </f:facet>
                                                    <f:facet name="input" >
                                                        <p:selectOneMenu filter="true" filterMatchMode="startsWith"  id="Fuente" value="#{item3.fuenteAp}" panelStyle="width:22%"
                                                                         style="width: 165px;" var="f"  converter="#{utilConverter}">
                                                            <f:selectItem itemLabel="Selecciones Fuente" itemValue="#{null}" noSelectionOption="true" />
                                                            <f:selectItems value="#{reformaT2View.listaFuente}" var="n" itemLabel="#{n.tipoFuente.orden}//#{n.tipoFuente.texto}//#{n.nombre}" itemValue="#{n}" />
                                                            <p:column style="width:10%" >
                                                                <f:facet name="header">
                                                                    <h:outputText value="Código"/>
                                                                </f:facet>
                                                                <h:outputText value="#{f.tipoFuente.orden}" style="font-weight: bold;" />
                                                            </p:column>
                        
                                                            <p:column style="width: 50%;">
                                                                <f:facet name="header">
                                                                    <h:outputText value="Fuente"/>
                                                                </f:facet>
                                                                <h:outputText value="#{f.tipoFuente.texto}" />
                                                            </p:column>
                        
                                                            <p:column style="width: 90%;">
                                                                <f:facet name="header">
                                                                    <h:outputText value="Tipo Fuente"/>
                                                                </f:facet>
                                                                <h:outputText value="#{f.nombre}" />
                                                            </p:column>
                                                            <p:ajax event="change" listener="#{asignacionDistributivoReformaView.editarCeldas(item3)}"   update="lista" />
                                                        </p:selectOneMenu>
                        
                                                    </f:facet>
                                                </p:cellEditor>-->

                    </p:column>
                    <p:column headerText="Partida" style="width: 10%; text-align: justify">
                        <h:outputText value="#{item3.partidaAp == null ? 'S/N':item3.partidaAp }" />
                    </p:column>
                    <p:column headerText="Traspaso Incremento">
                        <p:cellEditor>
                            <f:facet name="input">
                                <p:inputNumber id="valorsuplemento"
                                               value="#{item3.traspasoIncremento}" style="width:100%;">
                                    <p:ajax listener="#{reformaT2View.calcularDistributivoGeneral(item3, true)}" update="formDlgpartidasDistributivos,lista"   />
                                </p:inputNumber>
                            </f:facet>
                            <f:facet name="output"> 
                                <h:outputText value="#{item3.traspasoIncremento}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column  headerText="Traspaso Reducción">
                        <p:cellEditor>
                            <f:facet name="input">
                                <p:inputNumber id="valorReduccion"
                                               value="#{item3.traspasoReduccion}" style="width:100%;">
                                    <p:ajax event="change" listener="#{reformaT2View.calcularDistributivoGeneral(item3, false)}" update="formDlgpartidasDistributivos,lista"   />
                                </p:inputNumber>
                            </f:facet>
                            <f:facet name="output"> 
                                <h:outputText value="#{item3.traspasoReduccion}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column   headerText="Reforma Codificado">
                        <h:outputText value="#{item3.reformaCodificado}" style="float: right">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>
        
        <p:dialog id="DlgproformaRegistroPartidas" header="Formulario Partida Presupuestaria" widgetVar="DlgproformaRegistroPartidas" 
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false" position="center">
            <h:form id="formPresegresoPartidas" prependId="false">  
                <div class="ui-g">
                    <div class="ui-g-12">
                        <div class="card card-w-title">
                            <p:panelGrid  columns="2" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                    <p:outputLabel for="EstructuraProgramatica" value="Estructura Programatica:"/>
                                    <p:selectOneMenu filter="true" filterMatchMode="startsWith" id="EstructuraProgramatica" panelStyle="width:22%"
                                                     var="e" value="#{reformaT2View.proformaPresupuestoPlanificado.estructuraProgramatica}" converter="#{utilConverter}"  style="width: 165px;">
                                        <f:selectItem itemLabel="Seleccione Estructura Programática" itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{reformaT2View.listaPlanProgramaticoDirecta}" var="n" itemLabel="#{n.descripcion}" itemValue="#{n}" />
                                        <p:column style="width:10%" >
                                            <f:facet name="header">
                                                <h:outputText value="codigo"/>
                                            </f:facet>
                                            <h:outputText value="#{e.codigo}" style="font-weight: bold;" />
                                        </p:column>
                                        <p:column style="width: 80%;">
                                            <f:facet name="header">
                                                <h:outputText value="Nombre"/>
                                            </f:facet>
                                            <h:outputText value="#{e.descripcion}" />
                                        </p:column>
                                    </p:selectOneMenu>
                                </p:panelGrid>
                                <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid"  >
                                    <p:outputLabel for="advanced" value="Item Presupuestaria:"/>
                                    <p:selectOneMenu id="advanced" value="#{reformaT2View.proformaPresupuestoPlanificado.itemPresupuestario}" converter="#{utilConverter}" panelStyle="width:22%"
                                                     effect="fade" var="ta" style="width: 165px;" filter="true" filterMatchMode="startsWith">
                                        <f:selectItem itemLabel="Seleccione" itemValue="#{null}" />
                                        <f:selectItems value="#{reformaT2View.listaCatalogoPresupuestosDirecta}" var="item" itemLabel="#{item.descripcion}" itemValue="#{item}" />

                                        <p:column style="width:10%" >
                                            <f:facet name="header">
                                                <h:outputText value="codigo"/>
                                            </f:facet>
                                            <h:outputText value="#{ta.codigo}" style="font-weight: bold;"/>
                                        </p:column>

                                        <p:column style="width: 80%;">
                                            <f:facet name="header">
                                                <h:outputText value="Nombre"/>
                                            </f:facet>
                                            <h:outputText value="#{ta.descripcion}" />
                                        </p:column>
                                    </p:selectOneMenu>
                                </p:panelGrid>
                                <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid"  >
                                    <p:outputLabel for="Fuente" value="Fuente:"/>
                                    <p:selectOneMenu filter="true" filterMatchMode="startsWith"  id="Fuente" value="#{reformaT2View.proformaPresupuestoPlanificado.fuente}" panelStyle="width:22%"
                                                     style="width: 165px;" var="f"  converter="#{utilConverter}">
                                        <f:selectItem itemLabel="Selecciones Fuente" itemValue="#{null}" noSelectionOption="true" />
                                        <f:selectItems value="#{reformaT2View.listaFuenteDirecta}" var="n" itemLabel="#{n.tipoFuente.orden}//#{n.tipoFuente.texto}//#{n.nombre}" itemValue="#{n}" />
                                        <p:column style="width:10%" >
                                            <f:facet name="header">
                                                <h:outputText value="Código"/>
                                            </f:facet>
                                            <h:outputText value="#{f.tipoFuente.orden}" style="font-weight: bold;" />
                                        </p:column>

                                        <p:column style="width: 50%;">
                                            <f:facet name="header">
                                                <h:outputText value="Fuente"/>
                                            </f:facet>
                                            <h:outputText value="#{f.tipoFuente.texto}" />
                                        </p:column>

                                        <p:column style="width: 90%;">
                                            <f:facet name="header">
                                                <h:outputText value="Tipo Fuente"/>
                                            </f:facet>
                                            <h:outputText value="#{f.nombre}" />
                                        </p:column>
                                    </p:selectOneMenu>
                                </p:panelGrid>

                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" >
                                    <p:outputLabel for="@next" value="Valor Asignado:"/>
                                    <p:inputNumber  id="Monto" decimalPlaces="2" value="#{reformaT2View.proformaPresupuestoPlanificado.valor}"/>
                                </p:panelGrid>

                            </p:panelGrid>
                            <center>
                                <p:commandButton value="Guardar" update="formReformaPartidaDirecta"  actionListener="#{reformaT2View.savePdReforma()}"
                                                 icon="fa fa-save"
                                                 styleClass="Fs16" style="width: auto; margin-bottom: 15px;" />
                            </center>
                        </div>
                    </div>
                </div>
            </h:form>
        </p:dialog>
        
        <p:dialog id="DlgVistaReforma" width="85%"  header="Reforma Traspaso Tipo 2" 
                  widgetVar="DlgVistaReforma" position="center" height="580"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false">
            <h:form id="formDlgVistaReforma"  prependId="false">
                <div class="ui-g-12">
                    <h:panelGroup id="tabRegistroDeSolicitud">
                        <p:tabView id="tabladimnamica" prependId="false" >
                            <p:tab title="Plan Anual Políticas Públicas" titleStyle="border-right: 2px solid #eaeaea" rendered="#{reformaT2View.renderedPAPP}">
                                <h:panelGroup id="tabPAPP">  
                                    <p:dataTable  paginator="true"  paginatorPosition="bottom" style=" margin: 10px;" rows="15"
                                                  paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                  rowsPerPageTemplate="15,30,60,100" rowIndexVar="inedex" currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                                  emptyMessage="No existen registros con el criterio de búsqueda especificado"
                                                  id="tablaSolicitud" value="#{reformaT2View.listaProducto}" var="PAPP">

                                        <p:column style="width:16px">
                                            <p:rowToggler />
                                        </p:column>
                                        <p:column headerText="#" style="width:12px; font-weight: bold;" >
                                            <h:outputText value="#{inedex +1 }"/>
                                        </p:column>
                                        <p:column headerText="Producto" style="width: 200px;" filterBy="#{PAPP.descripcion}">
                                            <h:outputText value="#{PAPP.descripcion}"/>
                                        </p:column>
                                        <p:column headerText="Monto Producto" style="width: 100px;">
                                            <h:outputText value="#{PAPP.monto}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Unidad Responsable" style="width: 160px;">
                                            <h:outputText value="#{PAPP.actividadOperativa.unidadResponsable.nombre}" />
                                        </p:column>
                                        <p:column headerText="Partida Presupuestaria" style="width: 120px; text-align: center" filterBy="#{PAPP.codigoPresupuestario}">
                                            <h:outputText value="#{PAPP.codigoPresupuestario == null ? 'S/N':PAPP.codigoPresupuestario}" />
                                        </p:column>
                                        <p:column headerText="Reservas Aprobadas" style="width: 110px;">
                                            <h:outputText value="#{PAPP.reserva}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Saldo Disponible" style="width: 110px;">
                                            <h:outputText value="#{PAPP.saldoDisponible}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Traspaso Incremento" style="width: 110px;">
                                            <h:outputText value="#{PAPP.traspasoIncremento}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Traspaso Reducción" style="width: 110px;">
                                            <h:outputText value="#{PAPP.traspasoReduccion}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Monto Reformada" style="width: 110px;">
                                            <h:outputText value="#{PAPP.montoReformada}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>



                                        <p:rowExpansion>
                                            <center>
                                                <p:dataTable id="Subta" var="subt" value="#{PAPP}" style="width:97%">
                                                    <p:column headerText="Nombre del plan, programa, proyecto" style="width: 260px;" filterBy="#{subt.actividadOperativa.planProgramaProyecto.planAnual.planLocal.descripcion}">
                                                        <h:outputText value="#{subt.actividadOperativa.planProgramaProyecto.planAnual.planLocal.descripcion == null ? 'NO APLICA':subt.actividadOperativa.planProgramaProyecto.planAnual.planLocal.descripcion}" />
                                                    </p:column>
                                                    <p:column headerText="Nº de identificación" style="width: 100px;" >
                                                        <h:outputText value="#{subt.actividadOperativa.planProgramaProyecto.id}" />
                                                    </p:column>
                                                    <p:column headerText="Plan, programa y/o proyecto" style="width: 200px;"  filterBy="#{subt.actividadOperativa.planProgramaProyecto.nombreProgramaProyecto}" >
                                                        <h:outputText value="#{subt.actividadOperativa.planProgramaProyecto.nombreProgramaProyecto}" />
                                                    </p:column>
                                                    <p:column headerText="Actividad Operativa" style="width: 200px;"  filterBy="#{subt.actividadOperativa.nombreActividad}">
                                                        <h:outputText value="#{subt.actividadOperativa.nombreActividad}" />
                                                    </p:column>
                                                    <p:column headerText="Objetivo Operativa" style="width: 200px;"  filterBy="#{subt.actividadOperativa.objetivoOperativo}">
                                                        <h:outputText value="#{subt.actividadOperativa.objetivoOperativo}" />
                                                    </p:column>
                                                    <p:column headerText="Medición Meta" style="width: 100px;">
                                                        <h:outputText value="#{subt.actividadOperativa.medicionMeta}" />
                                                    </p:column>
                                                    <p:column headerText="Meta Cuatrimestre 1" style="width: 100px;">
                                                        <h:outputText value="#{subt.actividadOperativa.cuatrimestre1Meta}" />
                                                    </p:column>
                                                    <p:column headerText="Meta Cuatrimestre 2" style="width: 100px;">
                                                        <h:outputText value="#{subt.actividadOperativa.cuatrimestre2Meta}" />
                                                    </p:column>
                                                    <p:column headerText="Meta Cuatrimestre 3" style="width: 100px;">
                                                        <h:outputText value="#{subt.actividadOperativa.cuatrimestre3Meta}" />
                                                    </p:column>
                                                    <p:column headerText="Indicador Meta" style="width: 200px;"  filterBy="#{subt.actividadOperativa.indicadorMeta}">
                                                        <h:outputText value="#{subt.actividadOperativa.indicadorMeta}" />
                                                    </p:column>
                                                    <p:column headerText="Monto Actividad" style="width: 100px;">
                                                        <h:outputText value="#{subt.actividadOperativa.monto}">
                                                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Presupuesto Cuatrimestre 1" style="width: 100px;">
                                                        <h:outputText value="#{subt.actividadOperativa.cuatrimestre1Actividad}" >
                                                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Presupuesto Cuatrimestre 2" style="width: 100px;">
                                                        <h:outputText value="#{subt.actividadOperativa.cuatrimestre2Actividad}" >
                                                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Presupuesto Cuatrimestre 3" style="width: 100px;">
                                                        <h:outputText value="#{subt.actividadOperativa.cuatrimestre3Actividad}">
                                                            <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                                        </h:outputText>
                                                    </p:column>
                                                    <p:column headerText="Item Presupuestario" style="width: 200px;">
                                                        <h:outputText value="#{subt.itemPresupuestario == null ? 'Sin definir':subt.itemPresupuestario.codigo}" />
                                                    </p:column>
                                                    <p:column headerText="Estructura Programática" style="width: 200px;">
                                                        <h:outputText value="#{subt.estructuraProgramatica == null ? 'Sin definir':subt.estructuraProgramatica.codigo}" />
                                                    </p:column>
                                                    <p:column headerText="Fuente" style="width: 200px;" filterBy="#{item.fuente.id}">
                                                        <h:outputText value="#{subt.fuente == null ? 'Sin definir':subt.fuente.nombre}"/>
                                                    </p:column>
                                                    <p:column headerText="Tipo Fuente" style="width: 200px;">
                                                        <h:outputText value="#{subt.fuente == null ? 0:subt.fuente.tipoFuente.orden} - #{subt.fuente == null ? 'Sin Fuente':subt.fuente.tipoFuente.texto}" style="text-align: left"/>
                                                    </p:column>
                                                    <p:column headerText="Partida Presupuestaria" style="width: 200px;">
                                                        <h:outputText value="#{subt.codigoPresupuestario == null ? 'S/Partida':subt.codigoPresupuestario}" id="ini"/>
                                                    </p:column>
                                                    <p:column headerText="Período" style="width: 200px;">
                                                        <h:outputText value="#{subt.periodo}" />
                                                    </p:column>
                                                </p:dataTable>
                                            </center>
                                        </p:rowExpansion>

                                    </p:dataTable>

                                    <br></br>
                                    <div align="right" style="margin-right: 10px">
                                        <p:panelGrid columns="2" style="text-align: right; font-size: 13px; font-weight: bold;" >
                                            <f:facet name="header">
                                                Información Adicional
                                            </f:facet>

                                            <h:outputText value="Total Traspaso Incremento" />
                                            <h:outputText value="#{reformaT2View.totalTraspasoIncremento}" >
                                                <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>

                                            <h:outputText value="Total Traspaso Reducción" />
                                            <h:outputText value="#{reformaT2View.totalTraspasoReduccion}" >
                                                <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>

                                            <h:outputText value="Monto Total Reformado" />
                                            <h:outputText value="#{reformaT2View.totalMontoReformado}" >
                                                <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>

                                        </p:panelGrid>
                                    </div>
                                    <br></br>
                                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                    </p:confirmDialog>
                                </h:panelGroup>
                            </p:tab>

                            <p:tab title="Plan Distributivo General" titleStyle="border-right: 2px solid #eaeaea" rendered="#{reformaT2View.renderedDistributivo}"> 
                                <h:panelGroup id="tabPD">
                                    <p:dataTable paginator="true"  paginatorPosition="bottom" style="margin: 10px"
                                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                 rowsPerPageTemplate="10,15,20,25,50,100" rowIndexVar="index" 
                                                 emptyMessage="No existen registros con el criterio de búsqueda especificado" 
                                                 id="tablaSolicitud2" value="#{reformaT2View.listaDistributivo}" var="item">
                                        <p:column headerText="#" style="font-weight: bold; width: 3%; font-size: 12px; text-align: center" >
                                            <h:outputText value="#{index +1 }"/>
                                        </p:column>
                                        <p:column headerText="CÉDULA SERVIDOR" style="width: 80px; font-size: 13px; text-align: center">
                                            <h:outputText value="#{item.servidorPublico.persona.identificacion}"/>
                                        </p:column>
                                        <p:column headerText="NOMBRE SERVIDOR" style="width: 80px; font-weight: bold; font-size: 13px">
                                            <h:outputText value="#{item.servidorPublico.persona.nombreCompleto == null?'VACANTE':item.servidorPublico.persona.nombreCompleto.toUpperCase()}"/>
                                        </p:column>
                                        <p:column headerText="CÓDIGO " style="width: 30px;" >                                      
                                            <h:outputText value="#{reformaT2View.loadCodigo(item.id)}"/>
                                        </p:column>
                                        <p:column headerText="CARGO" style="width: 90px; font-size: 13px" >
                                            <h:outputText value="#{item.cargo.nombreCargo}"/>
                                        </p:column>
                                        <p:column headerText="VIGENCIA DESDE" style="width: 70px;  font-size: 13px; text-align: center">
                                            <h:outputText value="#{item.vigenciaDesde}" >
                                                <f:convertDateTime pattern="dd-MM-yyyy" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="VIGENCIA HASTA" style="width: 70px;  font-size: 13px; text-align: center">
                                            <h:outputText value="#{item.vigenciaHasta == null?'NO HAY FECHA CADUCIDAD':item.vigenciaHasta}" >
                                                <f:convertDateTime pattern="dd-MM-yyyy" />
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="UNIDAD" style="width: 90px;  font-size: 13px" >
                                            <h:outputText value="#{item.unidadAdministrativa.nombre}"/>
                                        </p:column>
                                        <p:column headerText="SUPERVISA" style="width: 90px;  font-size: 13px" >
                                            <h:outputText value="#{item.unidadAdministrativa.padre.nombre}"/>
                                        </p:column>
                                        <p:column headerText="TIPO DE UNIDAD" style="width: 90px; font-size: 13px" >
                                            <h:outputText value="#{item.unidadAdministrativa.tipoUnidad.descripcion}"/>
                                        </p:column>


                                        <p:column headerText="Acciones" style="width: 60px; text-align: center">
                                            <p:commandLink  title="ver" process="@this" actionListener="#{reformaT2View.listaVisualizacion(item, true)}">
                                                <i class="fa fa-search" style="font-size: 1.5em; color: #0D47A1;"></i>
                                            </p:commandLink>

                                        </p:column>

                                    </p:dataTable>
                                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                    </p:confirmDialog>
                                </h:panelGroup>
                            </p:tab>

                            <p:tab title="Plan Distributivo Anexo" titleStyle="border-right: 2px solid #eaeaea" rendered="#{reformaT2View.renderedDistributivoAnexo}"> 
                                <h:panelGroup id="tabPDA">
                                    <p:dataTable paginator="true"  paginatorPosition="bottom" style="margin: 10px"
                                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                 rowsPerPageTemplate="10,15,20,25,50" rowIndexVar="index" 
                                                 emptyMessage="No existen datos con el criterio de búsqueda especificado" 
                                                 id="tablaSolicitudPDA" value="#{reformaT2View.listaPartidaDistributivoAnexo}" var="itempda">

                                        <p:column headerText="#" style="width:10px; font-weight: bold;" >
                                            <h:outputText value="#{index +1 }"/>
                                        </p:column>

                                        <p:column headerText="Tipo" style="width: 150px;" filterBy="#{itempda.distributivoAnexo.valorParametrizado.tipo}">
                                            <h:outputText value="#{itempda.distributivoAnexo.valorParametrizado.tipo}"/>
                                        </p:column>
                                        <p:column headerText="Descripción" style="width: 20%;" filterBy="#{itempda.distributivoAnexo.nombre}" filterMatchMode="contains">
                                            <h:outputText value="#{itempda.distributivoAnexo.nombre}" />
                                        </p:column> 
                                        <p:column headerText="Monto" style="width: 100px;">
                                            <h:outputText value="#{itempda.monto}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>

                                        <p:column headerText="Partida Presupuestaria" style="width: 105px; text-align: center" >
                                            <h:outputText value="#{itempda.partidaAp == null ? 'S/N':itempda.partidaAp}" />
                                        </p:column>
                                        <p:column headerText="Reserva" style="width: 100px;">
                                            <h:outputText value="#{itempda.reserva}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Saldo Disponible" style="width: 100px;">
                                            <h:outputText value="#{itempda.monto-itempda.reserva}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Traspaso Incremento" style="width: 100px;">
                                            <h:outputText value="#{itempda.traspasoIncremento}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Traspaso Reducción" style="width: 100px;">
                                            <h:outputText value="#{itempda.traspasoReduccion}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Monto Reformada" style="width: 100px;">
                                            <h:outputText value="#{itempda.reformaCodificado}" style="float: right">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>

                                    </p:dataTable>
                                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                    </p:confirmDialog>
                                </h:panelGroup>
                            </p:tab>

                            <p:tab title="Partida Directa" titleStyle="border-right: 2px solid #eaeaea" rendered="#{reformaT2View.renderedPartidaDirecta}"> 
                                <h:panelGroup id="tabPDI">
                                    <p:dataTable paginator="true"  paginatorPosition="bottom" style="margin: 10px"
                                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                 rowsPerPageTemplate="10,15,20,25" rowIndexVar="index" 
                                                 emptyMessage="No existen datos con el criterio de búsqueda especificado" 
                                                 id="tablaSolicitudPDI" value="#{reformaT2View.listaProformaPresupuestoPlanificado}" var="item">

                                        <p:column headerText="No." style="width: 20px;">
                                            <h:outputText value="#{index+1}" />
                                        </p:column>
                                        <p:column headerText="Estructura Programática"  style="width: 20%;">
                                            <h:outputText value="#{item.estructuraProgramatica.descripcion}" />
                                        </p:column>
                                        <p:column  headerText=" Partida Presupuestaria" style="width: 20%;text-align: center">
                                            <p:outputLabel value="#{item.partidaPresupuestaria}" />
                                        </p:column>
                                        <p:column  headerText="Item Presupuestario"  style="width: 30%;">
                                            <h:outputText value="#{item.itemPresupuestario.descripcion}" />
                                        </p:column>
                                        <p:column  headerText="Tipo" style="width: 10%;text-align: center">
                                            <p:outputLabel value="#{item.codigo}" />
                                        </p:column>
                                        <p:column  headerText="Período" style="width: 10%;text-align: center" >
                                            <p:outputLabel value="#{item.periodo}"/>
                                        </p:column>
                                        <p:column  headerText="Valor asignado" style="width: 20%;">
                                            <p:outputLabel value="#{item.valor}" style="float: right" >
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </p:outputLabel>
                                        </p:column>
                                        <p:column headerText="Traspaso Incremento" style="width: 110px;">
                                            <h:outputText value="#{item.traspasoIncremento}">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Traspaso Reducción" style="width: 110px;">
                                            <h:outputText value="#{item.traspasoReduccion}">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>
                                        <p:column headerText="Monto Reformada" style="width: 110px;">
                                            <h:outputText value="#{item.reformaCodificado}">
                                                <f:convertNumber type="currency" currencySymbol="$ " currencyCode="USD" locale="es_EC"/>
                                            </h:outputText>
                                        </p:column>

                                    </p:dataTable>
                                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                    </p:confirmDialog>
                                </h:panelGroup>
                            </p:tab>

                        </p:tabView>
                    </h:panelGroup>
                </div>


            </h:form>
        </p:dialog>
        
        <p:dialog id="dlgObservaciones" widgetVar="dlgObservaciones" width="30%" position="center" draggable="false" header="Observación"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false" >
            <div class="ui-g-12" >
                <h:form id="frmDlgObser">
                    <p:outputPanel id="panelObsevacion" style="width: 100%;" >
                        <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" >
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:inputTextarea value="#{reformaT2View.observaciones}" onkeyup="toUpperCase(this)"
                                                 rows="7" style="border: 1px solid;text-transform: uppercase;width: 100%;border-radius: 5px 5px 5px 5px;"/>
                            </h:panelGroup> 
                        </p:panelGrid>
                        <center>
                            <p:commandButton icon="fa fa-thumbs-o-up" value="Enviar"  title="Culminar Tarea" process="frmDlgObser" update="frmDlgObser"
                                             actionListener="#{reformaT2View.completarTarea(1)}" 
                                             style="width: 150px;margin: 10px"  />
<!--                            <p:commandButton icon="fa fa-thumbs-o-down" value="Observar" title="Culminar Tarea" process="frmDlgObser" update="frmDlgObser"
                                             actionListener="# {reformaT2View.completarTarea(0)}"
                                             style="width: 150px;margin: 10px"  />-->
                            <p:commandButton icon="fa fa-thumbs-o-remove" value="Cerrar" 
                                             onclick="PF('dlgObservaciones').hide()"
                                             style="background: red; width: 150px;margin: 10px" />
                        </center> 
                    </p:outputPanel>
                </h:form>  
            </div>
        </p:dialog>
        
        <p:dialog width="80%" height="500" id="DlgActividadReforma"  header="Actividad Operativa" widgetVar="DlgActividadReforma"
                  modal="true" showEffect="fold" hideEffect="fold" resizable="false">
            <h:form id="formActividadReforma" prependId="false">
                <p:fieldset title="DESCRIPCIÓN" legend="DESCRIPCIÓN" toggleable="true">
                    <p:panelGrid columns="2" style="width: 100%" layout="grid" styleClass="ui-panelgrid-blank form-group">
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <h:outputText value="PLAN" style="font-size: 20px; font-weight: bold;"/>
                            <p:inputText style="width: 100%"
                                         value="#{reformaT2View.programaProyecto.programa.panificacion.descripcion eq null? 'NO APLICA': 
                                                  reformaT2View.programaProyecto.programa.panificacion.descripcion.toUpperCase()}" readonly="true"/>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <h:outputText value="PROGRAMA" style="font-size: 20px; font-weight: bold;"/>
                            <p:inputText style="width: 100%"
                                         value="#{reformaT2View.programaProyecto.programa.descripcion eq null?'NO APLICA':
                                                  reformaT2View.programaProyecto.programa.descripcion.toUpperCase()}" readonly="true"/>
                        </p:panelGrid>                  
                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                        <h:panelGroup>
                            <h:outputText value="PROYECTO " style="font-size: 20px; font-weight: bold;"/>
                            <p:commandLink title="Buscar Proyecto" oncomplete="PF('dlogoProyecto').show()" process="@this" 
                                           actionListener="#{reformaT2View.loadingProgramas()}" update="fomProyecto,datatable2">
                                <i class="fa fa-search" style="font-size: 1.5em; margin-right: 8px;"></i>
                            </p:commandLink>
                        </h:panelGroup>
                        <p:inputTextarea value="#{reformaT2View.programaProyecto.nombreProgramaProyecto.toUpperCase()}" readonly="true" style="width: 100%" rows="5" cols="12"/>
                    </p:panelGrid>
                </p:fieldset>
                <p:fieldset title="DATOS ADICIONALES" legend="DATOS ADICIONALES" toggleable="true">
                    <p:panelGrid columns="4" style="width: 100%" layout="grid" styleClass="ui-panelgrid-blank form-group">
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <h:panelGroup>
                                <h:outputText value="PAI:"/>
                                <p:selectOneRadio value="#{reformaT2View.actividad.pai}" unselectable="true">
                                    <f:selectItem itemLabel="SI" itemValue="true"/>
                                    <f:selectItem itemLabel="NO" itemValue="false"/>
                                </p:selectOneRadio>
                            </h:panelGroup>
                        </p:panelGrid>
                        <p:panelGrid columns="2" styleClass="ui-panelgrid-blank" style="width: 100%;" id="labelaniopresupuestopar">
                            <h:panelGroup>
                                <h:outputText value="PRESUPUESTO PARTICIPATIVO:" class="FontBold"/>
                                <p:selectOneRadio value="#{reformaT2View.actividad.presupuestoParticipacion}" unselectable="true">
                                    <f:selectItem itemLabel="SI" itemValue="true"/>
                                    <f:selectItem itemLabel="NO" itemValue="false"/>
                                    <p:ajax update="labelaniopresupuestopar"/>
                                </p:selectOneRadio>
                            </h:panelGroup>
                            <h:panelGroup rendered="#{reformaT2View.actividad.presupuestoParticipacion}">
                                <h:outputText value="PERIODO: " style="font-size: 15px; font-weight: bold;"/>
                                <p:inputText style="font-size: 14px; font-weight: bold;" value="#{reformaT2View.actividad.presParticipacionAnio}"
                                             required="true" requiredMessage="REQUERIDO" id="presPartiAnio"/>
                                <p:message for="presPartiAnio"/>
                            </h:panelGroup>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <h:outputText value="GRUPO ATENCION:" class="FontBold"/>
                            <p:selectOneRadio value="#{reformaT2View.actividad.grupoAtencion}" unselectable="true">
                                <f:selectItem itemLabel="SI" itemValue="true"/>
                                <f:selectItem itemLabel="NO" itemValue="false"/>
                            </p:selectOneRadio>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <h:outputText value="COMPONENTE:" class="FontBold"/>
                            <p:selectOneMenu value="#{reformaT2View.actividad.tipoComponete}" converter="#{utilConverter}" style="width: 100%;">
                                <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                <f:selectItems value="#{reformaT2View.listacomponentes}" var="c" itemLabel="#{c.texto}" itemValue="#{c}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                    </p:panelGrid>
                    <p:fieldset class="ui-g-1">
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank">
                            <h:outputText value="NUEVO/ARRASTRE:" class="FontBold"/> 
                            <p:selectBooleanButton value="#{reformaT2View.actividad.arrastre}" onLabel="NUEVO" offLabel="ARRASTRE" style="width:auto;"/>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset class="ui-g-10">
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <p:outputLabel value="NOMBRE DE LA ACTIVIDAD:" class="FontBold"/>
                            <p:inputTextarea value="#{reformaT2View.actividad.nombreActividad}"  style="width: 95%" rows="2" cols="7" scrollHeight="5"/>
                        </p:panelGrid>
                    </p:fieldset>
                </p:fieldset>
                <p:fieldset title="PROGRAMACIÓN META" legend="PROGRAMACIÓN META" toggleable="true" tabindex="-1">
                    <div class="ui-g-5" style="border: 1px solid; border-color: #9D9999;height: 250px;">
                        <p:panelGrid columns="2" style="width: 100%" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                <p:outputLabel value="OBJETIVO OPERATIVO:" class="FontBold"/>
                                <p:inputText value="#{reformaT2View.actividad.objetivoOperativo}" style="width: 100%"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                <p:outputLabel value="DESCRIPCION META:" class="FontBold"/>
                                <p:inputText value="#{reformaT2View.actividad.descripcionMeta}" style="width: 100%"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                <p:outputLabel value="MEDICION PORCENTAJE:" class="FontBold"/>
                                <p:selectBooleanButton value="#{reformaT2View.actividad.medicionPorcentaje}" onIcon="fa fa-check" offIcon="fa fa-close"
                                                       onLabel="SI" offLabel="NO" style="width:6rem">
                                    <p:ajax update="medMeta1" listener="#{reformaT2View.cambiarMedicionPorcentual()}"/>
                                </p:selectBooleanButton>
                            </p:panelGrid>
                            <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                <p:outputLabel value="MEDICIÓN META:" class="FontBold"/>
                                <p:inputNumber id="medMeta1" readonly="true"
                                               value="#{reformaT2View.actividad.medicionMeta}" decimalPlaces="2"/>
                            </p:panelGrid>
                        </p:panelGrid>
                        <p:panelGrid columns="2" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <h:panelGroup>
                                <p:outputLabel value="DISTRIBUCCIÓN META:" class="FontBold"/>
                                <p:selectOneMenu value="#{reformaT2View.actividad.distribucionMeta}" converter="#{utilConverter}" style="width: 100%;">
                                    <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                    <f:selectItems value="#{reformaT2View.distribuccionMetaList}" var="c" itemLabel="#{c.texto}" itemValue="#{c}"/>
                                    <p:ajax listener="#{reformaT2View.renderizarDistribuccionMeta()}" update="groupDistrubtionMeta"/>
                                </p:selectOneMenu>
                            </h:panelGroup>
                            <h:panelGroup>
                                <p:outputLabel value="INDICADOR META" class="FontBold"/>
                                <p:inputText value="#{reformaT2View.actividad.indicadorMeta}" placeholder="EJECUTADO/PLANIFICADO" style="width: 100%;"/>
                            </h:panelGroup>
                        </p:panelGrid>
                    </div>
                    <div class="ui-g-7" style="border: 1px solid; border-color: #9D9999;height: 250px;">
                        <h:panelGroup id="groupDistrubtionMeta">
                            <p:panelGrid columns="2" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.semestreMetal}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEMESTRE UNO:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.semestreUnoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEMESTRE DOS:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.semestrDosMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid columns="4" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.trimestreMeta}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE UNO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreUnoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE DOS:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreDosMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE TRES:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreTresMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE CUATRO:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreCuatroMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid columns="3" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.cuatrimestreMeta}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE UNO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreUnoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE DOS:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreDosMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE TRES:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreTresMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid  columns="4" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.mensualMeta}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="ENERO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.eneroMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="FEBRERO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.febreroMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="MARZO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.marzoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="ABRIL" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.abrilMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="MAYO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.mayoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="JUNIO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.junioMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="JULIO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.julioMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="AGOSTO" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.agostoMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEPTIEMBRE" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.septiembreMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="OCTUBRE" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.octubreMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="NOVIEMBRE" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.noviembreMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="DICIEMBRE" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.diciembreMeta}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                        </h:panelGroup>
                    </div>
                </p:fieldset>
                <p:fieldset title="PROGRAMACIÓN FINANCIERA" legend="PROGRAMACIÓN FINANCIERA" toggleable="true">
                    <div class="ui-g-5" style="border: 1px solid; border-color: #9D9999;height: 250px;">
                        <div class="ui-g-6">
                            <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%;">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="PRESUPUESTO PROPIO:" class="FontBold"/>
                                    <p:inputNumber id="presu_inicial" value="#{reformaT2View.actividad.presupuestoPropio}" style="background: orange; " decimalPlaces="2">
                                        <p:ajax event="keyup" listener="#{reformaT2View.sumaMontos()}" update="montoActividad" process="presu_inicial,presu_fina"/>
                                    </p:inputNumber>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="PRESUPUESTO FINANCIAMIENTO:" class="FontBold"/>
                                    <p:inputNumber id="presu_fina" value="#{reformaT2View.actividad.presupuestoFinanciamiento}" style="background: orange;" decimalPlaces="2" >
                                        <p:ajax event="keyup"  listener="#{reformaT2View.sumaMontos()}" update="montoActividad" process="presu_inicial,presu_fina"/>
                                    </p:inputNumber>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="MONTO:" class="FontBold"/>
                                    <p:inputNumber id="montoActividad" value="#{reformaT2View.actividad.monto}" readonly="true" style="background: yellow; " decimalPlaces="2" />
                                </p:panelGrid>                          
                            </p:panelGrid>
                        </div>
                        <div class="ui-g-6">
                            <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                <p:outputLabel value="DISTRIBUCCION:" class="FontBold"/>
                                <p:selectOneMenu value="#{reformaT2View.actividad.tipoDistribuccion}" converter="#{utilConverter}" style="width: 100%;">
                                    <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                    <f:selectItems value="#{reformaT2View.distribuccion}" var="c" itemLabel="#{c.texto}" itemValue="#{c}"/>
                                    <p:ajax listener="#{reformaT2View.renderizarDistribuccion()}" update="groupDistrubtion"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                        </div>
                    </div>
                    <div class="ui-g-7" style="border: 1px solid; border-color: #9D9999;height: 250px;">
                        <h:panelGroup id="groupDistrubtion">
                            <p:panelGrid id="semestral" columns="2" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.semestre}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEMESTRE UNO REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.semestreUno}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEMESTRE DOS REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.semestrDos}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid id="trimestral" columns="4" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.trimestre}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE UNO REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreUno}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE DOS REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreDos}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE TRES REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreTres}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="TRIMESTRE CUATRO REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.trimestreCuatro}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid id="cuatrimestre" columns="3" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.cuatrimestre}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE UNO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreUno}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE DOS REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreDos}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="CUATRIMESTRE TRES REFORMA:" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.cuatrimestreTres}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:panelGrid id="mensual" columns="4" style="width: 100%"   layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{reformaT2View.mensual}">
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="ENERO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.eneroReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="FEBRERO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.febreroReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="MARZO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.marzoReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="ABRIL REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.abrilReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="MAYO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.mayoReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="JUNIO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.junioReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="JULIO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.julioReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="AGOSTO REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.agostoReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="SEPTIEMBRE REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.septiembreReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="OCTUBRE REFORMA" class="FontBold"/>
                                    <p:inputNumber  value="#{reformaT2View.actividad.octubreReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="NOVIEMBRE REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.noviembreReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                                    <p:outputLabel value="DICIEMBRE REFORMA" class="FontBold"/>
                                    <p:inputNumber value="#{reformaT2View.actividad.diciembreReforma}" decimalPlaces="2"/>
                                </p:panelGrid>
                            </p:panelGrid>
                        </h:panelGroup>
                    </div>
                </p:fieldset>
                <p:fieldset legend="RESPONSABILIDAD" toggleable="true">
                    <div class="ui-g-4">
                        <p:panelGrid columns="1" styleClass="ui-panelgrid-blank" style="width: 100%">
                            <p:outputLabel value="UNIDAD RESPONSABLE:" class="FontBold"/>
                            <p:selectOneMenu  disabled="true"  value="#{reformaT2View.actividad.unidadResponsable}" converter="#{utilConverter}" required="true">
                                <f:selectItem  itemLabel="Seleccione" itemValue="#{null}"/>
                                <f:selectItems value="#{reformaT2View.unidades}" var="item" itemLabel="#{item.nombre}" itemValue="#{item}" />
                            </p:selectOneMenu>
                        </p:panelGrid>
                    </div>
                </p:fieldset>
                <br/>
                <center>
                    <p:commandButton value="Grabar"  actionListener="#{reformaT2View.saveActividadOperativaReforma()}" process="@form"
                                     update="formActividad,actividadesOperativa,listaactividad" icon="fa fa-save" style="width: 150px;"/>
                    <p:spacer width="10"/>
                    <p:commandButton value="Cancelar" oncomplete="PF('DlgActividad').hide()" update="formActividad,actividadesOperativa"  icon="fa fa-close" style="width: 150px; background: red;"/>
                </center>
            </h:form>
        </p:dialog>
        
        <p:dialog width="60%" height="500" id="dlogoProyecto"  header="Proyectos" widgetVar="dlogoProyecto"
                  modal="true" showEffect="fold" hideEffect="fold" resizable="false">
            <h:form id="fomProyecto" prependId="false">
                <p:dataTable expandableRowGroups="true" id="datatable2" widgetVar="datatable2" var="a" value="#{reformaT2View.planAnualProgramaLazy}"
                             rows="20"  style="width: auto;" paginator="true" paginatorPosition="bottom"  
                             paginatorTemplate="{CurrentPageReport}  {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"                                  
                             rowsPerPageTemplate="20,25,35,50" lazy="true" currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                             emptyMessage="No existen datos con el criterio de busqueda especificado">  
                    <p:column  headerText="PLAN" style="width: 10%;" groupRow="true" filterBy="#{a.programa.panificacion.codigo}" filterMatchMode="contains">
                        <h:outputText style="font-style: bold" value="#{a.programa.panificacion ne null ? a.programa.panificacion.codigo:'NO APLICA'}" />
                    </p:column>
                    <p:column  headerText="PROGRAMA" style="width: 10%;" groupRow="true" filterBy="#{a.programa.codigo}" filterMatchMode="contains">
                        <h:outputText style="font-style: bold" value="#{a.programa ne null?a.programa.codigo:'NO APLICA'}" />
                    </p:column>
                    <p:column headerText="PROYECTO" style="width: 10%;" filterBy="#{a.nombreProgramaProyecto}" filterMatchMode="contains">
                        <h:outputText value="#{a.nombreProgramaProyecto  eq null ?'NO APLICA':a.nombreProgramaProyecto.toUpperCase()}" />
                    </p:column>
                    <p:column headerText="******" style="text-align: center; width: 3%">
                        <p:commandLink  title="Seleccionar"  
                                        process="@this" actionListener="#{reformaT2View.seleccionProyecto(a)}"
                                        oncomplete="PF('dlogoProyecto').hide()" 
                                        update="formActividadReforma,fomProyecto,formActividad" >
                            <i class="fa fa-check" style="font-size: 1.5em; margin-right: 8px; "></i>                          
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </h:form>                   
        </p:dialog>
        
        <p:dialog width="60%"  id="dlgoDocumento"  header="Documentos" widgetVar="dlgoDocumento"
                  modal="true" showEffect="fold" hideEffect="fold" resizable="false">
            <h:form id="formDocumento" prependId="false">
                <!--<u:documents entiti="#{reformaT2View.reformaTraspaso}"/>-->
                <u:documents id="listDocumentos" entiti="#{reformaT2View.tramite}" />
                <!--showDelete="true"-->
            </h:form>                   
        </p:dialog>
        
    </ui:define>

</ui:composition>
