<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:sigef="http://xmlns.jcp.org/jsf/composite/sigef/components"
                template="/WEB-INF/template/template.xhtml">
    <f:view encoding="UTF-8"></f:view>
    <ui:define name="title">Cuenta Contable</ui:define>
    <ui:param name="tittle" value="CUENTA CONTABLE"/>
    <ui:define name="content">
        <div class="ui-g ui-fluid">
            <div class="ui-g-12" >
                <h:form id="formMain" prependId="false">
                    <div class="ui-g-12" >
                        <div class="ui-g-9" >
                            <p:fieldset legend="BUSCAR" style="font-weight: bold" id="formBusqueda">
                                <p:panelGrid columns="4" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel value="Periodo:" escape="false"/>
                                        <p:selectOneMenu  value="#{cuentaContableView.opcionBusqueda.anio}" style="width: 100%">
                                            <f:selectItems value="#{cuentaContableView.periodos}" var="p" itemLabel="#{p.anio}" itemValue="#{p.anio}"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="buscar-input-titulo" value="Título:"/>
                                        <p:inputText id="buscar-input-titulo" class="panelInput" 
                                                     maxlength="1" value="#{cuentaContableView.opcionBusqueda.titulo}" onkeypress="focusNextOnEnter(event, 'buscar-input-grupo')">
                                            <p:keyFilter regEx="/[\d]/"/>
                                        </p:inputText>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="buscar-input-grupo" value="Grupo:" />
                                        <p:inputText id="buscar-input-grupo" class="panelInput" 
                                                     maxlength="1" value="#{cuentaContableView.opcionBusqueda.grupo}" onkeypress="focusNextOnEnter(event, 'buscar-input-subgrupo')">
                                            <p:keyFilter regEx="/[\d]/"/>
                                        </p:inputText>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="buscar-input-subgrupo" value="SubGrupo:" />
                                        <p:inputText id="buscar-input-subgrupo" class="panelInput" 
                                                     maxlength="1" value="#{cuentaContableView.opcionBusqueda.subGrupo}" onkeypress="focusNextOnEnter(event, 'buscar-input-nivel1')">
                                            <p:keyFilter regEx="/[\d]/"/>
                                        </p:inputText>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="buscar-input-nivel1" value="Cta. Nivel 1:" />
                                        <p:inputText id="buscar-input-nivel1" class="panelInput" 
                                                     maxlength="2" value="#{cuentaContableView.opcionBusqueda.nivel1}" onkeypress="focusNextOnEnter(event, 'buscar-input-nivel2')">
                                            <p:keyFilter regEx="/[\d]/"/>
                                        </p:inputText>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="buscar-input-nivel2" value="Cta. Nivel 2:" />
                                        <p:inputText id="buscar-input-nivel2" class="panelInput" 
                                                     maxlength="2" value="#{cuentaContableView.opcionBusqueda.nivel2}" onkeypress="focusNextOnEnter(event, 'buscar-input-nivel3')">
                                            <p:keyFilter regEx="/[\d]/"/>
                                        </p:inputText>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="buscar-input-nivel3" value="Cta. Nivel 3:" />
                                        <p:inputText id="buscar-input-nivel3" class="panelInput" 
                                                     maxlength="2" value="#{cuentaContableView.opcionBusqueda.nivel3}" onkeypress="focusNextOnEnter(event, 'buscar-input-nivel4')">
                                            <p:keyFilter regEx="/[\d]/"/>
                                        </p:inputText>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="buscar-input-nivel4" value="Cta. Nivel 4:" />
                                        <p:inputText id="buscar-input-nivel4" class="panelInput" 
                                                     maxlength="2" value="#{cuentaContableView.opcionBusqueda.nivel4}" onkeypress="focusNextOnEnter(event, 'buscar-btn')">
                                            <p:keyFilter regEx="/[\d]/"/>
                                        </p:inputText>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:commandButton value="Buscar" id="buscar-btn" update="cuentas"
                                                         icon="ui-icon-search" actionListener="#{cuentaContableView.buscar()}"
                                                         styleClass="Fs16"/>
                                    </h:panelGroup>
                                </p:panelGrid>
                            </p:fieldset>
                        </div>
                        <div class="ui-g-3" >
                            <p:fieldset legend="ACCIONES" style="font-weight: bold">
                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:commandButton value="Adicionar Título"
                                                         icon="ui-icon-plus" actionListener="#{cuentaContableView.formAdd()}"
                                                         styleClass="Fs16" style="width: 100%;"/>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:commandButton value="Imprimir PDF"
                                                         icon="fa fa-file-pdf-o"
                                                         process="@this"
                                                         actionListener="#{cuentaContableView.abrirDialogImprimir(false)}"
                                                         styleClass="Fs16" style="width: 100%;">
                                        </p:commandButton>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:commandButton value="Exportar Excel"
                                                         icon="fa fa-file-excel-o"
                                                         process="@this"
                                                         actionListener="#{cuentaContableView.abrirDialogImprimir(true)}"
                                                         styleClass="Fs16" style="width: 100%;">
                                        </p:commandButton>
                                    </h:panelGroup>
                                </p:panelGrid>
                            </p:fieldset>
                        </div>
                    </div>
                    <div class="ui-g-12" >
                        <div class="ui-g-12" >
                            <h:panelGroup id="dataTable" layout="block">
                                <p:dataTable id="cuentas" widgetVar="cuentas" var="item" value="#{cuentaContableView.lazy}" paginator="true" rows="50" style="width: 100%;" paginatorPosition="bottom"
                                             currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}" filterEvent="enter" rowIndexVar="index"
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="50,100,150" lazy="true" selection="#{cuentaContableView.cuentaSeleccionada}" selectionMode="single" rowKey="#{item.id}"
                                             emptyMessage="No existen cuentas con el criterio de búsqueda especificado" >
                                    <f:facet name="header">
                                        CUENTAS CONTABLES DEL PERIODO - #{cuentaContableView.opcionBusqueda.anio}
                                    </f:facet>
                                    <p:column headerText="No." style="width: 3%;text-align: center">
                                        #{index+1}
                                    </p:column>
                                    <p:column headerText="Código" style="width: 10%; font-weight: bold;" filterBy="#{item.codigo}">
                                        <h:outputText value="#{item.codigo}" style="#{cuentaContableView.styleNegrilla(item)}"/>
                                    </p:column>
                                    <p:column headerText="Nombre" filterBy="#{item.nombre}">
                                        <h:outputText value="#{item.nombre}" style="#{cuentaContableView.styleNegrilla(item)}"/>
                                    </p:column>
                                    <p:column filterBy="#{item.nivel.id}" headerText="Nivel"  style="width: 6%; text-align: center;">
                                        <f:facet name="filter">
                                            <p:selectOneMenu id="filtro" onchange="PF('cuentas').filter()" styleClass="custom-filter">
                                                <f:selectItem itemLabel="Todos" itemValue="#{null}" noSelectionOption="true" />
                                                <f:selectItems value="#{cuentaContableView.niveles}" var="n" itemLabel="#{n.orden}" itemValue="#{n.id}"/>
                                            </p:selectOneMenu>
                                        </f:facet>
                                        <h:outputText value="#{item.nivel.orden}" />
                                    </p:column>
                                    <p:column filterBy="#{item.clasificacion.id}" headerText="Clasificación"  style="width: 15%;">
                                        <f:facet name="filter">
                                            <p:selectOneMenu onchange="PF('cuentas').filter()" styleClass="custom-filter" style="width: 90% !important;">
                                                <f:selectItem itemLabel="Todas" itemValue="#{null}" noSelectionOption="true" />
                                                <f:selectItems value="#{cuentaContableView.clasificaciones}" var="c" itemLabel="#{c.orden} - #{c.texto}" itemValue="#{c.id}"/>
                                            </p:selectOneMenu>
                                        </f:facet>
                                        <h:outputText value="#{item.clasificacion.texto}" />
                                    </p:column>
                                    <p:column headerText="Tipo" filterBy="#{item.movimiento}" style="width: 6%; text-align: center;">
                                        <f:facet name="filter">
                                            <p:selectOneMenu onchange="PF('cuentas').filter()" styleClass="custom-filter">
                                                <f:converter converterId="javax.faces.Boolean" />
                                                <f:selectItem itemLabel="Todos" itemValue=""/>
                                                <f:selectItem itemLabel="A" itemValue="false" />
                                                <f:selectItem itemLabel="M" itemValue="true" />
                                            </p:selectOneMenu>
                                        </f:facet>
                                        <h:outputText value="#{item.movimiento ? 'M':'A' }" />
                                    </p:column>
                                    <p:column filterBy="#{item.gobierno}" headerText="Catálogo" style="width: 6%; text-align: center;">
                                        <f:facet name="filter">
                                            <p:selectOneMenu onchange="PF('cuentas').filter()" styleClass="custom-filter">
                                                <f:converter converterId="javax.faces.Boolean" />
                                                <f:selectItem itemLabel="Todos" itemValue="" />
                                                <f:selectItem itemLabel="Si" itemValue="true" />
                                                <f:selectItem itemLabel="No" itemValue="false" />
                                            </p:selectOneMenu>
                                        </f:facet>
                                        <h:outputText value="#{item.gobierno ? 'Si':'No' }" />
                                    </p:column>
                                    <p:column headerText="Acciones" style="text-align: center; width: 10%">
                                        <p:commandLink title="Registrar Cuenta" actionListener="#{cuentaContableView.form(item, false)}" process="@this">
                                            <i class="fa fa-plus" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                        </p:commandLink>   
                                        <p:commandLink actionListener="#{cuentaContableView.form(item, true)}" title="Editar Cuenta" process="@this">
                                            <p:graphicImage value="/resources/icons/editar.png"
                                                            width="16" height="15" 
                                                            style="margin-right: 8px;"/>  
                                        </p:commandLink>
                                        <p:commandLink title="Eliminar" actionListener="#{cuentaContableView.eliminar(item)}" process="@this">
                                            <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 8px; color: red;"></i>
                                            <p:confirm header="Confirmación de eliminación" message="¿Está seguro de eliminar la cuenta #{item.codigo} ?" icon="fa fa-exclamation-triangle" />
                                        </p:commandLink>  
                                        <p:commandLink rendered="true" title="Ver" actionListener="#{cuentaContableView.visualizarCuentas(item,true)}" process="@this">
                                            <i class="fa fa-search" style="font-size: 1.5em; margin-right: 8px;"></i>
                                        </p:commandLink>  
                                    </p:column>
                                </p:dataTable>
                            </h:panelGroup>
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                            </p:confirmDialog> 
                        </div>
                    </div>
                </h:form>
            </div>
        </div>

        <p:dialog id="cuentaDialog" header="Formulario Cuenta Contable" widgetVar="cuentaDialog" modal="true" showEffect="fade" 
                  width="50%" hideEffect="fade" resizable="false" height="500">
            <div class="ui-g-12" >
                <h:form id="formCuenta" prependId="false">  
                    <p:outputPanel style="width: 100%;">
                        <p:panelGrid  columns="4" styleClass="form-group ui-panelgrid-blank" layout="grid" id="formularioCuentaContable">
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel  value="Período:" style="width: 100%;font-weight: bold; "/><br/><br/>
                                <p:inputText class="panelInput" readonly="true" style="width: 100%"
                                             value="#{cuentaContableView.cuenta.periodo}" onkeypress="focusNextOnEnter(event, 'buscar-input-grupo')">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel value="Nivel:" style="width: 100%;font-weight: bold;"/><br/><br/>
                                <p:inputText class="panelInput" readonly="true" style="width: 100%"
                                             maxlength="1" value="#{cuentaContableView.cuenta.nivel.orden}" onkeypress="focusNextOnEnter(event, 'buscar-input-grupo')">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel  value="Catálogo:" style="width: 100%;font-weight: bold;"/><br/>
                                <p:selectBooleanButton value="#{cuentaContableView.cuenta.gobierno}" onLabel="Si" offLabel="No" 
                                                       style="width: 50%" offIcon="fa fa-times" onIcon="fa fa-check"/>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel  value="Movimiento:" style="width: 100%;font-weight: bold;"/><br/>
                                <p:selectBooleanButton disabled="#{cuentaContableView.btnDisable}" value="#{cuentaContableView.cuenta.movimiento}" 
                                                       style="width: 50%" onLabel="Si" offLabel="No" offIcon="fa fa-times" onIcon="fa fa-check">
                                    <p:ajax update="asoc,check,gridAsociacion,formularioCuentaContable" listener="#{cuentaContableView.renderCobradoPagado(cuentaContableView.cuenta,true)}" process="@this"/>
                                </p:selectBooleanButton>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel for="@next" value="Título:" style="width: 100%;font-weight: bold;"/> 
                                <p:inputText class="panelInput" readonly="#{cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 1) or cuentaContableView.readOnlyCampo()}" 
                                             required="#{!cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 1)}" requiredMessage="REQUERIDO" style="width: 100%"
                                             maxlength="1" value="#{cuentaContableView.cuenta.titulo}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre')">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput"
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuenta, 2)}">
                                <p:outputLabel for="@next" value="Grupo:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="1" value="#{cuentaContableView.cuenta.grupo}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre')" style="width: 100%"
                                             readonly="#{cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 2) or cuentaContableView.readOnlyCampo()}" 
                                             required="#{!cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 2)}" >
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" 
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuenta, 3)}">
                                <p:outputLabel for="@next" value="SubGrupo:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="1" value="#{cuentaContableView.cuenta.subGrupo}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre')" style="width: 100%"
                                             readonly="#{cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 3) or cuentaContableView.readOnlyCampo()}" 
                                             required="#{!cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 3)}" >
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" 
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuenta, 4)}">
                                <p:outputLabel for="@next" value="Cta. Nivel 1:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="2" value="#{cuentaContableView.cuenta.cuentaNivel1}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre')"
                                             readonly="#{cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 4) or cuentaContableView.readOnlyCampo()}" 
                                             required="#{!cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 4)}" style="width: 100%">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput"
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuenta, 5)}">
                                <p:outputLabel for="@next" value="Cta. Nivel 2:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="2" value="#{cuentaContableView.cuenta.cuentaNivel2}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre')"
                                             readonly="#{cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 5) or cuentaContableView.readOnlyCampo()}" 
                                             required="#{!cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 5)}" style="width: 100%">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput"
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuenta, 6)}">
                                <p:outputLabel for="@next" value="Cta. Nivel 3:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="3" value="#{cuentaContableView.cuenta.cuentaNivel3}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre')"
                                             readonly="#{cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 6) or cuentaContableView.readOnlyCampo()}" 
                                             required="#{!cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 6)}" style="width: 100%">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput"
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuenta, 7)}">
                                <p:outputLabel for="@next" value="Cta. Nivel 4:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="2" value="#{cuentaContableView.cuenta.cuentaNivel4}" onkeypress="focusNextOnEnter(event, 'cuenta_descripcion')"
                                             readonly="#{cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 7) or cuentaContableView.readOnlyCampo()}" 
                                             required="#{!cuentaContableView.readOnlyElementForm(cuentaContableView.cuenta, 7)}" style="width: 100%">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel for="@next" value="Clasificación:" style="width: 100%;font-weight: bold;"/>
                                <p:selectOneMenu value="#{cuentaContableView.cuenta.clasificacion}" converter="#{utilConverter}" panelStyle="width:200px" 
                                                 style="width: 100%;" filter="true" filterMatchMode="startsWith" required="true">
                                    <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{cuentaContableView.clasificaciones}" var="cla" itemLabel="#{cla.texto}" itemValue="#{cla}" itemLabelEscaped="false" />
                                </p:selectOneMenu>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" id="gridCuentaCobrarPagar"
                                          rendered="#{cuentaContableView.cuenta.nivel.orden >= 4 and !cuentaContableView.cuenta.movimiento}">
                                <p:outputLabel for="@next" value="Cta. Por Cobrar/Pagar:" style="width: auto;text-align: center;font-weight: bold;"/>                                        
                                <p:selectBooleanButton disabled="#{cuentaContableView.cuenta.movimiento}" style="width: 50%" 
                                                       value="#{cuentaContableView.invertir}" onLabel="Si" offLabel="No" offIcon="fa fa-times" onIcon="fa fa-check">
                                    <p:ajax update="asoc,cobradoPagado,gridAsociacion" listener="#{cuentaContableView.cobradoDevengado()}"/>
                                </p:selectBooleanButton>
                            </h:panelGroup>
                        </p:panelGrid>
                        <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" >
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel for="@next" value="Nombre:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText id="cuenta_nombre" style="width: 100%;" required="true"
                                             value="#{cuentaContableView.cuenta.nombre}" onkeypress="focusNextOnEnter(event, 'cuenta_descripcion')">
                                </p:inputText> 
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel for="@next" value="Descripción:" style="width: 100%;font-weight: bold;"/>
                                <p:inputTextarea rows="4" style="width: 100%;" required="true" autoResize="true"
                                                 value="#{cuentaContableView.cuenta.descripcion}"/>
                            </h:panelGroup>
                        </p:panelGrid>
                        <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="gridAsociacion">
                            <p:fieldset legend="Asociación Presupuestaria" id="asoc" style="font-weight: bold"
                                        rendered="#{cuentaContableView.cuenta.movimiento ? true:false or cuentaContableView.cuenta.ctaPagarCobrar ? true:false}">
                                <p:panelGrid  columns="2" styleClass="form-group ui-panelgrid-blank" layout="grid" 
                                              id="creditoDebito" rendered="#{cuentaContableView.renderCobradoPagado(cuentaContableView.cuenta,false) ? false:true and cuentaContableView.cuenta.movimiento ? true:false}">
                                    <h:panelGroup layout="block" style="width: 100%;text-align: right" class="panelInput" >
                                        <p:outputLabel id="check" value="Invertir Cuentas" style="font-weight: bold;"
                                                       rendered="#{cuentaContableView.cuenta.ctaPagarCobrar ? false:true 
                                                                   and cuentaContableView.cuenta.movimiento ? true:false}">
                                            <p:selectBooleanCheckbox value="#{cuentaContableView.invertir}" itemLabel="">
                                                <p:ajax update="asoc" listener="#{cuentaContableView.invertirCuenta()}"/>
                                            </p:selectBooleanCheckbox>
                                        </p:outputLabel>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;text-align: right" class="panelInput" >
                                        <p:outputLabel value="Cobrado/Devengado" style="font-weight: bold;">
                                            <p:selectBooleanCheckbox value="#{cuentaContableView.cuenta.ctaPagarCobrar}">
                                                <p:ajax update="asoc" listener="#{cuentaContableView.asociacionCobradoD(false)}"/>
                                            </p:selectBooleanCheckbox>
                                        </p:outputLabel>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Débito" style="width: 100%;font-weight: bold;"/>
                                        <p:selectOneMenu id="debito" value="#{cuentaContableView.cuenta.debito}" converter="#{utilConverter}"
                                                         style="width: 100%;" filter="true" filterMatchMode="startsWith" panelStyle="width:200px">
                                            <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cuentaContableView.debito}" var="cla" itemLabel="#{cla.codigo}.-#{cla.descripcion}" itemValue="#{cla}" itemLabelEscaped="false" />
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Crédito" style="width: 100%;font-weight: bold;"/>
                                        <p:selectOneMenu value="#{cuentaContableView.cuenta.credito}" converter="#{utilConverter}" 
                                                         style="width: 100%;" filter="true" filterMatchMode="startsWith" panelStyle="width:200px">
                                            <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cuentaContableView.credito}" var="cla" itemLabel="#{cla.codigo}.-#{cla.descripcion}" itemValue="#{cla}" itemLabelEscaped="false" />
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                </p:panelGrid>
                                <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" 
                                              rendered="#{cuentaContableView.renderCobradoPagado(cuentaContableView.cuenta,false) ? true:false}">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <h:outputLabel for="@next" value="#{cuentaContableView.etiquetas(cuentaContableView.cuenta)}" />
                                        <p:selectCheckboxMenu id="hijoscobradoDevengado" value="#{cuentaContableView.catalogosSelecionandos}" 
                                                              label="Cobrado/Devengado" converter="#{utilConverter}"
                                                              style="width: 100%;" filter="true" filterMatchMode="startsWith">
                                            <f:selectItems value="#{cuentaContableView.listHijosCobadoDevengado}" var="cla" 
                                                           itemLabel="#{cla.codigo}.-#{cla.descripcion}" itemValue="#{cla}"/>
                                        </p:selectCheckboxMenu>
                                    </h:panelGroup>
                                </p:panelGrid>
                            </p:fieldset>
                            <p:fieldset legend="Asociación Presupuestaria" id="cobradoPagado" style="font-weight: bold"
                                        rendered="#{cuentaContableView.invertir and !cuentaContableView.cuenta.movimiento and cuentaContableView.cuenta.nivel.orden >= 4}">
                                <p:panelGrid  style="width: 100%;" columns="1" styleClass="form-group ui-panelgrid-blank" >
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:selectOneMenu value="#{cuentaContableView.cuenta.cobradoDevengado}" 
                                                         converter="#{utilConverter}" 
                                                         style="width: 100%;" filter="true" filterMatchMode="startsWith" 
                                                         panelStyle="width:200px">
                                            <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{cuentaContableView.listCobradoDevengado}" var="cd" itemLabel="#{cd.codigo}.-#{cd.descripcion}" itemValue="#{cd}" itemLabelEscaped="false" />
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                </p:panelGrid>
                            </p:fieldset>
                        </p:panelGrid>
                        <center>
                            <p:commandButton value="Guardar" id="buscar-save" update="formCuenta" 
                                             icon="ui-icon-save" actionListener="#{cuentaContableView.guardar()}"
                                             styleClass="Fs16"/>
                            <p:commandButton value="Cancelar" style="width: auto; margin-left: 15px" process="@this"
                                             styleClass="red-btn" icon="ui-icon-clear" oncomplete="PF('cuentaDialog').hide();"/>

                        </center>
                    </p:outputPanel>
                </h:form>
            </div>
        </p:dialog>

        <p:dialog header="Formulario De impresión"
                  widgetVar="dlgImp"
                  modal="true"
                  height="170px" width="500px"
                  resizable="false"
                  showEffect="fade"
                  hideEffect="fade"
                  id="dlgImps">
            <h:form prependId="false" id="frmImp">
                <p:growl id="msgsss" showDetail="true"/>
                <div class="ui-g">
                    <div class="ui-g-12">
                        <div class="card card-w-title">
                            <p:outputPanel id="outPanelImp" style="width: 100%"> 
                                <center>
                                    <p:outputLabel for="datoss" value="DATOS DE IMPRESIÓN:"  style="font-weight: bold" /></center>

                                <p:selectOneRadio id="datos" value="#{cuentaContableView.impr}" layout="custom" unselectable="true">
                                    <f:selectItem itemLabel="Plan de Cuentas" itemValue="plan" />
                                    <f:selectItem itemLabel="Relación Contable Presupuestaria" itemValue="relacion" />
                                </p:selectOneRadio>
                                <h:panelGrid columns="2" cellpadding="5">
                                    <p:radioButton id="opt1" for="datos" itemIndex="0" />
                                    <h:outputLabel for="opt1" value="Plan de Cuentas" />
                                    <p:radioButton id="opt2" for="datos" itemIndex="1" />
                                    <h:outputLabel for="opt2" value="Relación Contable Presupuestaria" />
                                </h:panelGrid>
                                <center>
                                    <p:commandButton value="Imprimir"
                                                     icon="ui-icon-print"
                                                     process="frmImp"
                                                     actionListener="#{cuentaContableView.imprimirRep(true)}">
                                    </p:commandButton>
                                </center>


                            </p:outputPanel>
                        </div>
                    </div>
                </div>
            </h:form>
        </p:dialog>
        <p:dialog header="Formulario De impresión"
                  widgetVar="dlgImp2"
                  modal="true"
                  height="170px" width="500px"
                  resizable="false"
                  showEffect="fade"
                  hideEffect="fade"
                  id="dlgImps2">
            <h:form prependId="false" id="frmImp2">
                <p:growl id="msgsss2" showDetail="true"/>
                <div class="ui-g">
                    <div class="ui-g-12">
                        <div class="card card-w-title">
                            <p:outputPanel id="outPanelImp2" style="width: 100%"> 
                                <center>
                                    <p:outputLabel for="datoss" value="DATOS DE IMPRESIÓN:"  style="font-weight: bold"/></center>

                                <p:selectOneRadio id="datoss" value="#{cuentaContableView.impr}" layout="custom" unselectable="true">
                                    <f:selectItem itemLabel="Plan de Cuentas" itemValue="plan"/>
                                    <f:selectItem itemLabel="Relación Contable Presupuestaria" itemValue="relacion" />
                                </p:selectOneRadio>
                                <h:panelGrid columns="2" cellpadding="5">
                                    <p:radioButton id="opt11" for="datoss" itemIndex="0" />
                                    <h:outputLabel for="opt11" value="Plan de Cuentas" />
                                    <p:radioButton id="opt22" for="datoss" itemIndex="1" />
                                    <h:outputLabel for="opt22" value="Relación Contable Presupuestaria" />
                                </h:panelGrid>
                                <center>
                                    <p:commandButton value="Exportar"
                                                     icon="ui-icon-print"
                                                     process="frmImp2"
                                                     actionListener="#{cuentaContableView.imprimirRep(false)}">
                                    </p:commandButton>
                                </center>
                            </p:outputPanel>
                        </div>
                    </div>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog id="cuentaDialogVisualizacion" header="Formulario Cuenta Contable" widgetVar="cuentaDialogVisualizacion" modal="true" showEffect="fade" 
                  width="50%" hideEffect="fade" resizable="false" height="500">
            <div class="ui-g-12" >
                <h:form id="formCuentaView" prependId="false">  
                    <p:outputPanel style="width: 100%;">
                        <p:panelGrid  columns="4" styleClass="form-group ui-panelgrid-blank" layout="grid" id="formularioCuentaContableView">
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel  value="Período:" style="width: 100%;font-weight: bold; "/><br/><br/>
                                <p:inputText class="panelInput" readonly="true" style="width: 100%"
                                             value="#{cuentaContableView.cuentaVista.periodo}" onkeypress="focusNextOnEnter(event, 'buscar-input-grupo')">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel value="Nivel:" style="width: 100%;font-weight: bold;"/><br/><br/>
                                <p:inputText class="panelInput" readonly="true" style="width: 100%"
                                             maxlength="1" value="#{cuentaContableView.cuentaVista.nivel.orden}" onkeypress="focusNextOnEnter(event, 'buscar-input-grupo')">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel  value="Catálogo:" style="width: 100%;font-weight: bold;"/><br/>
                                <p:selectBooleanButton value="#{cuentaContableView.cuentaVista.gobierno}" onLabel="Si" offLabel="No" 
                                                       style="width: 50%" offIcon="fa fa-times" onIcon="fa fa-check" disabled="true"/>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel  value="Movimiento:" style="width: 100%;font-weight: bold;"/><br/>
                                <p:selectBooleanButton disabled="true" value="#{cuentaContableView.cuentaVista.movimiento}" 
                                                       style="width: 50%" onLabel="Si" offLabel="No" offIcon="fa fa-times" onIcon="fa fa-check">
                                    <p:ajax update="asocView,checkView,gridAsociacionView,formularioCuentaContableView" 
                                            listener="#{cuentaContableView.renderCobradoPagado(cuentaContableView.cuentaVista,true)}" process="@this"/>
                                </p:selectBooleanButton>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel for="@next" value="Título:" style="width: 100%;font-weight: bold;"/> 
                                <p:inputText class="panelInput" readonly="true" style="width: 100%"
                                             maxlength="1" value="#{cuentaContableView.cuentaVista.titulo}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre_view')">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput"
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuentaVista, 2)}">
                                <p:outputLabel for="@next" value="Grupo:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="1" value="#{cuentaContableView.cuentaVista.grupo}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre_view')" 
                                             style="width: 100%" readonly="true">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" 
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuentaVista, 3)}">
                                <p:outputLabel for="@next" value="SubGrupo:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="1" value="#{cuentaContableView.cuentaVista.subGrupo}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre_view')" 
                                             style="width: 100%" readonly="true">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" 
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuentaVista, 4)}">
                                <p:outputLabel for="@next" value="Cta. Nivel 1:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="2" value="#{cuentaContableView.cuentaVista.cuentaNivel1}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre_view')"
                                             readonly="true" style="width: 100%">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput"
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuentaVista, 5)}">
                                <p:outputLabel for="@next" value="Cta. Nivel 2:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="2" value="#{cuentaContableView.cuentaVista.cuentaNivel2}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre_view')"
                                             readonly="true" style="width: 100%">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput"
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuentaVista, 6)}">
                                <p:outputLabel for="@next" value="Cta. Nivel 3:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="3" value="#{cuentaContableView.cuentaVista.cuentaNivel3}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre_view')"
                                             readonly="true" style="width: 100%">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput"
                                          rendered="#{cuentaContableView.renderElementForm(cuentaContableView.cuentaVista, 7)}">
                                <p:outputLabel for="@next" value="Cta. Nivel 4:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="2" value="#{cuentaContableView.cuentaVista.cuentaNivel4}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre_view')"
                                             readonly="true" style="width: 100%">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel for="@next" value="Clasificación:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText maxlength="3" value="#{cuentaContableView.cuentaVista.clasificacion.texto}" onkeypress="focusNextOnEnter(event, 'cuenta_nombre_view')"
                                             readonly="true" style="width: 100%"/>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" id="gridCuentaCobrarPagarView"
                                          rendered="#{cuentaContableView.cuentaVista.nivel.orden >= 4 and !cuentaContableView.cuentaVista.movimiento}">
                                <p:outputLabel for="@next" value="Cta. Por Cobrar/Pagar:" style="width: auto;text-align: center;font-weight: bold;"/>                                        
                                <p:selectBooleanButton disabled="#{cuentaContableView.cuentaVista.movimiento}" style="width: 50%" 
                                                       value="#{cuentaContableView.invertir}" onLabel="Si" offLabel="No" offIcon="fa fa-times" onIcon="fa fa-check">
                                    <p:ajax update="asocView,cobradoPagadoView,gridAsociacionView" listener="#{cuentaContableView.cobradoDevengado()}"/>
                                </p:selectBooleanButton>
                            </h:panelGroup>
                        </p:panelGrid>
                        <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" >
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel for="@next" value="Nombre:" style="width: 100%;font-weight: bold;"/>
                                <p:inputText id="cuenta_nombre_view" style="width: 100%;" required="false" readonly="true"
                                             value="#{cuentaContableView.cuentaVista.nombre}" onkeypress="focusNextOnEnter(event, 'cuenta_descripcion_view')">
                                </p:inputText> 
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel for="@next" value="Descripción:" style="width: 100%;font-weight: bold;"/>
                                <p:inputTextarea rows="4" style="width: 100%;" required="false" autoResize="true" id="cuenta_descripcion_view"
                                                 value="#{cuentaContableView.cuentaVista.descripcion}" readonly="true"/>
                            </h:panelGroup>
                        </p:panelGrid>
                        <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="gridAsociacionView">
                            <p:fieldset legend="Asociación Presupuestaria1" id="asocView" style="font-weight: bold"
                                        rendered="#{cuentaContableView.cuentaVista.movimiento ? true:false or cuentaContableView.cuentaVista.ctaPagarCobrar ? true:false}">
                                <p:panelGrid  columns="2" styleClass="form-group ui-panelgrid-blank" layout="grid" 
                                              id="creditoDebitoView" rendered="#{cuentaContableView.renderCobradoPagado(cuentaContableView.cuentaVista,false) ? false:true and cuentaContableView.cuentaVista.movimiento ? true:false}">
                                    <h:panelGroup layout="block" style="width: 100%;text-align: right" class="panelInput" >
                                        <p:outputLabel id="checkView" value="Invertir Cuentas" style="font-weight: bold;"
                                                       rendered="#{cuentaContableView.cuentaVista.ctaPagarCobrar ? false:true 
                                                                   and cuentaContableView.cuentaVista.movimiento ? true:false}">
                                            <p:selectBooleanCheckbox value="#{cuentaContableView.invertir}" itemLabel="" disabled="true">
                                                <p:ajax update="asocView" listener="#{cuentaContableView.invertirCuenta()}"/>
                                            </p:selectBooleanCheckbox>
                                        </p:outputLabel>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;text-align: right" class="panelInput" >
                                        <p:outputLabel value="Cobrado/Devengado" style="font-weight: bold;">
                                            <p:selectBooleanCheckbox value="#{cuentaContableView.cuentaVista.ctaPagarCobrar}" disabled="true">
                                                <p:ajax update="asocView" listener="#{cuentaContableView.asociacionCobradoD(false)}"/>
                                            </p:selectBooleanCheckbox>
                                        </p:outputLabel>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Débito" style="width: 100%;font-weight: bold;"/>
                                        <p:inputText style="width: 100%;" required="false" readonly="true"
                                                     value="#{cuentaContableView.cuentaVista.debito.codigo} - #{cuentaContableView.cuentaVista.debito.descripcion}" 
                                                     onkeypress="focusNextOnEnter(event, 'cuenta_descripcion_view')">
                                        </p:inputText>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Crédito" style="width: 100%;font-weight: bold;"/>
                                        <p:inputText style="width: 100%;" required="false" readonly="true"
                                                     value="#{cuentaContableView.cuentaVista.credito.codigo} - #{cuentaContableView.cuentaVista.credito.descripcion}" 
                                                     onkeypress="focusNextOnEnter(event, 'cuenta_descripcion_view')">
                                        </p:inputText> 
                                    </h:panelGroup>
                                </p:panelGrid>
                                <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" 
                                              rendered="#{cuentaContableView.renderCobradoPagado(cuentaContableView.cuentaVista,false) ? true:false}">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <h:outputLabel for="@next" value="#{cuentaContableView.etiquetas(cuentaContableView.cuentaVista)}" />
                                        <p:selectCheckboxMenu id="hijoscobradoDevengadoView" value="#{cuentaContableView.catalogosSelecionandos}" label="Cobrado/Devengado" 
                                                              converter="#{utilConverter}" panelStyle="width:500px"
                                                              style="width: 100%;" filter="true" filterMatchMode="startsWith">
                                            <f:selectItems value="#{cuentaContableView.listHijosCobadoDevengado}" var="cla" itemLabel="#{cla.codigo}.-#{cla.descripcion}" 
                                                           itemValue="#{cla}"/>
                                        </p:selectCheckboxMenu>
                                    </h:panelGroup>
                                </p:panelGrid>
                            </p:fieldset>
                            <p:fieldset legend="Asociación Presupuestaria" id="cobradoPagadoView" style="font-weight: bold"
                                        rendered="#{!cuentaContableView.cuentaVista.movimiento and cuentaContableView.cuentaVista.nivel.orden >= 4}">
                                <p:panelGrid  style="width: 100%;" columns="1" styleClass="form-group ui-panelgrid-blank" >
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:inputText style="width: 100%;" required="false" readonly="true"
                                                     value="#{cuentaContableView.cuentaVista.cobradoDevengado.codigo} - #{cuentaContableView.cuentaVista.cobradoDevengado.descripcion}" 
                                                     onkeypress="focusNextOnEnter(event, 'cuenta_descripcion_view')">
                                        </p:inputText> 
                                    </h:panelGroup>
                                </p:panelGrid>
                            </p:fieldset>
                        </p:panelGrid>
                    </p:outputPanel>
                </h:form>
            </div>
        </p:dialog>


    </ui:define>

</ui:composition>