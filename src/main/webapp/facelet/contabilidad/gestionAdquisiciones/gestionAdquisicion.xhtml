<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:u="http://xmlns.jcp.org/jsf/composite/comp"
                xmlns:sigef="http://xmlns.jcp.org/jsf/composite/sigef/components"
                template="/WEB-INF/template/template.xhtml">

    <ui:define name="title">
        Gestión de Adquisición
    </ui:define>
    <ui:param name="tittle" value="GESTIÓN DE ADQUISICIONES"/>
    <ui:define name="head">
        <style type="text/css">
            .activo {
                background-color: #87F664 !important;
                background-image: none !important;
                color: #000000 !important;
            }
            .inactivo {
                background-color: #F66F64!important;
                background-image: none !important;
                color: #000000 !important;
            }
        </style>
    </ui:define>

    <ui:define name="content">
        <div class="ui-g ui-fluid">
            <div class="ui-g-12" >
                <h:form id="formMain" prependId="false">
                    <h:panelGroup id="dataTable" layout="block" rendered="#{adquisicionesView.formAdquisicion}">
                        <p:commandButton value="Nueva Adquisición" process="@this"
                                         icon="fa fa-plus" actionListener="#{adquisicionesView.form(null)}"
                                         styleClass="Fs16" style="width: auto; margin-bottom: 15px;"/>
                        <p:commandButton value="Limpiar filtros"  process="@this"
                                         icon="ui-icon-refresh" onclick="PF('adquisionesTable').clearFilters()" update="adquisionesTable"
                                         styleClass="Fs16" style="width: auto; margin-left: 15px;"/>
                        <p:commandButton id="mostrarColumnas" type="button" value="Columnas visibles" style="width: auto; float: right;" icon="fa fa-align-justify" />
                        <p:columnToggler datasource="adquisionesTable" trigger="mostrarColumnas" />
                        <p:dataTable id="adquisionesTable" widgetVar="adquisionesTable" var="adquisicion" 
                                     paginator="true" rows="30" style="width: 100%;" paginatorPosition="bottom"
                                     value="#{adquisicionesView.adquisicionesLazyModel}" 
                                     currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}" filterEvent="enter"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rowsPerPageTemplate="30,40,50,60,70,100" lazy="true" selectionMode="single" rowKey="#{adquisicion.id}" 
                                     emptyMessage="No existen órdenes de compras con el criterio de búsqueda especificado">
                            <p:column headerText="ID. Proceso" style="width: 5vw;" filterBy="#{adquisicion.idProceso}" filterMatchMode="contains" sortBy="#{adquisicion.idProceso}">
                                <h:outputText value="#{adquisicion.idProceso}" />
                            </p:column>  
                            <p:column headerText="Adquisición" style="width: 5vw;text-align:center " filterBy="#{adquisicion.tipoAdquisicion.id}">
                                <f:facet name="filter">
                                    <p:selectOneMenu onchange="PF('adquisionesTable').filter()" style="width: 100%">
                                        <f:selectItem itemLabel="Todos" itemValue="#{null}" noSelectionOption="true"/>
                                        <f:selectItems value="#{adquisicionesView.tiposAdquisicion}" var="tipoAdquisicion" itemLabel="#{tipoAdquisicion.texto}" itemValue="#{tipoAdquisicion.id}" />
                                    </p:selectOneMenu>
                                </f:facet>
                                <h:outputText value="#{adquisicion.tipoAdquisicion.texto}" />
                            </p:column>  
                            <p:column headerText="Tipo de Proceso" style="width: 8vw;" filterBy="#{adquisicion.tipoProceso.texto}" filterMatchMode="contains">                                
                                <h:outputText value="#{adquisicion.tipoProceso.texto}" />
                            </p:column>  
                            <p:column headerText="Proveedor" style="width: 10vw;" filterBy="#{adquisicion.proveedor.cliente.nombre}" filterMatchMode="contains">
                                <h:outputText value="#{adquisicion.proveedor.cliente.nombre}" />
                            </p:column>  
                            <p:column headerText="Emisión / Publicación" style="width: 6vw;text-align: center" sortBy="#{adquisicion.fechaEmision}">
                                <h:outputText value="#{adquisicion.fechaEmision}" >
                                    <f:convertDateTime pattern="dd-MM-yyyy" locale="es" />
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Aceptación / Adjudicación" style="width: 6vw;text-align: center" sortBy="#{adquisicion.fechaAceptacion}">
                                <h:outputText value="#{adquisicion.fechaAceptacion}" >
                                    <f:convertDateTime pattern="dd-MM-yyyy" locale="es" />
                                </h:outputText>
                            </p:column> 
                            <p:column headerText="Nº de Contrato" style="width: 6vw;" filterBy="#{adquisicion.numeroContrato}" filterMatchMode="contains">
                                <h:outputText value="#{adquisicion.numeroContrato}" />
                            </p:column> 
                            <p:column headerText="Fecha de Contrato" style="width: 5vw;text-align: center" sortBy="#{adquisicion.fechaContrato}">
                                <h:outputText value="#{adquisicion.fechaContrato}" >
                                    <f:convertDateTime pattern="dd-MM-yyyy" locale="es" />
                                </h:outputText>
                            </p:column> 
                            <p:column headerText="Valor de Contrato" style="width: 5vw;" >
                                <h:outputText value="#{adquisicion.valorContratado}" style="float: right">
                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                </h:outputText>
                            </p:column> 
                            <p:column headerText="Fecha de Registro" style="width: 5vw;text-align: center" sortBy="#{adquisicion.fechaCreacion}">
                                <h:outputText value="#{adquisicion.fechaCreacion}" >
                                    <f:convertDateTime pattern="dd-MM-yyyy" locale="es" />
                                </h:outputText>
                            </p:column> 
                            <p:column headerText="Acciones" style="width: 7vw;text-align: center">
                                <p:commandLink actionListener="#{adquisicionesView.form(adquisicion)}" title="Editar" process="@this" class="editar">
                                    <i class="fa fa-edit" style="font-size: 1.8em; margin-right: 2px; color: #0D47A1;"></i>
                                </p:commandLink>  
                                <p:commandLink actionListener="#{adquisicionesView.verDocumento(adquisicion)}" title="Ver Documentos" process="@this" class="ver">
                                    <i class="fa fa-cloud-download" style="font-size: 1.8em; margin-right: 2px; color: #0D47A1;"></i>
                                </p:commandLink>  
                                <p:commandLink title="Eliminar Orden de Compra **" actionListener="#{adquisicionesView.delete(adquisicion)}" process="@this" class="eliminar">
                                    <i class="fa fa-trash" style="font-size: 1.8em; margin-right: 2px; color: red;"></i>
                                    <p:confirm header="Confirmación de eliminación" message="¿ Está seguro de eliminar la adquisición #{adquisicion.idProceso} ?" 
                                               icon="fa fa-exclamation-triangle" />
                                </p:commandLink>
                                <p:commandLink onclick="window.open('#{adquisicion.urlProcesoContratacion}', '_blank');" class="portal"
                                               title="Ir Portal Compras Públicas" disabled="#{adquisicion.urlProcesoContratacion eq null}" >
                                    <i class="fa fa-external-link" style="color: #0D47A1; font-size: 1.8em;"  />
                                </p:commandLink>
                            </p:column> 
                        </p:dataTable>
                    </h:panelGroup>
                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                    </p:confirmDialog> 
                    <div class="ui-g-12" >
                        <h:panelGroup id="adquisicionForm" layout="block" rendered="#{!adquisicionesView.formAdquisicion}">
                            <div class="ui-g-7" >
                                <p:fieldset legend="Detalle de la Adquisición:" style="margin-bottom: 10px" id="fieldsetDetalleAdquisicion">
                                    <p:panelGrid  columns="3" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Tipo de Adquisición:" style="font-weight: bold"/>
                                            <p:selectOneMenu id="tipoAdquisicion" value="#{adquisicionesView.adquisiciones.tipoAdquisicion}" converter="#{utilConverter}"
                                                             filter="true" filterMatchMode="startsWith" required="true"
                                                             style="width: 100%;" panelStyle="width:120px">
                                                <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" itemDisabled="true"/>
                                                <f:selectItems value="#{adquisicionesView.tiposAdquisicion}" var="tipoAdquisicion" itemLabel="#{tipoAdquisicion.texto}" itemValue="#{tipoAdquisicion}" />
                                                <p:ajax update="subtipoAdquisicion,tipoProceso" listener="#{adquisicionesView.actualizarTiposProcesos()}" />
                                            </p:selectOneMenu>
                                        </h:panelGroup>
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Subtipo de Bienes:" style="font-weight: bold"/>
                                            <p:selectOneMenu id="subtipoAdquisicion" filter="true" filterMatchMode="startsWith" converter="#{utilConverter}"
                                                             value="#{adquisicionesView.adquisiciones.subTipoAdquisicion}" 
                                                             disabled="#{adquisicionesView.adquisiciones.tipoAdquisicion.codigo == 'tipo_adquisicion_bienes' ? false:true}"
                                                             style="width: 100%;" panelStyle="width:130px">
                                                <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" itemDisabled="true" />
                                                <f:selectItems value="#{adquisicionesView.subTiposAdquisicion}" var="subTipoAdquisicion" itemLabel="#{subTipoAdquisicion.texto}" itemValue="#{subTipoAdquisicion}" />
                                            </p:selectOneMenu>
                                        </h:panelGroup>
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Tipo de Proceso:" style="font-weight: bold"/>
                                            <p:selectOneMenu id="tipoProceso" value="#{adquisicionesView.adquisiciones.tipoProceso}" converter="#{utilConverter}"
                                                             filter="true" filterMatchMode="startsWith" required="true"
                                                             style="width: 100%;" panelStyle="width:120px">
                                                <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" itemDisabled="true" />
                                                <f:selectItems value="#{adquisicionesView.tiposProcesos}" var="tipoProceso" itemLabel="#{tipoProceso.texto}" itemValue="#{tipoProceso}" />
                                                <p:ajax update="identificacion" listener="#{adquisicionesView.actualizarSiglas()}" process="@this"/>
                                            </p:selectOneMenu>
                                        </h:panelGroup>
                                    </p:panelGrid>
                                    <p:panelGrid  columns="3" styleClass="form-group ui-panelgrid-blank" layout="grid" id="gridDetalle">
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="ID. Proceso:" style="font-weight: bold"/>
                                            <p:inputText id="identificacion" style="width: 100%" value="#{adquisicionesView.adquisiciones.idProceso}" 
                                                         required="#{adquisicionesView.renderedAdquisicion}"
                                                         onkeypress="focusNextOnEnter(event, 'fechaEmision')"/>
                                        </h:panelGroup>
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Emisión/Publicación" style="font-weight: bold"/>
                                            <p:calendar id="fechaEmision" value="#{adquisicionesView.adquisiciones.fechaEmision}" 
                                                        locale="es" pattern="dd/MM/yyyy" readonlyInput="true" 
                                                        required="#{adquisicionesView.renderedAdquisicion}"
                                                        maxdate="#{adquisicionesView.adquisiciones.fechaAceptacion}" navigator="true">
                                                <p:ajax event="dateSelect" update="fechaAceptacion"/>  
                                            </p:calendar>
                                        </h:panelGroup>
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Aceptación/Adjudicación:" style="font-weight: bold;"/>
                                            <p:calendar id="fechaAceptacion" value="#{adquisicionesView.adquisiciones.fechaAceptacion}"
                                                        locale="es" readonlyInput="true" pattern="dd/MM/yyyy"
                                                        required="#{adquisicionesView.renderedAdquisicion}"
                                                        disabled="#{empty adquisicionesView.adquisiciones.fechaEmision? true:false}"
                                                        mindate="#{adquisicionesView.adquisiciones.fechaEmision}" navigator="true"/>
                                        </h:panelGroup>
                                    </p:panelGrid>
                                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <p:fieldset legend="Detalle del Contrato:" style="margin-bottom: 10px" id="fieldsetContrato">
                                            <p:panelGrid columns="4" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                                    <p:outputLabel  for="@next" value="¿Aplica Garantía?" style="font-weight: bold;margin-right: 5px"/>
                                                    <p:selectBooleanCheckbox value="#{adquisicionesView.adquisiciones.garantia}"/>
                                                </h:panelGroup>
                                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                                    <p:outputLabel  for="@next" value="Nº de Contrato:" style="font-weight: bold"/>
                                                    <p:inputText id="numContrato" onkeypress="focusNextOnEnter(event, 'valorContratado')" 
                                                                 required="true"
                                                                 style="width: 100%" value="#{adquisicionesView.adquisiciones.numeroContrato}"/>
                                                </h:panelGroup>
                                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                                    <p:outputLabel  for="@next" value="Valor Contratado:" style="font-weight: bold"/>
                                                    <p:inputNumber id="valorContratado" class="panelInput" style="width: 100%" required="true" 
                                                                   value="#{adquisicionesView.adquisiciones.valorContratado}" 
                                                                   decimalSeparator="," thousandSeparator="." symbol="$"
                                                                   onkeypress="focusNextOnEnter(event, 'fechaContrato')">
                                                    </p:inputNumber>
                                                </h:panelGroup>
                                                <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                                    <p:outputLabel  for="@next" value="Fecha de Contrato:" style="font-weight: bold"/>
                                                    <p:calendar id="fechaContrato" value="#{adquisicionesView.adquisiciones.fechaContrato}"
                                                                required="true"
                                                                locale="es" readonlyInput="true" pattern="dd/MM/yyyy" navigator="true"/>
                                                </h:panelGroup>
                                            </p:panelGrid>
                                        </p:fieldset>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  for="@next" value="Descripción:" style="font-weight: bold;"/>
                                            <p:inputTextarea id="descripcion" rows="5" style="width: 100%;border: 1px solid #cccccc;text-transform: uppercase" 
                                                             value="#{adquisicionesView.adquisiciones.descripcion}"/>
                                        </p:panelGrid>
                                    </p:panelGrid>
                                </p:fieldset>  
                            </div>
                            <div class="ui-g-5">
                                <p:fieldset legend="Detalle Proveedor:" style="margin-bottom: 10px" id="fieldsetProveedor">
                                    <p:panelGrid columns="3" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <h:panelGroup layout="block" style="width: 100%;text-align: center" class="panelInput" >
                                            <p:commandButton value="Agregar Proveedor" id="aniadirProveedor" process="@this"
                                                             icon="fa fa-user-plus" actionListener="#{adquisicionesView.formProveedor()}"
                                                             style="width: auto" styleClass="Fs16"/>
                                        </h:panelGroup>
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="RUC:" style="font-weight: bold"/>
                                            <p:inputText id="RUC" style="width: 100%;"
                                                         onkeypress="focusNextOnEnter(event, 'proveedor')" readonly="true" maxlength="13"
                                                         value="#{adquisicionesView.adquisiciones.proveedor.cliente.identificacionCompleta}">
                                            </p:inputText>
                                        </h:panelGroup>
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Provincia:" style="font-weight: bold"/>
                                            <p:inputText id="ciudadProvedorCarga" style="width: 100%;"
                                                         onkeypress="focusNextOnEnter(event, 'ciudadProvedorCarga')" readonly="true"
                                                         value="#{adquisicionesView.adquisiciones.proveedor.cliente.canton.idProvincia.provincia}">
                                            </p:inputText>
                                        </h:panelGroup>
                                    </p:panelGrid>
                                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Razón Social:" style="font-weight: bold"/>
                                            <p:inputText id="proveedor" onkeypress="focusNextOnEnter(event, 'cuenta1')"
                                                         readonly="true" style="width: 100%" value="#{adquisicionesView.adquisiciones.proveedor.cliente.nombre}"/>
                                        </h:panelGroup>
                                    </p:panelGrid>
                                </p:fieldset>
                                <p:fieldset legend="Anticipo" style="margin-bottom: 10px" >
                                    <p:panelGrid columns="2" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Anticipo Proveedor:" style="font-weight: bold"/>
                                            <p:selectOneMenu id="cuenta1" value="#{adquisicionesView.adquisiciones.anticipo}" var="t"
                                                             filter="true" filterMatchMode="contains" converter="#{utilConverter}"
                                                             style="width: 100%;" panelStyle="width:130px">
                                                <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" itemDisabled="true" />
                                                <f:selectItems value="#{adquisicionesView.cuentaAnticipoList}" 
                                                               var="anticipo" itemLabel="#{anticipo.codigo}"   itemValue="#{anticipo}" />
                                                <p:column style="width:10%" >
                                                    <f:facet name="header">
                                                        <h:outputText value="Código"/>
                                                    </f:facet>
                                                    <h:outputText value="#{t.codigo}" style="font-weight: bold;" />
                                                </p:column>
                                                <p:column style="width: 50%;">
                                                    <f:facet name="header">
                                                        <h:outputText value="Nombre"/>
                                                    </f:facet>
                                                    <h:outputText value="#{t.nombre}" />
                                                </p:column>
                                            </p:selectOneMenu>
                                        </h:panelGroup>
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Costo/Gasto:" style="font-weight: bold"/>
                                            <p:selectOneMenu id="cuenta2" filter="true" filterMatchMode="contains" converter="#{utilConverter}"
                                                             value="#{adquisicionesView.adquisiciones.gasto}" var="t"
                                                             style="width: 100%;" panelStyle="width:130px">
                                                <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" itemDisabled="true" />
                                                <f:selectItems  var="gastos" itemLabel="#{gastos.codigo}"  itemValue="#{gastos}" 
                                                                value="#{adquisicionesView.cuentaCostoGastolist}"/>
                                                <p:column style="width:10%" >
                                                    <f:facet name="header">
                                                        <h:outputText value="Código"/>
                                                    </f:facet>
                                                    <h:outputText value="#{t.codigo}" style="font-weight: bold;" />
                                                </p:column>
                                                <p:column style="width: 50%;">
                                                    <f:facet name="header">
                                                        <h:outputText value="Nombre"/>
                                                    </f:facet>
                                                    <h:outputText value="#{t.nombre}" />
                                                </p:column>
                                            </p:selectOneMenu>
                                        </h:panelGroup>
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Forma de pago:" style="font-weight: bold"/>
                                            <p:selectOneMenu id="idFormaPago" value="#{adquisicionesView.adquisiciones.idFormaPago}"
                                                             filter="true" filterMatchMode="contains" converter="#{utilConverter}"
                                                             style="width: 100%;" panelStyle="width:130px">
                                                <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" itemDisabled="true" />
                                                <f:selectItems  var="itemSelect" itemLabel="#{itemSelect.texto}"  itemValue="#{itemSelect}" 
                                                                value="#{adquisicionesView.formasPagoList}"/> 
                                            </p:selectOneMenu>
                                        </h:panelGroup>
                                        <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                            <p:outputLabel  for="@next" value="Porcentaje Anticipo:" style="font-weight: bold"/>
                                            <p:inputNumber id="porcentaje" class="panelInput" style="width: 100%"
                                                           value="#{adquisicionesView.adquisiciones.porcentajeAnticipo}"
                                                           symbol="%" symbolPosition="s" decimalPlaces="0"
                                                           onkeypress="focusNextOnEnter(event, 'porcentaje')">
                                                <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                            </p:inputNumber>
                                        </h:panelGroup>
                                    </p:panelGrid>
                                </p:fieldset>
                                <p:fieldset legend="Documento" style="margin-bottom: 10px">
                                    <p:fileUpload fileUploadListener="#{adquisicionesView.subirArchivo}" 
                                                  uploadLabel="Subir" cancelLabel="Eliminar" label="Seleccionar" 
                                                  mode="advanced" dragDropSupport="false"
                                                  update="messages" />
                                    <br/><br/>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" id="pngGLinkComprasPub1" >
                                        <p:outputLabel value="URL Portal Compras Públicas" class="FontBold Wid100" />
                                        <div class="ui-inputgroup Wid100">
                                            <p:inputText value="#{adquisicionesView.adquisiciones.urlProcesoContratacion}" class="Wid94" 
                                                         placeholder="URL Portal Compras Públicas">
                                                <p:ajax update="pngGLinkComprasPub1,linkComprasPub1" />
                                            </p:inputText>
                                            <p:commandLink style="width: 9%" onclick="window.open('#{adquisicionesView.adquisiciones.urlProcesoContratacion}', '_blank');"
                                                           rendered="#{adquisicionesView.adquisiciones.urlProcesoContratacion ne null}" id="linkComprasPub1">
                                                <i class="fa fa-external-link newi Fs22"  />
                                            </p:commandLink>  
                                        </div>
                                    </h:panelGroup>
                                </p:fieldset>                               
                            </div>
                            <div class="ui-g-12" >
                                <p:fieldset legend="Responsables:" style="margin-bottom: 10px" id="fieldsetResponsable">
                                    <p:commandButton value="Añadir Responsable" id="aniadirResponsable" update="fieldsetResponsable" process="@this"
                                                     icon="fa fa-plus" actionListener="#{adquisicionesView.añadirCelda()}" rendered="#{adquisicionesView.habilitarResponsable}"
                                                     style="width: auto" styleClass="Fs16"/>
                                    <p:dataTable  style="text-align: center; margin: 10px 0px" rows="3" editable="true" editMode="cell" 
                                                  emptyMessage="No existen datos" rowStyleClass="#{servidorResponsable.estado==true ? 'activo' : 'inactivo'}"
                                                  id="servidorResponsableTable" value="#{adquisicionesView.responsableList}" 
                                                  var="servidorResponsable" widgetVar="servidorResponsableTable">
                                        <p:column headerText="Nº de Identificación" style="width: 3vw; height: 1vw;text-align: center">
                                            <p:cellEditor>
                                                <f:facet name="output"><h:outputText value="#{servidorResponsable.responsable.persona.identificacion}" /></f:facet>
                                                <f:facet name="input">
                                                    <p:selectOneMenu value="#{servidorResponsable.responsable}" style="width:100%" disabled="#{servidorResponsable.id==null?false:true}"
                                                                     converter="#{utilConverter}" filter="true" filterMatchMode="contains" >
                                                        <f:selectItem itemLabel="Seleccionar"/>
                                                        <f:selectItems value="#{adquisicionesView.servidorList}" var="servidor" 
                                                                       itemLabel="#{servidor.persona.identificacion} - #{servidor.persona.nombreCompleltoSql}" itemValue="#{servidor}"/>
                                                        <p:ajax update="servidorResponsableTable"/>
                                                    </p:selectOneMenu>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column headerText="Nombres " style="width: 6vw;text-align: center">
                                            <h:outputText value="#{servidorResponsable.responsable.persona.nombreCompleto}" />
                                        </p:column>
                                        <p:column headerText="Cargo " style="width: 3vw;text-align: center">
                                            <h:outputText value="#{servidorResponsable.responsable.distributivo.cargo.nombreCargo}" />
                                        </p:column>
                                        <p:column headerText="Unidad Administrativa " style="width: 6vw;text-align: center">
                                            <h:outputText value="#{servidorResponsable.responsable.distributivo.unidadAdministrativa.nombre}" />
                                        </p:column>
                                        <p:column headerText="Fecha Asignación " style="width: 3vw;text-align: center">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{servidorResponsable.fechaAsignacion}" >
                                                        <f:convertDateTime pattern="dd/MM/yyyy" locale="es"/>
                                                    </h:outputText>
                                                </f:facet>
                                                <f:facet name="input" >
                                                    <p:calendar value="#{servidorResponsable.fechaAsignacion}" locale="es" style="width:100%" navigator="true"
                                                                readonlyInput="true" disabled="#{servidorResponsable.id==null?false:true}">
                                                        <p:ajax event="dateSelect" update="servidorResponsableTable" listener="#{adquisicionesView.controlFecha(servidorResponsable)}" />
                                                    </p:calendar>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column headerText="Fecha Finalización " style="width: 3vw;text-align: center">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{servidorResponsable.fechaFinalizacion}" >
                                                        <f:convertDateTime pattern="dd/MM/yyyy" locale="es" />
                                                    </h:outputText>
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:calendar value="#{servidorResponsable.fechaFinalizacion}" locale="es" 
                                                                mindate="#{servidorResponsable.fechaAsignacion}" style="width:100%" navigator="true"
                                                                disabled="#{empty servidorResponsable.fechaAsignacion? true:servidorResponsable.estado ? false: true}">
                                                        <p:ajax event="dateSelect" listener="#{adquisicionesView.onDateSelect(servidorResponsable)}" update="servidorResponsableTable" />
                                                    </p:calendar>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column headerText="Estado" style="width: 3vw;text-align: center">
                                            <h:outputText value="#{servidorResponsable.estado==true?'Activo':'Inactivo'}" />
                                        </p:column>
                                    </p:dataTable>
                                </p:fieldset>
                            </div>
                            <div class="ui-g-12">
                                <center>
                                    <p:commandButton value="Guardar" id="save" update="adquisicionForm" style="margin: 15px;width: 100px"
                                                     icon="ui-icon-save" actionListener="#{adquisicionesView.save()}"
                                                     styleClass="Fs16"/>
                                    <p:commandButton value="Cancelar" process="@this"
                                                     icon="fa fa-remove" actionListener="#{adquisicionesView.cancelar()}"
                                                     styleClass="Fs16" class="red-button" style="width: 100px; margin-bottom: 15px;"/>
                                </center>
                            </div>
                        </h:panelGroup>
                    </div>
                </h:form>
            </div>  
        </div>

        <p:dialog id="proveedorDlg" widgetVar="proveedorDlg" width="35%" position="center" draggable="false"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false" header="Listado de Proveedores" >
            <div class="ui-g-12" >
                <h:form prependId="false">
                    <p:outputPanel id="proveedorForm" style="width: 100%;" >
                        <p:commandButton value="Nuevo Proveedor" process="@this"
                                         icon="fa fa-user-plus" actionListener="#{adquisicionesView.formNuevoProveedor()}"
                                         styleClass="Fs16" style="width: 25%; margin-bottom: 10px"/>
                        <p:dataTable  id="proveedorTable" widgetVar="proveedorTable" var="proveedor" value="#{adquisicionesView.proveedorLazyModel}" 
                                      scrollable="true" scrollHeight="300" lazy="true" rows="20000" style="width: 100%" rowKey="#{proveedor.id}"
                                      emptyMessage="No existen cuentas con el criterio de búsqueda especificado">
                            <p:column headerText="RUC" filterBy="#{proveedor.cliente.identificacion}"  style="width: 30%;text-align: center">
                                <h:outputText value="#{proveedor.cliente.identificacionCompleta}" />
                            </p:column> 
                            <p:column headerText="Nombre Beneficiario" filterBy="#{proveedor.cliente.nombre}"  style="width: 45%;">
                                <h:outputText value="#{proveedor.cliente.nombre}" />
                            </p:column>
                            <p:column headerText="Acción"  style="width: 20%;text-align: center">
                                <p:commandLink actionListener="#{adquisicionesView.añadirProveedor(proveedor)}" title="Seleccionar" update="fieldsetProveedor" process="@this">
                                    <i class="fa fa-plus-circle" style="font-size: 1.5em; margin-right: 8px; color: #33cc00;"></i>
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                    </p:outputPanel>
                </h:form>  
            </div>
        </p:dialog>

        <p:dialog id="proveedorNuevoDlg" widgetVar="proveedorNuevoDlg" position="top" style="margin-top: 100px" width="60%"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false" >
            <h:form id="registroProveedor" prependId="false" >
                <p:tabView id="tabViewProveedor">
                    <p:tab title="Registro del Proveedor" id="tabProveedor">
                        <p:panelGrid columns="4" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Tipo de Identificación:" style="font-weight: bold"/>
                                <p:inputText id="tipoIdentificacionProveedor" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'tipoIdentificacionProveedor')"
                                             value="#{adquisicionesView.clienteProveedor.tipoIdentificacion.texto}" readonly="true" /> 
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Identificación:" style="font-weight: bold"/>
                                <p:inputText id="identificacionProveedor" style="width: 100%" maxlength="13"
                                             value="#{adquisicionesView.clienteProveedor.identificacion}"
                                             readonly="#{adquisicionesView.datosCargados}"
                                             required="true" class="panelInput" onkeypress="focusNextOnEnter(event, 'provinciaProveedor')">
                                    <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                    <p:ajax listener="#{adquisicionesView.buscarCliente(true)}" event="blur" update="registroProveedor"/>
                                </p:inputText> 
                            </p:panelGrid>
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel  for="@next" value="Provincia:" style="font-weight: bold"/>
                                <p:selectOneMenu id="provinciaProveedor" value="#{adquisicionesView.provinciaProveedor}" converter="#{utilConverter}"
                                                 filter="true" filterMatchMode="startsWith" required="true"
                                                 style="width: 100%" panelStyle="width:125px">
                                    <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
                                    <f:selectItems value="#{adquisicionesView.provincias}" var="provincia" itemLabel="#{provincia.provincia}" 
                                                   itemValue="#{provincia}" />
                                    <p:ajax update="cantonProveedor" listener="#{adquisicionesView.actualizarCantones('PROVEEDOR')}"/>
                                </p:selectOneMenu>
                            </p:panelGrid>    
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel  for="@next" value="Cantón:" style="font-weight: bold"/>
                                <p:selectOneMenu id="cantonProveedor" value="#{adquisicionesView.clienteProveedor.canton}" converter="#{utilConverter}"
                                                 filter="true" filterMatchMode="startsWith" required="true"
                                                 style="width: 100%;" panelStyle="width:125px">
                                    <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
                                    <f:selectItems value="#{adquisicionesView.cantonProveedor}" var="canton" itemLabel="#{canton.canton}" 
                                                   itemValue="#{canton}" />
                                </p:selectOneMenu>
                            </p:panelGrid>  
                        </p:panelGrid>
                        <p:panelGrid columns="3" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                <p:outputLabel for="@next" value="Razón Social:" style="font-weight: bold"/>
                                <p:inputText id="razonSocialProveedor" style="width: 100%;text-transform: uppercase" 
                                             onkeyup="toUpperCase(this)"
                                             readonly="#{adquisicionesView.datosCargados}" required="true"
                                             onkeypress="focusNextOnEnter(event, 'razonSocialProveedor')"
                                             value="#{adquisicionesView.clienteProveedor.nombre}"/> 
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Nombre Comercial:" style="font-weight: bold"/>
                                <p:inputText style="width: 100%;text-transform: uppercase" readonly="#{adquisicionesView.clienteProveedor.apellido==''? false:true}"
                                             onkeyup="toUpperCase(this)" required="true" id="nombreComercial"
                                             onkeypress="focusNextOnEnter(event, 'nombreComercial')" maxlength="30" 
                                             value="#{adquisicionesView.clienteProveedor.apellido}"/> 
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Dirección:" style="font-weight: bold"/>
                                <p:inputText id="direccionProveedor" style="width: 100%;text-transform: uppercase" 
                                             onkeyup="toUpperCase(this)"
                                             readonly="#{adquisicionesView.datosCargados}" required="true"
                                             onkeypress="focusNextOnEnter(event, 'direccionProveedor')"
                                             value="#{adquisicionesView.clienteProveedor.direccion}"/> 
                            </p:panelGrid>
                        </p:panelGrid>
                        <p:panelGrid columns="4" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="E-mail:" style="font-weight: bold"/>
                                <p:inputText id="proveedorEmail" style="width: 100%" 
                                             onkeypress="focusNextOnEnter(event, 'proveedorEmail')"
                                             value="#{adquisicionesView.clienteProveedor.email}"/> 
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Teléfono:" style="font-weight: bold"/>
                                <p:inputMask id="telefonoProveedor" mask="(99)999-9999" placeholder="(99) 999-9999" style="width: 100%"
                                             required="true" onkeypress="focusNextOnEnter(event, 'telefonoProveedor')"
                                             value="#{adquisicionesView.clienteProveedor.telefono}"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Celular:" style="font-weight: bold"/>
                                <p:inputMask id="celularProveedor" mask="(99)9999-9999" placeholder="(99) 9999-9999" style="width: 100%"
                                             onkeypress="focusNextOnEnter(event, 'celularProveedor')"
                                             value="#{adquisicionesView.clienteProveedor.celular}"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Tipo Negocio:" style="font-weight: bold"/>
                                <p:selectOneMenu id="tipoNegocidoProveedor" value="#{adquisicionesView.clienteProveedor.tipoDeNegocio}" 
                                                 required="true" style="width:185px">
                                    <f:selectItem itemLabel="Seleccione"  itemValue="" />
                                    <f:selectItem itemLabel="COMERCIAL"  itemValue="COMERCIAL" />
                                    <f:selectItem itemLabel="FUNDACIÓN"  itemValue="FUNDACIÓN" />
                                    <f:selectItem itemLabel="ASOCIACIÓN"  itemValue="ASOCIACIÓN" />
                                    <f:selectItem itemLabel="RELIGIOSO"  itemValue="RELIGIOSO" />
                                </p:selectOneMenu>
                            </p:panelGrid>
                        </p:panelGrid>
                        <p:panelGrid columns="4" layout="grid" styleClass="ui-panelgrid-blank form-group" id="clasificacionTipoGrid">
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Clasificación:" style="font-weight: bold"/>
                                <p:selectOneMenu id="clasificaciones" value="#{adquisicionesView.clienteProveedor.clasificacionProv}" 
                                                 style="width:185px" converter="#{utilConverter}" required="true">
                                    <f:selectItem itemLabel="Seleccione"  itemValue="#{null}" />
                                    <f:selectItems value="#{adquisicionesView.clasificaciones}" var="clasificación"
                                                   itemLabel="#{clasificacion.texto}" itemValue="#{clasificacion}" />
                                    <p:ajax listener="#{adquisicionesView.actualizarTipo()}" update="tipos, :registroProveedor:tabViewProveedor:gridContacto" />
                                </p:selectOneMenu>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Tipo:" style="font-weight: bold"/>   
                                <p:selectOneMenu id="tipos" value="#{adquisicionesView.clienteProveedor.tipoProv}" 
                                                 style="width:185px" converter="#{utilConverter}" required="true">
                                    <f:selectItem itemLabel="Seleccione"  itemValue="#{null}" />
                                    <f:selectItems value="#{adquisicionesView.tipos}" var="tipos"
                                                   itemLabel="#{tipos.texto}" itemValue="#{tipos}" />
                                    <p:ajax listener="#{adquisicionesView.actualizarContribuyente()}" update="contribuyente,clasificacionTipoGrid"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Contribuyente Especial:" style="font-weight: bold"/>
                                <p:selectBooleanButton id="contribuyente" value="#{adquisicionesView.clienteProveedor.contribuyenteEspecial}" onLabel="Si" offLabel="No" 
                                                       disabled="#{adquisicionesView.habilitarContribuyente}"
                                                       onIcon="fa fa-check" offIcon="fa fa-times" style="width:30%">
                                    <p:ajax update="clasificacionTipoGrid"/>
                                </p:selectBooleanButton>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" id="resolucion" 
                                         rendered="#{adquisicionesView.clienteProveedor.contribuyenteEspecial}">
                                <p:outputLabel for="@next" value="Resolución SRI:" style="font-weight: bold"/>
                                <p:inputText id="resolucionProveedor" style="width: 100%" onkeypress="focusNextOnEnter(event, 'resolucionProveedor')"
                                             value="#{adquisicionesView.clienteProveedor.resolucionSri}"/> 
                            </p:panelGrid>
                        </p:panelGrid>
                        <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <p:panelGrid columns="1" layout="grid" >
                                <p:outputLabel for="@next" value="Observación" style="width: 100%; font-weight: bold"/>
                                <p:inputTextarea  id="observacion" rows="1" cols="65" style="text-transform: uppercase;width: 100%" 
                                                  value="#{adquisicionesView.proveedor.observacion}" 
                                                  class="panelInput" readonly="false" onkeyup="toUpperCase(this)">
                                </p:inputTextarea>
                            </p:panelGrid> 
                        </p:panelGrid>
                    </p:tab>
                    <p:tab title="Registro del Contacto" id="tabContacto">
                        <p:panelGrid columns="4" layout="grid" styleClass="ui-panelgrid-blank form-group" id="gridContacto">
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Tipo de Identificación:" style="font-weight: bold"/>
                                <p:inputText id="tipoIdentificacionContacto" style="width: 100%;" readonly="true" 
                                             onkeypress="focusNextOnEnter(event, 'tipoIdentificacionContacto')"
                                             value="#{adquisicionesView.contacto.tipoIdentificacion}"/> 
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Nº de Identificación:" style="font-weight: bold"/>
                                <p:inputText id="identificacionContacto" maxlength="10" style="width: 100%;text-transform: uppercase" 
                                             required="#{adquisicionesView.habilitarContribuyente}" readonly="#{adquisicionesView.habilitarContacto}"
                                             onkeyup="toUpperCase(this)" onkeypress="focusNextOnEnter(event, 'identificacionContacto')"
                                             value="#{adquisicionesView.contacto.identificacion}">
                                    <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                    <p:ajax listener="#{adquisicionesView.buscarCliente(false)}" event="blur" update="gridContacto"/>
                                </p:inputText> 
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Nombres:" style="font-weight: bold"/>
                                <p:inputText id="nombreContacto" style="width: 100%;text-transform: uppercase" 
                                             required="#{adquisicionesView.habilitarContribuyente}" readonly="#{adquisicionesView.habilitarContacto}"
                                             onkeyup="toUpperCase(this)" onkeypress="focusNextOnEnter(event, 'nombreContacto')"
                                             value="#{adquisicionesView.contacto.nombre}" /> 
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Apellidos:" style="font-weight: bold"/>
                                <p:inputText id="apellidoContacto" style="width: 100%;text-transform: uppercase" 
                                             required="#{adquisicionesView.habilitarContribuyente}" readonly="#{adquisicionesView.habilitarContacto}"
                                             onkeyup="toUpperCase(this)" onkeypress="focusNextOnEnter(event, 'apellidoContacto')"
                                             value="#{adquisicionesView.contacto.apellido}" /> 
                            </p:panelGrid>
                            <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel for="@next" value="Género:" style="font-weight: bold"/>
                                <p:selectOneMenu id="generoContacto" value="#{adquisicionesView.contacto.genero}"
                                                 converter="#{utilConverter}" style="width: 100%"
                                                 filter="true" filterMatchMode="startsWith">
                                    <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />
                                    <f:selectItems value="#{clienteView.tiposDeGenero}" var="cla" itemLabel="#{cla.texto}" itemValue="#{cla}" itemLabelEscaped="false"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Teléfono:" style="font-weight: bold"/>
                                <p:inputMask id="telefonoContacto" mask="(99)999-9999" placeholder="(99)999-9999" 
                                             style="width: 100%" onkeypress="focusNextOnEnter(event, 'telefonoContacto')"
                                             value="#{adquisicionesView.contacto.telefono}"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel value="Celular:" style="font-weight: bold"/>
                                <p:inputMask mask="(99)9999-9999" placeholder="(99)9999-9999" style="width: 100%" id="celularContacto"
                                             value="#{adquisicionesView.contacto.celular}" onkeypress="focusNextOnEnter(event, 'celularContacto')"/> 
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel value="Email:" style="font-weight: bold"/>
                                <p:inputText style="width: 100%" value="#{adquisicionesView.contacto.email}" id="emailProveedor"
                                             onkeypress="focusNextOnEnter(event, 'emailProveedor')" readonly="#{adquisicionesView.habilitarContacto}"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Dirección:" style="font-weight: bold"/>
                                <p:inputText id="direccionContacto" style="width: 100%;text-transform: uppercase"
                                             required="#{adquisicionesView.habilitarContribuyente}" readonly="#{adquisicionesView.habilitarContacto}"
                                             onkeyup="toUpperCase(this)" onkeypress="focusNextOnEnter(event, 'direccionContacto')"
                                             value="#{adquisicionesView.contacto.direccion}"/> 
                            </p:panelGrid>
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel  for="@next" value="Provincia:" style="font-weight: bold"/>
                                <p:selectOneMenu id="provinciaContacto" value="#{adquisicionesView.provinciaContacto}" converter="#{utilConverter}"
                                                 filter="true" filterMatchMode="startsWith" 
                                                 style="width: 100%" panelStyle="width:125px">
                                    <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
                                    <f:selectItems value="#{adquisicionesView.provincias}" var="provincia" itemLabel="#{provincia.provincia}" 
                                                   itemValue="#{provincia}" />
                                    <p:ajax update="cantonContacto" listener="#{adquisicionesView.actualizarCantones('CONTACTO')}"/>
                                </p:selectOneMenu>
                            </p:panelGrid>    
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel  for="@next" value="Cantón:" style="font-weight: bold"/>
                                <p:selectOneMenu id="cantonContacto" value="#{adquisicionesView.contacto.canton}" converter="#{utilConverter}"
                                                 filter="true" filterMatchMode="startsWith"
                                                 style="width: 100%;" panelStyle="width:125px">
                                    <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" />
                                    <f:selectItems value="#{adquisicionesView.cantonContacto}" var="canton" itemLabel="#{canton.canton}" 
                                                   itemValue="#{canton}" />
                                </p:selectOneMenu>
                            </p:panelGrid>  
                        </p:panelGrid>
                    </p:tab>
                    <p:tab title="Cuenta Bancaria" id="entidadBancariaTab">
                        <p:commandButton value="Buscar Entidad Bancaria" id="aniadirCuenta" process="@this" update="entidadBancariaTable"
                                         icon="fa fa-user-plus" actionListener="#{adquisicionesView.openDlgBanco()}"
                                         style="width: auto; margin: 10px 0px" styleClass="Fs16">
                        </p:commandButton>
                        <p:dataTable  id="entidadBancariaTable" widgetVar="entidadBancariaTable" var="detalleBanco" value="#{adquisicionesView.detalleBancoList}" 
                                      scrollable="true" scrollHeight="100" rows="20" style="width: 100%"  editable="true" editMode="cell"
                                      emptyMessage="No existen cuentas con el criterio de búsqueda especificado">
                            <p:column headerText="Banco" style="width: 10vw">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{detalleBanco.banco.nombreBanco}" /></f:facet>
                                    <f:facet name="input"><p:inputText id="modelInput" value="#{detalleBanco.banco.nombreBanco}"/></f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Cuenta" style="width: 7vw">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{detalleBanco.cuentaBanco}" /></f:facet>
                                    <f:facet name="input">
                                        <p:inputText value="#{detalleBanco.cuentaBanco}" maxlength="16" >
                                            <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                        </p:inputText>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Tipo de Cuenta" style="width: 7vw">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{detalleBanco.tipoCuenta.texto}" /></f:facet>
                                    <f:facet name="input">
                                        <h:selectOneMenu value="#{detalleBanco.tipoCuenta}" style="width:100%" converter="#{utilConverter}">
                                            <f:selectItem itemLabel="Seleccione..."/>
                                            <f:selectItems value="#{proveedorView.tipoCuentaBancaria}" var="ti" itemLabel="#{ti.texto}" itemValue="#{ti}"/>
                                        </h:selectOneMenu>
                                    </f:facet>
                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Registro" style="width: 7vw">
                                <p:cellEditor>
                                    <f:facet name="output"><h:outputText value="#{detalleBanco.registro}" /></f:facet>
                                    <f:facet name="input"><p:inputText value="#{detalleBanco.registro}" style="text-transform: uppercase" onkeyup="toUpperCase(this)"/>
                                    </f:facet>

                                </p:cellEditor>
                            </p:column>
                            <p:column headerText="Estado de la Cuenta" style="width:7vw;text-align: center">
                                <p:selectBooleanCheckbox value="#{detalleBanco.estadoCuenta}" >
                                    <p:ajax update="entidadBancariaTable" process="@this"/>
                                </p:selectBooleanCheckbox>
                            </p:column>
                            <p:column headerText="Quitar" style="width:4vw;text-align: center">
                                <p:commandLink actionListener="#{adquisicionesView.removerCuentaBancaria(detalleBanco)}" title="Quitar" 
                                               process="@this" update=":registroProveedor:tabViewProveedor:entidadBancariaTable">
                                    <i class="fa fa-minus-circle" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                    </p:tab>
                </p:tabView>
                <center>
                    <p:commandButton value="Guardar Proveedor" id="saveProveedor2" style="margin: 10px" update=":registroProveedor" 
                                     icon="ui-icon-save" actionListener="#{adquisicionesView.guardarAñadirProveedor()}" 
                                     styleClass="Fs16"/>    
                </center>
            </h:form>
        </p:dialog>

        <p:dialog id="BancosDlg" widgetVar="BancosDlg" width="30%" modal="true" showEffect="fade"  draggable="false"
                  hideEffect="fade" resizable="false" position="center">
            <h:form  prependId="false">
                <h:panelGroup id="formBanco" layout="block">
                    <p:dataTable  id="datosDelBancoTable" widgetVar="datosDelBancoTable" var="banco" value="#{adquisicionesView.bancoLazyModel}" 
                                  scrollable="true" scrollHeight="350" lazy="true" rows="20000" style="width: 100%" rowKey="#{banco.id}"
                                  emptyMessage="No existen cuentas con el criterio de búsqueda especificado">
                        <f:facet name="header">
                            LISTADO DE ENTIDADES BANCARIAS
                        </f:facet>
                        <p:column headerText="Nombre del Banco" filterBy="#{banco.nombreBanco}">
                            <h:outputText value="#{banco.nombreBanco}"/>
                        </p:column>
                        <p:column headerText="Código del Bco. Central" filterBy="#{banco.cuentaCorriente}" style="text-align: center">
                            <h:outputText value="#{banco.cuentaCorriente}"/>
                        </p:column>
                        <p:column headerText="Seleccionar"  style="width: 4vw;text-align: center">
                            <p:commandLink actionListener="#{adquisicionesView.añadirBanco(banco)}" title="Seleccionar" process="@this"
                                           update=":registroProveedor:tabViewProveedor:entidadBancariaTable">
                                <i class="fa fa-plus-circle" style="font-size: 1.5em; margin-right: 8px; color: #33cc00;"></i>
                            </p:commandLink>
                        </p:column>
                    </p:dataTable>
                </h:panelGroup>
            </h:form>
        </p:dialog>

        <p:dialog id="viewDocumentoDlg" header="Documento Adjunto" widgetVar="viewDocumentoDlg" position="top" style="margin-top: 150px"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false" width="60%">
            <h:form id="viewDocumentoForm" prependId="false">
                <u:documents entiti="#{adquisicionesView.adquisiciones}"/>
            </h:form>
        </p:dialog>

    </ui:define>
</ui:composition>
