<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:u="http://xmlns.jcp.org/jsf/composite/comp"
                xmlns:sigef="http://xmlns.jcp.org/jsf/composite/sigef/components"
                template="/WEB-INF/template/template.xhtml">
    <f:view encoding="UTF-8"></f:view>
    <ui:define name="title">Programación Egreso</ui:define>
    <ui:define name="content">        
        <h:form id="tablepr" prependId="false">   
            <div class="ui-g ui-fluid">
                <div class="ui-g">
                    <div class="ui-g-12">
                        <div class="card card-w-title">
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">

                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                    <u:titleTask task="#{pemView.tarea}" tramite="#{pemView.tramite}" />
                                </p:panelGrid>
                            </p:panelGrid>
                            <p:fieldset legend="Buscar" toggleable="true" toggleSpeed="500" >
                                <p:panelGrid columns="4" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <p:outputLabel value="Período" escape="false"/>
                                        <p:selectOneMenu  value="#{pemView.busqueda.anio}">
                                            <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                            <f:selectItems value="#{pemView.periodosEgreso}" var="p" itemLabel="#{p.periodo}" itemValue="#{p.periodo}"/>
                                        </p:selectOneMenu>
                                    </p:panelGrid>
                                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <p:outputLabel value=""/>
                                        <p:commandLink title="Buscar"  action="#{pemView.actualizar()}" update="dataPimTable">
                                            <p:graphicImage value="/resources/icons/buscar.png"
                                                            width="37" height="37" 
                                                            style="margin:auto;  width: auto;"/>
                                        </p:commandLink>
                                    </p:panelGrid>
                                </p:panelGrid>
                            </p:fieldset>
                            <br></br>
                            <h:panelGroup id="dataPimTable" layout="block">      
                                <h2 style="float: left"><strong>Estado: </strong> #{pemView.estadoGeneral.texto==null?'REGISTRADO':pemView.estadoGeneral.texto}</h2>
                                <p:spacer width="30"/>
                                <p:commandButton disabled="#{pemView.estadoGeneral.codigo=='PRO'?true:false}" actionListener="#{pemView.dlogoObservaciones()}" 
                                                 icon="fa fa-check-circle-o" 
                                                 style="width: auto;margin-bottom:  2%;position: relative; right: 0; background: #0081cb;margin-left: 15px;" 
                                                 value="Completar Tarea"/>
                                <div style="float: right">
                                    <p:commandButton title="Reporte de PEG" actionListener="#{pemView.showOpcionReporte()}" 
                                                     process="@this" class="Fs20" icon="fa fa-print" style="background: #425a70;margin-top: 10px;position: relative;">

                                    </p:commandButton>
                                </div>
                                <p:dataTable id="pemTable" widgetVar="pemTable" var="item" value="#{pemView.lazyEgreso}" paginator="true" rows="15" style="width: 100%;" 
                                             paginatorPosition="bottom" scrollWidth="1400" scrollable="true"
                                             currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}" 
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             rowsPerPageTemplate="15,20,30,40,50,100" lazy="true"  editable="true"  editMode="cell"
                                             emptyMessage="No existen cuentas con el criterio de busqueda especificado" 
                                             selectionMode="single" selection="#{pemView.pemSeleccionado}" rowKey="#{item.id}"
                                             >


                                    <p:columnGroup type="header">
                                        <p:row>
                                            <p:column style="width:16px" />
                                            <p:column headerText="Código" style="width: 100px; font-weight: bold; font-size: 12px;" filterBy="#{item.codigoItem}"/>
                                            <p:column headerText="Descripción" style="width: 100px;text-align: justify"  filterBy="#{item.itemNew.descripcion}"/>
                                            <p:column headerText="Tipo" style="width: 100px;"  filterBy="#{item.tipoCodigo}"/>
                                            <p:column headerText="Distribuir" style="width:100px;text-align: center"/>
                                            <p:column headerText="Monto" style="width: 100px;"/>
                                            <p:column headerText="Enero" style="width:100px;"/>
                                            <p:column headerText="Febrero" style="width:100px;"/>
                                            <p:column headerText="Marzo" style="width:100px;"/>
                                            <p:column headerText="Abril" style="width:100px;"/>
                                            <p:column headerText="Mayo" style="width:100px;"/>
                                            <p:column headerText="Junio" style="width: 100px;"/>
                                            <p:column headerText="Julio" style="width:100px;"/>
                                            <p:column headerText="Agosto" style="width: 100px;"/>
                                            <p:column headerText="Septiembre" style="width: 100px;"/>
                                            <p:column headerText="Octubre" style="width: 100px;"/>
                                            <p:column headerText="Noviembre" style="width: 100px;"/>                 
                                            <p:column headerText="Diciembre" style="width: 100px;"/>
                                            <p:column headerText="Total PEG" style="width: 100px;"/>                                          
                                        </p:row>
                                    </p:columnGroup>
                                    <p:column >
                                        <p:rowToggler/>
                                    </p:column>
                                    <p:column >
                                        <h:outputText value="#{item.codigoItem}"/>
                                    </p:column>
                                    <p:column >
                                        <h:outputText value="#{item.itemNew.descripcion.toUpperCase()}"/>
                                    </p:column>
                                    <p:column>
                                        <h:outputText value="#{item.tipoCodigo}"/>
                                    </p:column>
                                    <p:column>
                                        <p:selectBooleanCheckbox value="#{item.distribucion}"  disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <p:ajax update="pemTable,tablepr" listener="#{pemView.distribucion(item)}" process="@this"/>
                                        </p:selectBooleanCheckbox>
                                    </p:column>
                                    <p:column>
                                        <h:outputText value="#{item.montoActividad}" style="float: right;font-weight: bold;" >
                                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                        </h:outputText>
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output"><h:outputText value="#{item.enero}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.enero}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item, 1)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output"><h:outputText value="#{item.febrero}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.febrero}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item,2)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{ pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output"><h:outputText value="#{item.marzo}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.marzo}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item,3)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>                                   
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output"><h:outputText value="#{item.abril}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.abril}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item,4)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output"><h:outputText value="#{item.mayo}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.mayo}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item,5)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>                                   
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output"><h:outputText value="#{item.junio}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.junio}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item,6)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>                                   
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output"><h:outputText value="#{item.julio}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.julio}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item,7)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>                                   
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output"><h:outputText value="#{item.agosto}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.agosto}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item,8)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>                                    
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output"><h:outputText value="#{item.septiembre}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.septiembre}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item,9)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>                                  
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output"><h:outputText value="#{item.octubre}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.octubre}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item,10)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>                                 
                                    </p:column>
                                    <p:column >
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output">

                                                <h:outputText value="#{item.noviembre}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.noviembre}" label="Enero">
                                                    <p:ajax event="blur" listener="#{pemView.gaurdarPem(item,11)}" update="pemTable,tablepr"/>
                                                </p:inputNumber>
                                            </f:facet>

                                        </p:cellEditor>

                                    </p:column>
                                    <p:column >    
                                        <p:cellEditor disabled="#{pemView.estadoGeneral ne null and pemView.estadoGeneral.codigo=='PRO'?true:false}">
                                            <f:facet name="output">
                                                <h:outputText value="#{item.diciembre}" style="float: right;">
                                                    <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                </h:outputText>
                                            </f:facet>
                                            <f:facet name="input">
                                                <p:inputNumber value="#{item.diciembre}" label="Enero">
                                                    <p:ajax event="valueChange" oncomplete="update()"/>
                                                </p:inputNumber>
                                            </f:facet>
                                        </p:cellEditor>

                                    </p:column>

                                    <p:column >
                                        <h:outputText value="#{item.totalAnio}" style="font-weight: bold;float: right;">
                                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                        </h:outputText>
                                    </p:column>

                                    <p:columnGroup type="footer" >
                                        <p:row  >
                                            <p:column style="text-align:left" footerText=""/>
                                            <p:column style="text-align:left" footerText=""/>
                                            <p:column style="text-align:left" footerText=""/>
                                            <p:column style="text-align:left" footerText=""/>
                                            <p:column style="text-align:right; font: 14px;" footerText="Total:"  class="FontBold"/>

                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalMonto}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>


                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalEnero}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>


                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalFebrero}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>


                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalMarzo}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>

                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalAbril}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>
                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalMayo}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>
                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalJunio}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>


                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalJulio}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>


                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalAgosto}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>


                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalSeptiembre}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>


                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalOctubre}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>


                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalNoviembre}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>


                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalDiciembre}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>

                                            <p:column style="text-align: right;font-weight: bold; font-size: 14px;">
                                                <f:facet name="footer">
                                                    <h:outputText value="#{pemView.totalPem}">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </f:facet>
                                            </p:column>

                                        </p:row>
                                    </p:columnGroup>

                                    <p:rowExpansion>
                                        <br></br>
                                        <br></br>
                                        <h:panelGroup id="dataRowTable" layout="block">                          

                                            <p:dataTable id="rowTable" widgetVar="rowTable" var="pro" value="#{pemView.viewActividadByProducto(item)}" 
                                                         paginator="true" rows="5" style="width: 100%;" 
                                                         paginatorPosition="bottom"
                                                         currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}" 
                                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                         rowsPerPageTemplate="5,10,20" 
                                                         emptyMessage="No existen actividades registradas">

                                                <p:column headerText="Producto" style="width: 20%; text-align: justify" >
                                                    <h:outputText value="#{pro.descripcion}"/>
                                                </p:column>
                                                <p:column headerText="Monto del Producto" style="width: 70px">
                                                    <h:outputText value="#{pro.monto}" style="float:right;">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="Actividad" style="width: 20%; text-align: justify">
                                                    <h:outputText value="#{pro.actividadOperativa.nombreActividad}" />
                                                </p:column>
                                                <p:column headerText="Monto de la Actividad" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.monto}" style="float:right;">
                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                    </h:outputText>
                                                </p:column>
                                                <p:column headerText="N-Plan-Eenro" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.enero}" style="float: right;"/>
                                                </p:column>   
                                                <p:column headerText="N-Plan-Febrero" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.febrero}" style="float: right;"/>
                                                </p:column>   

                                                <p:column headerText="N-Plan-Marzo" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.marzo}" style="float: right;"/>
                                                </p:column>   

                                                <p:column headerText="N-Plan-Abril" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.abril}" style="float: right;"/>
                                                </p:column>   

                                                <p:column headerText="N-Plan-Mayo" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.mayo}" style="float: right;"/>
                                                </p:column>   

                                                <p:column headerText="N-Plan-Junio" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.junio}" style="float: right;"/>
                                                </p:column>   

                                                <p:column headerText="N-Plan-Julio" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.julio}" style="float: right;"/>
                                                </p:column>   

                                                <p:column headerText="N-Plan-Agosto" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.agosto}" style="float: right;"/>
                                                </p:column>   

                                                <p:column headerText="N-Plan-Septiembre" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.septiembre}" style="float: right;"/>
                                                </p:column>   

                                                <p:column headerText="N-Plan-Octubre" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.octubre}" style="float: right;"/>
                                                </p:column>   

                                                <p:column headerText="N-Plan-Noviembre" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.noviembre}" style="float: right;"/>
                                                </p:column>   

                                                <p:column headerText="N-Plan-Diciembre" style="width: 70px">
                                                    <h:outputText value="#{pro.actividadOperativa.diciembre}" style="float: right;"/>
                                                </p:column>   

                                            </p:dataTable>  
                                        </h:panelGroup>                                
                                        <br></br>
                                        <br></br>
                                    </p:rowExpansion>
                                    <p:column rendered="false"  headerText="Acciones" style="text-align: center; width: 8%" >
                                        <p:commandLink  disabled="#{pemView.estadoGeneral.codigo=='PRO'?true:false}" title="Registrar Montos Mensuales" actionListener="#{pemView.dialog(item)}" process="@this">
                                            <p:graphicImage value="/resources/icons/editar.png"
                                                            width="25" height="20" 
                                                            style="margin:auto;  width: auto;"/>    
                                        </p:commandLink>                                
                                    </p:column>
                                </p:dataTable>
                            </h:panelGroup>
                        </div> 
                    </div>
                </div>
            </div>
            <p:dialog id="planDialog" closeOnEscape="true" header="Registros de Monto de Meses"
                      widgetVar="planDialog" modal="true" position="center" showEffect="fade"
                      hideEffect="fade" resizable="false">
                <p:ajax event="close" listener="#{pemView.handleCloseForm}" />
                <div class="ui-g">
                    <div class="ui-g-12">
                        <div class="card card-w-title">
                            <p:outputPanel id="formMonto" style="width: 100%;" >
                                <p:fieldset legend="Primer Cuatrimestre" rendered="#{!pemView.renderedElementForm()}">
                                    <p:panelGrid columns="4" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Enero:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.enero}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Febrero:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.febrero}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Marzo:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.marzo}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Abril:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.abril}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                    </p:panelGrid>
                                </p:fieldset>
                                <p:fieldset legend="Segundo Cuatrimestre" rendered="#{!pemView.renderedElementForm()}">
                                    <p:panelGrid columns="4" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Mayo:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.mayo}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Junio:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.junio}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Julio:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.julio}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Agosto:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.agosto}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                    </p:panelGrid>
                                </p:fieldset>
                                <p:fieldset legend="Tercer Cuatrimestre" rendered="#{!pemView.renderedElementForm()}">
                                    <p:panelGrid columns="4" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Septiembre:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.septiembre}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Octubre:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.octubre}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Noviembre:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.noviembre}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Diciembre:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.diciembre}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                    </p:panelGrid>
                                </p:fieldset>

                                <p:fieldset legend="Asignación Cuatrimestral " rendered="#{pemView.renderedElementForm()}">
                                    <p:panelGrid columns="3" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Primer Cuatrimestre:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.montoCuatrimestre1}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Segundo Cuatrimestre:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.montoCuatrimestre2}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                            <p:outputLabel  value="Tercer Cuatrimestre:" style="width: 100%;"/>
                                            <p:inputNumber class="panelInput" value="#{pemView.pem.montoCuatrimestre3}">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputNumber>
                                        </p:panelGrid>
                                    </p:panelGrid>
                                </p:fieldset>
                                <br></br>
                                <center>
                                    <p:commandButton value="Guardar" id="buscar-save"
                                                     icon="ui-icon-save"  actionListener="#{pemView.guardar()}"
                                                     styleClass="Fs16"/>
                                </center>
                            </p:outputPanel>
                        </div>
                    </div>
                </div>
            </p:dialog>   
        </h:form>

        <p:dialog id="dlgObservaciones" widgetVar="dlgObservaciones" width="30%" position="center" draggable="false" header="Observación"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false" >
            <div class="ui-g-12" >
                <h:form id="frmDlgObser">
                    <p:outputPanel id="panelObsevacion" style="width: 100%;" >
                        <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" >
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:inputTextarea value="#{pemView.observaciones}" onkeyup="toUpperCase(this)"
                                                 rows="7" style="border: 1px solid;text-transform: uppercase;width: 100%;border-radius: 5px 5px 5px 5px;"/>
                            </h:panelGroup> 
                        </p:panelGrid>
                        <center>
                            <p:commandButton icon="fa fa-thumbs-o-up" value="Aprobar"  title="Culminar Tarea" process="frmDlgObser" update="frmDlgObser"
                                             actionListener="#{pemView.completarTarea()}" style="width: 150px;margin: 10px"  />
                            <p:commandButton icon="fa fa-thumbs-o-remove" value="Cerrar" onclick="PF('dlgObservaciones').hide()"
                                             style="background: red; width: 150px;margin: 10px" />
                        </center> 
                    </p:outputPanel>
                </h:form>  
            </div>
        </p:dialog>

        <p:dialog id="dlgPrint" header="Generar Reporte Programación de Ejecución de Gastos" widgetVar="dlgPrint" modal="true" showEffect="fade" hideEffect="fade" resizable="false" width="320">
            <h:form id="frmldlgprint" prependId="false">
                <div class="ui-g">
                    <div class="ui-g-12">
                        <div class="card card-w-title">

                            <p:outputPanel id="panelPrintPEG" style="width: 100%">
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                        <p:outputLabel title="Tipo" for="selectTipo" value="Tipo" style="width: 100%; font-weight: bold"/>
                                        <p:selectOneMenu  id="selectTipo" value="#{pemView.tipoReporte}" style=" width: 100%">
                                            <f:selectItem itemLabel="Seleccione..."   itemValue="#{null}"/>
                                            <f:selectItem itemLabel="General"   itemValue="true"/>
                                            <f:selectItem itemLabel="Detallado"   itemValue="false"/>
                                        </p:selectOneMenu>
                                    </p:panelGrid>
                                </p:panelGrid>
                                <br></br>
                                <center>
                                    <!--<div style="float: right">-->
                                    <p:commandLink title="Reporte de PEG en pdf" actionListener="#{pemView.reportePEG('pdf')}" process="@form" >
                                        <i class="fa fa-file-pdf-o blue1 Fs20" />
                                    </p:commandLink>
                                    <p:commandLink title="Reporte de PEG en excel" actionListener="#{pemView.reportePEG('xlsx')}" process="@form" >
                                        <i class="fa fa-file-excel-o blue2 Fs20" />
                                    </p:commandLink>
                                    <p:commandLink title="Reporte de PEG en word" actionListener="#{pemView.reportePEG('docx')}" process="@form" >
                                        <i class="fa fa-file-word-o blue3 Fs20" />
                                    </p:commandLink>
                                    <!--</div>-->
                                </center>
                            </p:outputPanel>
                        </div>
                    </div>
                </div>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>