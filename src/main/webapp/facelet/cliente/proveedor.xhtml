<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:sigef="http://xmlns.jcp.org/jsf/composite/sigef/components"
                template="/WEB-INF/template/template.xhtml">

    <ui:define name="title">
        Proveedores
    </ui:define>
    <ui:param name="tittle" value="Proveedores"/>
    <ui:define name="content">
        <div class="ui-g ui-fluid">
            <div class="ui-g-12" >
                <h:form id="formMain" prependId="false">
                    <h:panelGroup id="dataTableProveedor" rendered="#{proveedorView.vistaFormulario}">
                        <p:panelGrid columns="6" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:commandButton value="Nuevo registro" process="@this"
                                                 icon="fa fa-plus-circle" actionListener="#{proveedorView.fomulario(null,false)}"
                                                 styleClass="Fs16" style="width: 100%;background: green"/>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:commandButton value="Limpiar filtros"  process="@this"
                                                 icon="ui-icon-refresh" onclick="PF('proveedorDateTable').clearFilters()" update="proveedorDateTable"
                                                 styleClass="Fs16" style="width: 100%;"/>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:commandButton id="mostrarColumnas" type="button" value="Columnas visibles" style="width: 100%;" icon="fa fa-align-justify" />
                                <p:columnToggler datasource="proveedorDateTable" trigger="mostrarColumnas" />
                            </h:panelGroup>
                        </p:panelGrid>
                        <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <p:dataTable id="proveedorDateTable" widgetVar="proveedorDateTable" var="proveedor" 
                                         paginator="true" rows="40" style="width: 100%;margin-top: 15px" paginatorPosition="bottom"
                                         value="#{proveedorView.proveedorLazyModel}" lazy="true"
                                         currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}" filterEvent="enter"
                                         paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         rowsPerPageTemplate="40,50,60,100" rowKey="#{proveedor.id}" rowIndexVar="num"
                                         emptyMessage="No existe información con el criterio de busqueda especificado">
                                <p:column headerText="No" style="width: 4%;text-align: center">
                                    <h:outputText value="#{num+1}" />
                                </p:column>
                                <p:column headerText="Identificación" style="width: 8%;text-align: center" filterBy="#{proveedor.cliente.identificacionCompleta}" filterMatchMode="contains">
                                    <h:outputText value="#{proveedor.cliente.identificacionCompleta}" />
                                </p:column> 
                                <p:column headerText="Tipo Identificación" style="width: 9%;text-align:center"  filterBy="#{proveedor.cliente.tipoIdentificacion.texto}">
                                    <h:outputText value="#{proveedor.cliente.tipoIdentificacion.texto }" />
                                </p:column> 
                                <p:column headerText="Razón Social" style="width: 20%;" filterBy="#{proveedor.cliente.nombre}" filterMatchMode="contains">
                                    <h:outputText  value="#{proveedor.cliente.tipoIdentificacion.codigo eq 'C' ? proveedor.cliente.nombreCompleto : proveedor.cliente.nombre }"/>
                                </p:column>
                                <p:column headerText="Clasificación" style="width: 8%;text-align: center" filterBy="#{proveedor.cliente.clasificacionProv.texto}" filterMatchMode="contains">
                                    <h:outputText  value="#{proveedor.cliente.clasificacionProv.texto}"/>
                                </p:column>
                                <p:column headerText="Tipo" style="width: 14%;" filterBy="#{proveedor.cliente.tipoProv.texto}" filterMatchMode="contains">
                                    <h:outputText  value="#{proveedor.cliente.tipoProv.texto}"/>
                                </p:column>
                                <p:column headerText="Representante Legal/Contacto" style="width: 15%;" filterBy="#{proveedor.contacto.nombre}" filterMatchMode="contains">
                                    <h:outputText  value="#{proveedor.contacto.nombreCompleto}"/>
                                </p:column>
                                <p:column headerText="E-mail" style="width: 14%;" >
                                    <h:outputText value="#{proveedor.cliente.email}"/>
                                </p:column>
                                <p:column headerText="Acciones" style="width: 8%;text-align: center" >
                                    <p:commandLink actionListener="#{proveedorView.fomulario(proveedor,true)}" title="Ver Proveedor" process="@this">
                                        <i class="fa fa-eye" style="font-size: 1.5em; margin-right: 3px; color: #0D47A1;"></i>
                                    </p:commandLink>
                                    <p:commandLink actionListener="#{proveedorView.fomulario(proveedor,false)}" title="Editar Proveedor" process="@this">
                                        <i class="fa fa-edit" style="font-size: 1.5em; margin-right: 3px; color: #0D47A1;"></i>
                                    </p:commandLink>
                                    <p:commandLink title="Eliminar Proveedor" actionListener="#{proveedorView.deleteProveedor(proveedor)}" process="@this">
                                        <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 3px; color: red;"></i>
                                        <p:confirm header="Confirmación de eliminación" message="¿Esta seguro de eliminar el proveedor #{proveedor.cliente.identificacionCompleta}, recuerde que no estara disponible en los procesos/tramites que estan en cola?" icon="fa fa-exclamation-triangle" />
                                    </p:commandLink>

                                </p:column> 
                            </p:dataTable>
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                            </p:confirmDialog>
                        </p:panelGrid>   
                    </h:panelGroup>
                    <h:panelGroup id="formProveedor" rendered="#{!proveedorView.vistaFormulario}">
                        <p:panelGrid columns="6" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:commandButton value="Retornar listado" process="@this"
                                                 icon="fa fa-list" actionListener="#{proveedorView.returnListado()}"
                                                 styleClass="Fs16" style="width: 100%;background: green"/>
                            </h:panelGroup>
                        </p:panelGrid>
                        <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <p:fieldset legend="Datos de proveedor" id="fielsetProveedor">
                                <p:panelGrid columns="3" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{proveedorView.proveedor.id ==null ? true:false}">
                                        <p:outputLabel for="@next" value="Tipo de identificación:" style="font-weight: bold"/>
                                        <p:selectOneMenu id="tipoIdentificacionProveedor" value="#{proveedorView.clienteProveedor.tipoIdentificacion}" converter="#{utilConverter}"
                                                         filter="true" filterMatchMode="startsWith" style="width: 100%">
                                            <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{proveedorView.tiposIdentificacion}" var="cla" itemLabel="#{cla.texto}" itemValue="#{cla}"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{proveedorView.proveedor.id ==null ? true:false}">
                                        <p:outputLabel for="@next" value="Identificación:" style="font-weight: bold"/>
                                        <div class="ui-inputgroup">
                                            <p:inputText id="identificacionProveedor" class="panelInput" value="#{proveedorView.clienteProveedor.identificacion}"
                                                         onkeypress="focusNextOnEnter(event, 'identificacionProveedor')" maxlength="13">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputText>
                                            <p:commandButton title="Buscar" icon="fa fa-search" id="btnIdentificacion"
                                                             actionListener="#{proveedorView.findProveedor(true)}"
                                                             update="fielsetProveedor" process="identificacionProveedor, tipoIdentificacionProveedor" styleClass="button-group">
                                            </p:commandButton>
                                        </div>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{proveedorView.proveedor.id ==null ? false:true}">
                                        <p:outputLabel for="@next" value="Tipo identificación" style="font-weight: bold;"/>
                                        <p:inputText id="tipoIdentificacionProveedorView" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'tipoIdentificacionProveedorView')"
                                                     value="#{proveedorView.clienteProveedor.tipoIdentificacion.texto}" readonly="true"/> 
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{proveedorView.proveedor.id ==null ? false:true}">
                                        <p:outputLabel for="@next" value="Identificación:" style="font-weight: bold;"/>
                                        <p:inputText id="identificacionProveedorView" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'identificacionProveedorView')"  
                                                     value="#{proveedorView.clienteProveedor.identificacion}" readonly="true"/> 
                                    </h:panelGroup>
                                </p:panelGrid>
                                <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Razón Social:" style="font-weight: bold;"/>
                                        <p:inputText id="razonSocial" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'razonSocial')"
                                                     value="#{proveedorView.clienteProveedor.nombre}" readonly="#{proveedorView.view}" /> 
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Nombre Comercial:" style="font-weight: bold;"/>
                                        <p:inputText id="nombreComercial" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'nombreComercial')"  maxlength="30"
                                                     value="#{proveedorView.clienteProveedor.apellido}" readonly="#{proveedorView.view}" /> 
                                    </h:panelGroup>
                                </p:panelGrid>
                                <p:panelGrid columns="3" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Dirección:" style="font-weight: bold;"/>
                                        <p:inputText id="direccionProveedor" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'direccionProveedor')"
                                                     value="#{proveedorView.clienteProveedor.direccion}" readonly="#{proveedorView.view}" /> 
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel  for="@next" value="Provincia:" style="font-weight: bold"/>
                                        <p:selectOneMenu id="provinciaProveedor" value="#{proveedorView.provinciaProveedor}" converter="#{utilConverter}"
                                                         filter="true" filterMatchMode="contains" disabled="#{proveedorView.view}" style="width: 100%">
                                            <f:selectItem itemLabel="Seleccionar" itemValue="#{null}"/>
                                            <f:selectItems value="#{proveedorView.provincias}" var="provincia" itemLabel="#{provincia.provincia}" itemValue="#{provincia}"/>
                                            <p:ajax update="gridCantonesProveedores" listener="#{proveedorView.actualizarCantones(true)}"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" id="gridCantonesProveedores">
                                        <p:outputLabel  for="@next" value="Cantón:" style="font-weight: bold"/>
                                        <p:selectOneMenu id="cantonProveedor" value="#{proveedorView.clienteProveedor.canton}" converter="#{utilConverter}"
                                                         filter="true" filterMatchMode="contains" disabled="#{proveedorView.view}" style="width: 100%;">
                                            <f:selectItem itemLabel="Seleccionar" itemValue="#{null}"/>
                                            <f:selectItems value="#{proveedorView.cantonProveedor}" var="canton" itemLabel="#{canton.canton}" itemValue="#{canton}"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Email:" style="font-weight: bold"/>
                                        <p:inputText id="emailProveedor" style="width: 100%" value="#{proveedorView.clienteProveedor.email}" 
                                                     onkeypress="focusNextOnEnter(event, 'emailProveedor')" readonly="#{proveedorView.view}"/>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Teléfono:" style="font-weight: bold"/>
                                        <p:inputMask id="telefonoProveedor" mask="(99)999-9999" placeholder="(99)999-9999" 
                                                     style="width: 100%" readonly="#{proveedorView.view}"                                                   
                                                     value="#{proveedorView.clienteProveedor.telefono}" onkeypress="focusNextOnEnter(event, 'telefonoProveedor')"  />
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Celular:" style="font-weight: bold"/>
                                        <p:inputMask id="celularProveedor" mask="(99)9999-9999" placeholder="(99)9999-9999" 
                                                     style="width: 100%" readonly="#{proveedorView.view}"
                                                     value="#{proveedorView.clienteProveedor.celular}" onkeypress="focusNextOnEnter(event, 'celularProveedor')"/> 
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Tipo Negocio:" style="font-weight: bold"/>
                                        <p:selectOneMenu id="tipoNegocidoProveedor" value="#{proveedorView.clienteProveedor.tipoDeNegocio}" 
                                                         style="width:100%"  disabled="#{proveedorView.view}">
                                            <f:selectItem itemLabel="Seleccione"  itemValue="" />
                                            <f:selectItem itemLabel="COMERCIAL"  itemValue="COMERCIAL" />
                                            <f:selectItem itemLabel="FUNDACIÓN"  itemValue="FUNDACIÓN" />
                                            <f:selectItem itemLabel="ASOCIACIÓN"  itemValue="ASOCIACIÓN" />
                                            <f:selectItem itemLabel="RELIGIOSO"  itemValue="RELIGIOSO" />
                                            <f:selectItem itemLabel="PÚBLICA"  itemValue="PÚBLICA" />
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Clasificación:" style="font-weight: bold"/>
                                        <p:selectOneMenu id="clasificaciones" value="#{proveedorView.clienteProveedor.clasificacionProv}" 
                                                         style="width:100%" converter="#{utilConverter}"  disabled="#{proveedorView.view}">
                                            <f:selectItem itemLabel="Seleccione"  itemValue="#{null}"/>
                                            <f:selectItems value="#{proveedorView.clasificaciones}" var="clasificacion"
                                                           itemLabel="#{clasificacion.texto}" itemValue="#{clasificacion}" />
                                            <p:ajax listener="#{proveedorView.actualizarTipo()}" update="tipos"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Tipo:" style="font-weight: bold"/>   
                                        <p:selectOneMenu id="tipos" value="#{proveedorView.clienteProveedor.tipoProv}" 
                                                         style="width:100%" converter="#{utilConverter}"  disabled="#{proveedorView.view}">
                                            <f:selectItem itemLabel="Seleccione"  itemValue="#{null}" />
                                            <f:selectItems value="#{proveedorView.tipos}" var="tipos"
                                                           itemLabel="#{tipos.texto}" itemValue="#{tipos}" />
                                            <p:ajax listener="#{proveedorView.actualizarContribuyente()}" update="gridContribuyente" />
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                </p:panelGrid>
                                <p:panelGrid columns="3" layout="grid" styleClass="ui-panelgrid-blank form-group" id="gridContribuyente">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Contribuyente Especial:" style="font-weight: bold"/>
                                        <p:selectBooleanButton id="contribuyente" value="#{proveedorView.clienteProveedor.contribuyenteEspecial}"
                                                               onLabel="Si" offLabel="No" disabled="#{proveedorView.view}" 
                                                               onIcon="fa fa-check" offIcon="fa fa-times" style="width: 100%">
                                            <p:ajax update="gridContribuyente"/>
                                        </p:selectBooleanButton>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{proveedorView.clienteProveedor.contribuyenteEspecial}">
                                        <p:outputLabel for="@next" value="Resolución SRI:" style="font-weight: bold"/>
                                        <p:inputText id="resolucionProveedor" style="width: 100%" value="#{proveedorView.clienteProveedor.resolucionSri}"
                                                     onkeypress="focusNextOnEnter(event, 'resolucionProveedor')" readonly="#{proveedorView.view}"/> 
                                    </h:panelGroup>
                                </p:panelGrid>
                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Actividad Comercial: " style="width: 100%; font-weight: bold"/>
                                        <p:inputText  id="actividadComercial" style="text-transform: uppercase;width: 100%" 
                                                      value="#{proveedorView.proveedor.actividadComercial}" readonly="#{proveedorView.view}"
                                                      class="panelInput" onkeyup="toUpperCase(this)">
                                        </p:inputText>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Observación:" style="width: 100%; font-weight: bold"/>
                                        <p:inputTextarea  id="observacion" rows="2" style="text-transform: uppercase;width: 100%" 
                                                          value="#{proveedorView.proveedor.observacion}" readonly="#{proveedorView.view}"
                                                          class="panelInput" onkeyup="toUpperCase(this)">
                                        </p:inputTextarea>
                                    </h:panelGroup>
                                </p:panelGrid>
                            </p:fieldset>
                            <p:fieldset legend="Datos de contacto" id="fieldContacto">
                                <p:panelGrid columns="3" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{!proveedorView.view}">
                                        <p:outputLabel for="@next" value="Tipo de identificación:" style="font-weight: bold"/>
                                        <p:selectOneMenu id="tipoIdentificacionContacto" value="#{proveedorView.clienteContacto.tipoIdentificacion}" converter="#{utilConverter}" 
                                                         filter="true" filterMatchMode="startsWith" style="width: 100%">
                                            <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true" />
                                            <f:selectItems value="#{proveedorView.tiposIdentificacion}" var="cla" itemLabel="#{cla.texto}" itemValue="#{cla}"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{!proveedorView.view}">
                                        <p:outputLabel for="@next" value="Identificación:" style="font-weight: bold"/>
                                        <div class="ui-inputgroup">
                                            <p:inputText id="identificacionContacto" class="panelInput" value="#{proveedorView.clienteContacto.identificacion}"
                                                         onkeypress="focusNextOnEnter(event, 'identificacionContacto')" maxlength="10">
                                                <p:keyFilter regEx="/[\d]/"/>
                                            </p:inputText>
                                            <p:commandButton title="Buscar" icon="fa fa-search" id="btnIdentificacionContacto"
                                                             actionListener="#{proveedorView.findProveedor(false)}"
                                                             update="fieldContacto" process="identificacionContacto, tipoIdentificacionContacto" styleClass="button-group">
                                            </p:commandButton>
                                        </div>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{proveedorView.view}">
                                        <p:outputLabel for="@next" value="Tipo identificación" style="font-weight: bold;"/>
                                        <p:inputText id="tipoIdentificacionContactoView" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'tipoIdentificacionContactoView')"
                                                     value="#{proveedorView.clienteContacto.tipoIdentificacion.texto}" readonly="true"/> 
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" rendered="#{proveedorView.view}">
                                        <p:outputLabel for="@next" value="Identificación:" style="font-weight: bold;"/>
                                        <p:inputText id="identificacionContactoView" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'identificacionContactoView')"  
                                                     value="#{proveedorView.clienteContacto.identificacion}" readonly="true"/> 
                                    </h:panelGroup>
                                </p:panelGrid>
                                <p:panelGrid columns="3" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Nombres:" style="font-weight: bold;"/>
                                        <p:inputText id="nombre" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'nombre')"
                                                     value="#{proveedorView.clienteContacto.nombre}" readonly="#{proveedorView.view}" /> 
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Apellidos:" style="font-weight: bold;"/>
                                        <p:inputText id="apellido" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'apellido')"  maxlength="30"
                                                     value="#{proveedorView.clienteContacto.apellido}" readonly="#{proveedorView.view}" /> 
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Género:" style="font-weight: bold"/>
                                        <p:selectOneMenu id="generoContacto" value="#{proveedorView.clienteContacto.genero}" converter="#{utilConverter}" style="width: 100%"
                                                         filter="true" filterMatchMode="contains" disabled="#{proveedorView.view}">
                                            <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true"/>
                                            <f:selectItems value="#{proveedorView.generos}" var="cla" itemLabel="#{cla.texto}" itemValue="#{cla}" itemLabelEscaped="false"/>
                                        </p:selectOneMenu> 
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Dirección:" style="font-weight: bold;"/>
                                        <p:inputText id="direccionContacto" style="width: 100%;" onkeypress="focusNextOnEnter(event, 'direccionContacto')"
                                                     value="#{proveedorView.clienteContacto.direccion}" readonly="#{proveedorView.view}" /> 
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel  for="@next" value="Provincia:" style="font-weight: bold"/>
                                        <p:selectOneMenu id="provinciaContacto" value="#{proveedorView.provinciaContacto}" converter="#{utilConverter}"
                                                         filter="true" filterMatchMode="contains" disabled="#{proveedorView.view}" style="width: 100%">
                                            <f:selectItem itemLabel="Seleccionar" itemValue="#{null}"/>
                                            <f:selectItems value="#{proveedorView.provincias}" var="provincia" itemLabel="#{provincia.provincia}" itemValue="#{provincia}"/>
                                            <p:ajax update="gridCantonesContacto" listener="#{proveedorView.actualizarCantones(false)}"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" id="gridCantonesContacto">
                                        <p:outputLabel  for="@next" value="Cantón:" style="font-weight: bold"/>
                                        <p:selectOneMenu id="cantonContacto" value="#{proveedorView.clienteContacto.canton}" converter="#{utilConverter}"
                                                         filter="true" filterMatchMode="contains" disabled="#{proveedorView.view}" style="width: 100%;">
                                            <f:selectItem itemLabel="Seleccionar" itemValue="#{null}"/>
                                            <f:selectItems value="#{proveedorView.cantonContacto}" var="canton" itemLabel="#{canton.canton}" itemValue="#{canton}"/>
                                        </p:selectOneMenu>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Email:" style="font-weight: bold"/>
                                        <p:inputText id="emailContacto" style="width: 100%" value="#{proveedorView.clienteContacto.email}" 
                                                     onkeypress="focusNextOnEnter(event, 'emailContacto')" readonly="#{proveedorView.view}"/>
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Teléfono:" style="font-weight: bold"/>
                                        <p:inputMask id="telefonoContacto" mask="(99)999-9999" placeholder="(99)999-9999" 
                                                     style="width: 100%" readonly="#{proveedorView.view}"                                                   
                                                     value="#{proveedorView.clienteContacto.telefono}" onkeypress="focusNextOnEnter(event, 'telefonoContacto')"  />
                                    </h:panelGroup>
                                    <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                        <p:outputLabel for="@next" value="Celular:" style="font-weight: bold"/>
                                        <p:inputMask id="celularContacto" mask="(99)9999-9999" placeholder="(99)9999-9999" 
                                                     style="width: 100%" readonly="#{proveedorView.view}"
                                                     value="#{proveedorView.clienteContacto.celular}" onkeypress="focusNextOnEnter(event, 'celularContacto')"/> 
                                    </h:panelGroup>
                                </p:panelGrid>
                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <p:commandButton value="Buscar Entidad Bancaria" id="añadirCuenta" process="@this" rendered="#{!proveedorView.view}"
                                                     icon="fa fa-user-plus" actionListener="#{proveedorView.openDlgBanco()}" style="width: auto;" styleClass="Fs16"/>
                                    <p:dataTable  paginator="true"  paginatorPosition="bottom" style="text-align: center; margin: 20px 0px"
                                                  rowsPerPageTemplate="10,15,20,25"  rowIndexVar="index" reflow="true" rows="10" 
                                                  emptyMessage="No existen cuentas ningun movimiento bancario" 
                                                  id="entidadBancariaTable" value="#{proveedorView.detalleBancoList}" var="detalleBanco"
                                                  editable="#{!proveedorView.view}" editMode="cell" widgetVar="cellCars">
                                        <p:column headerText="Banco" style="width: 20%">
                                            <h:outputText value="#{detalleBanco.banco.nombreBanco}" />
                                        </p:column>
                                        <p:column headerText="Cuenta" style="width: 20%">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{detalleBanco.cuentaBanco}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputText value="#{detalleBanco.cuentaBanco}" maxlength="16">
                                                        <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                                    </p:inputText>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column headerText="Tipo de Cuenta" style="width: 20%">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{detalleBanco.tipoCuenta.texto}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <h:selectOneMenu value="#{detalleBanco.tipoCuenta}" style="width:100%" converter="#{utilConverter}">
                                                        <f:selectItem itemLabel="Seleccione..."/>
                                                        <f:selectItems value="#{proveedorView.tipoCuentaBancaria}" var="ti" itemLabel="#{ti.texto}" itemValue="#{ti}"/>
                                                    </h:selectOneMenu>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>
                                        <p:column headerText="Estado de la Cuenta" style="width: 15%;text-align: center">
                                            <p:selectBooleanCheckbox value="#{detalleBanco.estadoCuenta}" disabled="#{proveedorView.view}" >
                                                <p:ajax update="entidadBancariaTable" process="@this"/>
                                            </p:selectBooleanCheckbox>
                                        </p:column>
                                        <p:column headerText="Cta. Ret. Judiciales" style="width: 15%;text-align: center">
                                            <p:selectBooleanCheckbox value="#{detalleBanco.ctaRetenciones}" disabled="#{proveedorView.view}" >
                                                <p:ajax update="entidadBancariaTable" process="@this"/>
                                            </p:selectBooleanCheckbox>
                                        </p:column>
                                        <p:column headerText="Quitar" style="width: 10%;text-align: center" rendered="#{!proveedorView.view}">
                                            <p:commandLink actionListener="#{proveedorView.removerCuentaBancaria(detalleBanco,index)}" title="Quitar" 
                                                           update="entidadBancariaTable" process="@this">
                                                <i class="fa fa-minus-circle" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                            </p:commandLink>
                                        </p:column>
                                    </p:dataTable> 
                                </p:panelGrid>                              
                            </p:fieldset>
                        </p:panelGrid>
                        <center>
                            <p:commandButton value="Guardar" update="formProveedor" rendered="#{!proveedorView.view}"
                                             icon="fa fa-save" actionListener="#{proveedorView.saveFormulario()}" 
                                             styleClass="Fs16" style="width: auto;margin: 10px"/>
                        </center>                     
                    </h:panelGroup>                    
                </h:form>
            </div>
        </div>
        <p:dialog id="BancosDlg" widgetVar="BancosDlg" width="30%" modal="true" showEffect="fade"  draggable="false"
                  hideEffect="fade" resizable="false" position="center">
            <h:form  prependId="false">
                <h:panelGroup id="formBanco" layout="block">
                    <p:dataTable  id="datosDelBancoTable" widgetVar="datosDelBancoTable" var="banco" value="#{proveedorView.bancoLazyModel}" 
                                  scrollable="true" scrollHeight="350" lazy="true" rows="20000" style="width: 100%" rowKey="#{banco.id}"
                                  emptyMessage="No existen cuentas con el criterio de búsqueda especificado">
                        <f:facet name="header">
                            LISTADO DE ENTIDADES BANCARIAS
                        </f:facet>
                        <p:column headerText="Nombre del Banco" width="55%" filterBy="#{banco.nombreBanco}" filterMatchMode="contains">
                            <h:outputText value="#{banco.nombreBanco}"/>
                        </p:column>
                        <p:column headerText="Código del Bco. Central" width="25%" filterBy="#{banco.cuentaCorriente}" style="text-align: center" filterMatchMode="contains">
                            <h:outputText value="#{banco.cuentaCorriente}"/>
                        </p:column>
                        <p:column headerText="Seleccionar"  width="20%" style="text-align: center">
                            <p:commandLink actionListener="#{proveedorView.añadirBanco(banco)}" title="Seleccionar" process="@this"
                                           update="entidadBancariaTable">
                                <i class="fa fa-plus-circle" style="font-size: 1.5em; margin-right: 8px; "></i>
                            </p:commandLink>
                        </p:column>
                    </p:dataTable>
                </h:panelGroup>
            </h:form>
        </p:dialog>
    </ui:define>              
</ui:composition>