<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../WEB-INF/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:comp="http://xmlns.jcp.org/jsf/composite/comp">

    <ui:define name="title">
        Validación de Data
    </ui:define>
    <ui:param name="tittle" value="Validador" />
    <ui:define name="content">
        <style type="text/css">
            .cheap, .validado{
                background-color: rgba(62, 171, 241,0.1) !important;
                font-weight: bold;
            }
            .noValidado, .noValidadoB{
                background-color: rgba(62, 171, 241,0.5) !important;
            } 
            .noValidadoB,.validado{
                font-weight: bold;
                padding: 20px;
                font-size: 14px;
            }
        </style>
        <h:form id="frmMain" prependId="false" style="width: 100%">
            <center>
                <h1>#{validacionPersonaMB.tittle}</h1><br/>
                <h:outputText style="font-size: 20px;" value="Registro Solo validados por #{validacionPersonaMB.userValid} es de #{validacionPersonaMB.registroValidados}" id="conteo"/>
            </center>
            <div style="text-align: center; margin-top: 5%;"> 
                <span  class="validado">Validado</span>
                <span class="noValidadoB">No Validado</span>
            </div>
            <h:panelGroup rendered="false">
                <p:commandButton value="Aplicar Fitro Usuarios" actionListener="#{validacionPersonaMB.aplicarFitlro()}" icon="fa fa-check" 
                                 update="data" style="float: left; width: auto; background: blue"/> 
            </h:panelGroup>
            <p:spacer width="10"/>
            <h:panelGroup >
                <p:inputText     value="#{validacionPersonaMB.idFiltro}" placeholder="Escriba el Id a filtrar">
                    <p:keyFilter preventPaste="false" mask="num"/>

                </p:inputText>
                <p:commandButton value="Filtro desde que id empezar" actionListener="#{validacionPersonaMB.aplicarFiltroId()}" icon="fa fa-amazon" 
                                 update="data" style=" width: auto; background: blue"/> 
            </h:panelGroup>




            <center>

                <p:commandButton value="Actualizar Datos" actionListener="#{validacionPersonaMB.refresh()}" icon="fa fa-refresh" 
                                 update="data" style=" width: auto; background: black; color:white"/> 
                <p:spacer width="10"/>
                <p:commandButton value="Record Users" actionListener="#{validacionPersonaMB.recordUser}" icon="fa fa-refresh" 

                                 style=" width: auto; background: #c2185b; color:white"/> 




            </center>



            <h:panelGroup>
                <p:commandButton value="Nuevo" actionListener="#{validacionPersonaMB.opendlogCliente(null)}" icon="fa fa-plus"
                                 style="float: right; width: auto; background: blue"/>
            </h:panelGroup>

            <!--            <p:panelGrid style="text-align: center;" columns="1" layout="grid"  styleClass="ui-panelgrid-blank ui-fluid">
                            <p:commandButton value="Registro Actividad" actionListener="# {validacionPersonaMB.openDlogoHistory()}" icon="fa fa-list" 
                                             style="background: blue; width: auto;"/>
                        </p:panelGrid>-->
            <p:panelGrid columns="1" layout="grid"  styleClass="ui-panelgrid-blank ui-fluid">

                <p:dataTable var="item" value="#{validacionPersonaMB.listaclientesLazy}" lazy="true"  rows="10"  paginator="true"
                             paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                             rowsPerPageTemplate="5,10,15,30,50,100,300,500"  widgetVar="data" filterEvent="enter"
                             rowStyleClass="#{item.validado ==true ? 'cheap' : 'noValidado'}"
                             selection="#{validacionPersonaMB.clienteSeleccionados}" rowKey="#{item.id}"
                             rowIndexVar="index"
                             id="data">
                    <!--style="float: right; width: auto; background: purple"-->
                    <!--                    <f:facet name="header">
                                            <p:commandButton value="Validar Nodos" actionListener="# {validacionPersonaMB.openConfirmacionNodos()}" 
                                                             style="width: auto; background: purple; color: white" 
                                                             icon="fa fa-check" />
                                        </f:facet>-->

                    <!--                    <p:column selectionMode="multiple" style="width:16px;text-align:center"/>-->
                    <p:column headerText="Id" filterBy="#{item.id}" >
                        <h:outputText value="#{item.id}"/>
                    </p:column>
                    <p:column headerText="Identificacion" filterMatchMode="contains"  filterBy="#{item.identificacion}">
                        <h:outputText value="#{item.identificacion}"/>
                    </p:column>
                    <p:column headerText="Ruc" filterMatchMode="contains"  filterBy="#{item.ruc}">
                        <h:outputText value="#{item.ruc}"/>
                    </p:column>

                    <p:column headerText="Tipo de Identificación" filterMatchMode="contains" filterBy="#{item.tipoIdentificacion.texto}">
                        <h:outputText value="#{item.tipoIdentificacion.texto}"/>
                    </p:column>

                    <p:column headerText="Nombres" filterMatchMode="contains" filterBy="#{item.nombre}">
                        <h:outputText value="#{item.nombre}"/>
                    </p:column>
                    <p:column headerText="Apellidos"  filterBy="#{item.apellido}">
                        <h:outputText value="#{item.apellido}"/>
                    </p:column>

                    <p:column headerText="Razón Social"  filterBy="#{item.razonSocial}">
                        <h:outputText value="#{item.razonSocial}"/>
                    </p:column>

                    <p:column headerText="Estado" style="text-align: center;">
                        <h:outputText value="#{item.estado?'Activo':'Inactivo'}"/>
                    </p:column>

                    <p:column headerText="Validado" style="text-align: center;">
                        <h:outputText value="#{item.validado?'Validado':'No Validado'}"/>
                    </p:column>

                    <p:column headerText="Tiene Ruc?" filterMatchMode="contains" >
                        <h:outputText value="#{item.tieneRuc?'SI':'NO'}"/>
                    </p:column>

                    <p:column headerText="Acciones" style="text-align: center;width: 15%" >
                        <p:commandButton disabled="#{item.validado?true:false}" icon="fa fa-pencil" actionListener="#{validacionPersonaMB.opendlogCliente(item)}"/>

                        <p:spacer width="10"/>
                        <p:commandButton icon="fa fa-search" actionListener="#{validacionPersonaMB.viewContribuyente(item)}" style="background: blue;"/>
                        <p:spacer width="10"/> 
                        <p:commandButton  icon="#{item.multiPropietario==true?'fa fa-thumbs-down':(item.multiPropietario==null?'fa fa-thumbs-up':'fa fa-thumbs-up')}" 
                                          title="#{item.multiPropietario==true?'Marquelo si solo tiene un propietario'
                                                   :(item.multiPropietario==null?'Marquelo si tiene mas de un propietario':'Marquelo si tiene mas de un propietario')}"
                                          actionListener="#{validacionPersonaMB.validPropieatiosMany(item)}" update="data"/>

                        <p:spacer width="10"/>
                        <p:commandButton icon="fa fa-angle-right" title="validar Nodos" 
                                         actionListener="#{validacionPersonaMB.openConfirmacionNodos(item)}" style="background: orange;"/>

                    </p:column>
                </p:dataTable>
            </p:panelGrid>


        </h:form>
        <p:dialog modal="true" header="Formulario Contribuyente" widgetVar="dlogCliente" id="dlogCliente" height="500" width="80%" showEffect="fade">
            <h:form id="frmContribuyente" prependId="false">

                <div class="ui-g-10" style="border: 1px solid; border-color: #CFD8DC">
                    <div>

                        <p:spacer width="10"/>
                        <p:commandButton value="Validar Nombres" icon="fa fa-check" actionListener="#{validacionPersonaMB.validacionApiNombres()}" 
                                         process="nombres,apellidos" style="width: 200px; float: right;background: #512da8;"
                                         update="fecha_nacimiento,estado_civil,razon_social,nombre_comercial,
                                         email,rucPosee,telefono,celular,genero,sexo,nombres,represetnate_legal
                                         apellidos,direccion,provincia,cantones,datosObject,
                                         datosObjectDinardac"/>

                    </div>
                    <p:panelGrid columns="3" layout="grid"  styleClass="ui-panelgrid-blank form-group" >
                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel for="@next" style="width: 100%; font-weight: bold;" value="Tipo de Identificacion"/>
                            <p:selectOneMenu required="true" value="#{validacionPersonaMB.cliente.tipoIdentificacion}" converter="#{utilConverter}" style="width: 100%">
                                <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                <f:selectItems value="#{validacionPersonaMB.tiposIdentificacion}" var="i" itemLabel="#{i.texto}" itemValue="#{i}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <h:panelGroup>
                                <p:outputLabel for="@next" value="Identificación:" style="font-weight: bold;"/> <br/><br/>
                                <p:inputText id="identificacion" maxlength="10" required="true" style="width: 50%;float: left;" 
                                             value="#{validacionPersonaMB.ciRuc}">

                                </p:inputText>
                                <p:commandButton icon="fa fa-search" actionListener="#{validacionPersonaMB.validacionApiCedula()}" 
                                                 process="identificacion,rucPosee"  
                                                 update="fecha_nacimiento,estado_civil,razon_social,nombre_comercial,
                                                 email,rucPosee,telefono,celular,genero,sexo,nombres,represetnate_legal
                                                 apellidos,direccion,provincia,cantones,datosObject,
                                                 datosObjectDinardac"/>
                            </h:panelGroup>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel  style="font-weight: bold;" value="Tiene Ruc?"/>
                            <p:selectOneRadio id="rucPosee" value="#{validacionPersonaMB.cliente.tieneRuc}" >
                                <f:selectItem itemLabel="Si" itemValue="true"/>
                                <f:selectItem itemLabel="No" itemValue="false"/>

                            </p:selectOneRadio>

                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel for="@next" style="font-weight: bold;" value="Nombres:"/>
                            <p:inputText id="nombres"  style="width: 100%" value="#{validacionPersonaMB.cliente.nombre}"/>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel for="@next" style="font-weight: bold;" value="Apellidos"/>
                            <p:inputText id="apellidos"  style="width: 100%" value="#{validacionPersonaMB.cliente.apellido}"/>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="Dirección:"/>
                            <p:inputText id="direccion"  style="width: 100%" value="#{validacionPersonaMB.cliente.direccion}"/>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="E-mail"/>
                            <p:inputText id="email" style="width: 100%" value="#{validacionPersonaMB.cliente.email}"/>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="Tlfn:"/>
                            <p:inputText id="telefono"  style="width: 100%" value="#{validacionPersonaMB.cliente.telefono}">
                                <p:keyFilter preventPaste="false" mask="num"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="Celular:"/>
                            <p:inputText id="celular" style="width: 100%" value="#{validacionPersonaMB.cliente.celular}">
                                <p:keyFilter preventPaste="false" mask="num"/>
                            </p:inputText>


                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel  style="font-weight: bold;"  value="Fecha de nacimiento:"/>
                            <p:calendar id="fecha_nacimiento"  
                                        pattern="dd/MM/yyyy" navigator="true" locale="es"  style="width: 100%" value="#{validacionPersonaMB.cliente.fechaNacimiento}"/>
                        </p:panelGrid>
                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel for="@next" style="font-weight: bold;" value="Genero:"/>
                            <p:selectOneMenu id="genero" required="true" value="#{validacionPersonaMB.cliente.genero}" converter="#{utilConverter}" style="width: 100%">
                                <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                <f:selectItems value="#{validacionPersonaMB.listaGeneros}" var="it" itemLabel="#{it.texto}" itemValue="#{it}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel for="@next" style="font-weight: bold;" value="Provincia:"/>
                            <p:selectOneMenu id="provincia" required="true" value="#{validacionPersonaMB.provincia}" style="width: 100%" converter="#{utilConverter}">
                                <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                <f:selectItems value="#{validacionPersonaMB.provincias}" var="it" itemLabel="#{it.descripcion}" itemValue="#{it}"/>
                                <p:ajax listener="#{validacionPersonaMB.catonesProvincia()}" update="cantones"/>
                            </p:selectOneMenu>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel for="@next" style="font-weight: bold;" value="Canton:"/>
                            <p:selectOneMenu id="cantones" value="#{validacionPersonaMB.cliente.canton}" converter="#{utilConverter}" style="width: 100%">
                                <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                <f:selectItems value="#{validacionPersonaMB.cantones}" var="it" itemLabel="#{it.descripcion}" itemValue="#{it}"/>
                            </p:selectOneMenu>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="Estado civil:"/>
                            <p:inputText id="estado_civil" style="width: 100%" value="#{validacionPersonaMB.cliente.estadoCivil}"/>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel for="@next" style="font-weight: bold;" value="Sexo:"/>
                            <p:selectOneRadio id="sexo"  required="true" value="#{validacionPersonaMB.cliente.sexo}" unselectable="true">
                                <f:selectItem itemLabel="Masculino" itemValue="true"/>
                                <f:selectItem itemLabel="Femenino" itemValue="false"/>
                            </p:selectOneRadio>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel for="@next"   style="font-weight: bold;" value="Posee discapacidad?"/>
                            <p:selectOneRadio required="true" value="#{validacionPersonaMB.cliente.discapacidad}" unselectable="true">
                                <f:selectItem itemLabel="Si" itemValue="true"/>
                                <f:selectItem itemLabel="No" itemValue="false"/>

                            </p:selectOneRadio>

                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel for="@next"  style="font-weight: bold;" value="Porcentaje de Discapacidad:"/>
                            <p:inputText required="true" style="width: 100%" value="#{validacionPersonaMB.cliente.porcentajeDiscapacidad}">
                                <p:keyFilter mask="num" />
                            </p:inputText>

                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel  style="font-weight: bold;" value="Numero Conadis:"/>
                            <p:inputText style="width: 100%" value="#{validacionPersonaMB.cliente.numConadis}"/>
                        </p:panelGrid>



                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel for="@next" style="font-weight: bold;" value="Contribuyente especial?"/>
                            <p:selectOneRadio   required="true" value="#{validacionPersonaMB.cliente.contribuyenteEspecial}" unselectable="true">
                                <f:selectItem itemLabel="Si" itemValue="true"/>
                                <f:selectItem itemLabel="No" itemValue="false"/>

                            </p:selectOneRadio>
                        </p:panelGrid>


                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="Resolución Sri:"/>
                            <p:inputText style="width: 100%" value="#{validacionPersonaMB.cliente.resolucionSri}"/>
                        </p:panelGrid>


                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="Enfermedad Catastrófica"/>
                            <p:selectOneRadio value="#{validacionPersonaMB.cliente.enfermedadCatastrofica}" unselectable="true">
                                <f:selectItem itemLabel="Si" itemValue="true"/>
                                <f:selectItem itemLabel="No" itemValue="false"/>

                            </p:selectOneRadio>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="Consolidado"/>
                            <p:inputText style="width: 100%" value="#{validacionPersonaMB.cliente.consolidado}"/>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="Razon Social"/>
                            <p:inputText id="razon_social" style="width: 100%" value="#{validacionPersonaMB.cliente.razonSocial}"/>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="Nombre Comercial:"/>
                            <p:inputText id="nombre_comercial" style="width: 100%" value="#{validacionPersonaMB.cliente.nombreComercial}"/>
                        </p:panelGrid>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:outputLabel style="font-weight: bold;" value="Representante Legal:"/>
                            <p:inputText id="represetnate_legal" style="width: 100%" value="#{validacionPersonaMB.cliente.representanteLegal}"/>
                        </p:panelGrid>

                    </p:panelGrid>

                    <div>
                        <center>
                            <p:commandButton update="frmContribuyente" process="frmContribuyente" value="Guardar/Editar" icon="fa fa-save" style="width: 200px;"
                                             actionListener="#{validacionPersonaMB.saveEditar()}"/>
                            <p:spacer width="10"/>
                            <p:commandButton value="Cancelar" oncomplete="PF('dlogCliente').hide()" icon="fa fa-remove" style="width: 200px; background: red;"/>
                        </center>
                    </div>
                </div>
                <div class="ui-g-2" style="border: 1px solid; border-color: #CFD8DC">

                    <h4>WEB SERVICE</h4>
                    <hr/>
                    <p:panelGrid id="datosObject" columns="1" layout="grid"  styleClass="ui-panelgrid-blank ui-fluid"  rendered="#{validacionPersonaMB.mostrarWEbService}">
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="No. Identificación:"/> <br/>
                            <h:outputText  value="#{validacionPersonaMB.patronElectoral.cedula}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Nombre Completo:"/><br/>
                            <h:outputText  value="#{validacionPersonaMB.patronElectoral.nombre}"/>
                        </h:panelGroup>

                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Sexo"/><br/>
                            <h:outputText 
                                value="#{validacionPersonaMB.patronElectoral.juntaSexo==null?'':
                                         (validacionPersonaMB.patronElectoral.juntaSexo=='M'?'Masculino':'Femenino')}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Provincia Codigo"/><br/>
                            <h:outputText  value="#{validacionPersonaMB.patronElectoral.provinciaCodigo}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Provincia"/><br/>
                            <h:outputText  value="#{validacionPersonaMB.patronElectoral.provinciaNombre}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Canton Codigo:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.patronElectoral.cantonCodigo}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Canton:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.patronElectoral.cantonNombre}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Parroquia Codigo:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.patronElectoral.parroquiaCodigo}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Parroquia:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.patronElectoral.parroquiaNombre}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Parroquia Estado:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.patronElectoral.parroquiaEstado}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Zona:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.patronElectoral.zonaNombre}"/>
                        </h:panelGroup>

                    </p:panelGrid>
                    <p:panelGrid id="datosObjectDinardac" columns="2" layout="grid"  styleClass="ui-panelgrid-blank ui-fluid"  
                                 rendered="#{!validacionPersonaMB.mostrarWEbService}">
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Identificacion:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.identificacion}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Ruc:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.ruc}"/>
                        </h:panelGroup><!-- comment -->
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Apellidos:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.apellido}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Nombres:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.nombre}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Tipo identificacion"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.tipoIdentificacion.texto}"/>
                        </h:panelGroup><!-- comment -->
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Direccion:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.direccion}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Email:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.email}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Telefono:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.telefono}"/>
                        </h:panelGroup><!-- comment -->
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Celular:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.celular}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Fecha de Nacimiento:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.fechaNacimiento}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Estado Civil:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.estadoCivil}"/>
                        </h:panelGroup><!-- comment -->
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Acta de funcion:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.actaDefuncion}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Condicion ciudadadano:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.condicionCiudadano}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Fecha de funcion"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.fechaDefuncion}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Fecha de inscripcion de funcion>"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.fechaInscripcionDefuncion}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Edad:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.edad}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Fecha de expedicion:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.fechaExpedicion}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Identificacion representante legal:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.identificacionRepresentanteLegal}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Apellidos Representante Legal:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.apellidosRepresentanteLegal}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Nombres Representante Legal:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.nombresRepresentanteLegal}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Cargo Representante Lgegal:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.cargoRepresentanteLegal}"/>
                        </h:panelGroup>

                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Provincia:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.canton.idProvincia.descripcion}"/>
                        </h:panelGroup>
                        <h:panelGroup>
                            <p:outputLabel style="font-weight: bold;" value="Canton:"/><br/>
                            <h:outputText value="#{validacionPersonaMB.cliente.canton.descripcion}"/>
                        </h:panelGroup>


                    </p:panelGrid>
                </div>
            </h:form>


        </p:dialog>

        <p:dialog modal="true" header="Confirmación" widgetVar="dlogoNodos" id="dlogoNodos" height="500" width="1200" showEffect="fade">
            <h:form id="frmNodos">

                <center>

                    <h1>#{validacionPersonaMB.clienteGuia}</h1>
                    <h2>#{validacionPersonaMB.clienteGuia.nombre==null? '':validacionPersonaMB.clienteGuia.nombre} #{validacionPersonaMB.clienteGuia.apellido==null?'':validacionPersonaMB.clienteGuia.apellido}</h2>
                </center>


                <p:tabView>
                    <p:tab title="Información General">
                        <p:dataTable var="item" value="#{validacionPersonaMB.lazyClienteGeneral}" lazy="true"  rows="10"  paginator="true"
                                     paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                     rowsPerPageTemplate="5,10,15,30,50,100,300,500"  widgetVar="dataNodos" filterEvent="enter"
                                     rowStyleClass="#{item.validado ==true ? 'cheap' : 'noValidado'}"
                                     selection="#{validacionPersonaMB.clienteSeleccionados}" rowKey="#{item.id}"
                                     rowIndexVar="index"
                                     id="dataNodos">

                            <f:facet name="header">
                                <p:commandButton value="Actualizar Datos"  process="@this"  actionListener="#{validacionPersonaMB.clearAllFilters()}"
                                                 icon="ui-icon-refresh" onclick="PF('dataNodos').clearFilters()" update="dataNodos,frmNodos"
                                                 styleClass="Fs16" style="width: auto; margin-left: 15px; background: black;"/>


                            </f:facet>
                            <p:column selectionMode="multiple" style="width:16px;text-align:center" />
                            <p:column headerText="Id" filterBy="#{item.id}" >
                                <h:outputText value="#{item.id}"/>
                            </p:column>
                            <p:column headerText="Identificacion" filterMatchMode="contains"  filterBy="#{item.identificacion}">
                                <h:outputText value="#{item.identificacion}"/>
                            </p:column>
                            <p:column headerText="Ruc" filterMatchMode="contains"  filterBy="#{item.ruc}">
                                <h:outputText value="#{item.ruc}"/>
                            </p:column>

                            <p:column headerText="Tipo de Identificación" filterMatchMode="contains" filterBy="#{item.tipoIdentificacion.texto}">
                                <h:outputText value="#{item.tipoIdentificacion.texto}"/>
                            </p:column>

                            <p:column headerText="Nombres" filterMatchMode="contains" filterBy="#{item.nombre}">
                                <h:outputText value="#{item.nombre}"/>
                            </p:column>
                            <p:column headerText="Apellidos"  filterMatchMode="contains" filterBy="#{item.apellido}">
                                <h:outputText value="#{item.apellido}"/>
                            </p:column>
                            <p:column headerText="Razón Social"  filterBy="#{item.razonSocial}">
                                <h:outputText value="#{item.razonSocial}"/>
                            </p:column>
                            <p:column headerText="Estado" style="text-align: center;">
                                <h:outputText value="#{item.estado?'Activo':'Inactivo'}"/>
                            </p:column>

                            <p:column headerText="Validado" style="text-align: center;">
                                <h:outputText value="#{item.validado?'Validado':'No Validado'}"/>
                            </p:column>

                            <p:column headerText="Tiene Ruc?" filterMatchMode="contains" >
                                <h:outputText value="#{item.tieneRuc?'SI':'NO'}"/>
                            </p:column>
                            <p:column headerText="******" >
                                <p:commandButton disabled="#{item.validado?true:false}" icon="fa fa-pencil" actionListener="#{validacionPersonaMB.opendlogCliente(item)}"/>
                            </p:column>

                        </p:dataTable>
                    </p:tab>
                    <p:tab title="Confirmacion Nodos">
                        <p:commandButton value="Actualizar Nodos" update="nodosTable"/>

                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                            <p:dataTable var="i" value="#{validacionPersonaMB.clienteSeleccionados}" rows="25"
                                         rowStyleClass="#{index ==1 ? 'padreNodo' : 'hijoNodo'}"
                                         paginator="true" id="nodosTable" widgetVar="nodosTable"
                                         paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
                                         rowsPerPageTemplate="5,10,25,{ShowAll|'Todos'}" rowIndexVar="index">
                                <p:column headerText="Id" filterMatchMode="contains" sortBy="#{i.id}" filterBy="#{i.id}">
                                    <h:outputText value="#{i.id}"/>
                                </p:column>
                                <p:column headerText="Identificacion" filterMatchMode="contains" sortBy="#{i.identificacion}" filterBy="#{i.identificacion}">
                                    <h:outputText value="#{i.identificacion}"/>
                                </p:column>

                                <p:column headerText="Tipo de Identificación" filterMatchMode="contains" 
                                          sortBy="#{i.tipoIdentificacion.texto}" filterBy="#{i.tipoIdentificacion.texto}">
                                    <h:outputText value="#{i.tipoIdentificacion.texto}"/>
                                </p:column>

                                <p:column headerText="Nombre Completo" sortBy="#{i.nombreCompleto}" width="300"
                                          filterMatchMode="contains" filterBy="#{i.nombreCompleto}">
                                    <h:outputText value="#{i.nombreCompleto}"/>
                                </p:column>


                                <p:column headerText="Dirección" sortBy="#{i.direccion}" filterMatchMode="contains" filterBy="#{i.direccion}">
                                    <h:outputText value="#{i.direccion}"/>
                                </p:column>

                                <p:column headerText="Estado" >
                                    <h:outputText value="#{i.estado?'Activo':'Inactivo'}"/>
                                </p:column>

                                <p:column headerText="NODO" >
                                    <h:outputText style="font-size: 15px; font-weight: bold; " value="#{index==0?'NODO PADRE':'NODO HIJO'}"/>
                                </p:column>

                            </p:dataTable>


                        </p:panelGrid>
                        <div style="margin-top: 2%; text-align: center"> 
                            <center>
                                <p:commandButton icon="fa fa-save" value="Confirmar" actionListener="#{validacionPersonaMB.validacionNodos()}"
                                                 style="width: auto; margin-right: 5px;"/>
                                <p:commandButton icon="fa fa-remove" value="Cancelar" oncomplete="PF('dlogoNodos').hide()" style="background: red; width: auto;"/>
                            </center>     
                        </div>
                    </p:tab>
                </p:tabView>

            </h:form>
        </p:dialog>


        <p:dialog modal="true" header="View Formulario Contribuyente" widgetVar="dlogClienteView" id="dlogClienteView" height="500" width="1100" showEffect="fade">
            <h:form id="frmContribuyenteView" prependId="false">
                <center>
                    <h1>View Data</h1>
                </center>

                <hr/>
                <p:panelGrid columns="3" layout="grid"  styleClass="ui-panelgrid-blank form-group" >
                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel  style="width: 100%; font-weight: bold;" value="Tipo de Identificacion"/>
                        <p:inputText  readonly="true" style="width: 100%;" value="#{validacionPersonaMB.cliente.tipoIdentificacion.texto}"/>
                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel value="Identificación:" style="font-weight: bold;"/>
                        <p:inputText maxlength="10" readonly="true" style="width: 100%;" value="#{validacionPersonaMB.cliente.identificacion}">
                            <p:keyFilter mask="num" />
                        </p:inputText>

                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel  style="font-weight: bold;" value="Nombres:"/>
                        <p:inputText readonly="true" style="width: 100%" value="#{validacionPersonaMB.cliente.nombre}"/>
                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel  style="font-weight: bold;" value="Apellidos"/>
                        <p:inputText  readonly="true" style="width: 100%" value="#{validacionPersonaMB.cliente.apellido}"/>
                    </p:panelGrid>

                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="Dirección:"/>
                        <p:inputText readonly="true"  style="width: 100%" value="#{validacionPersonaMB.cliente.direccion}"/>
                    </p:panelGrid>

                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="E-mail"/>
                        <p:inputText readonly="true" style="width: 100%" value="#{validacionPersonaMB.cliente.email}"/>
                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="Tlfn:"/>
                        <p:inputText readonly="true" style="width: 100%" value="#{validacionPersonaMB.cliente.telefono}">
                            <p:keyFilter mask="num" />
                        </p:inputText>
                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="Celular:"/>
                        <p:inputText readonly="true" style="width: 100%" value="#{validacionPersonaMB.cliente.celular}">
                            <p:keyFilter mask="num" />
                        </p:inputText>


                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;"  value="Fecha de nacimiento:"/>
                        <p:inputText  style="width: 100%" value="#{validacionPersonaMB.cliente.fechaNacimiento}">
                            <f:convertDateTime pattern="dd/MM/yyyy"/>
                        </p:inputText>
                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="Genero:"/>
                        <p:selectOneMenu  value="#{validacionPersonaMB.cliente.genero}" converter="#{utilConverter}" style="width: 100%">
                            <f:selectItem itemDisabled="true" itemLabel="Seleccione" itemValue="#{null}"/>
                            <f:selectItems itemDisabled="true" value="#{validacionPersonaMB.listaGeneros}" var="it" itemLabel="#{it.texto}" itemValue="#{it}"/>
                        </p:selectOneMenu>
                    </p:panelGrid>

                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel  style="font-weight: bold;" value="Provincia:"/>
                        <p:selectOneMenu  value="#{validacionPersonaMB.provincia}" style="width: 100%" converter="#{utilConverter}">
                            <f:selectItem itemDisabled="true" itemLabel="Seleccione" itemValue="#{null}"/>
                            <f:selectItems itemDisabled="true" value="#{validacionPersonaMB.provincias}" var="it" itemLabel="#{it.descripcion}" itemValue="#{it}"/>
                            <p:ajax listener="#{validacionPersonaMB.catonesProvincia()}" />
                        </p:selectOneMenu>
                    </p:panelGrid>

                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="Canton:"/>
                        <p:inputText readonly="true" value="#{validacionPersonaMB.cliente.canton.descripcion}"/>
                    </p:panelGrid>

                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="Estado civil:"/>
                        <p:inputText readonly="true" style="width: 100%" value="#{validacionPersonaMB.cliente.estadoCivil}"/>
                    </p:panelGrid>

                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="Sexo:"/>
                        <p:selectOneRadio  disabled="true" value="#{validacionPersonaMB.cliente.sexo}" unselectable="true">
                            <f:selectItem  itemLabel="Masculino" itemValue="true"/>
                            <f:selectItem itemLabel="Femenino" itemValue="false"/>

                        </p:selectOneRadio>
                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="Posee discapacidad?"/>
                        <p:selectOneRadio disabled="true" value="#{validacionPersonaMB.cliente.discapacidad}" unselectable="true">
                            <f:selectItem itemLabel="Si" itemValue="true"/>
                            <f:selectItem itemLabel="No" itemValue="false"/>

                        </p:selectOneRadio>

                    </p:panelGrid>

                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel   style="font-weight: bold;" value="Porcentaje de Discapacidad:"/>
                        <p:inputText disabled="true" style="width: 100%" value="#{validacionPersonaMB.cliente.porcentajeDiscapacidad}">
                            <p:keyFilter mask="num" />
                        </p:inputText>

                    </p:panelGrid>

                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel  style="font-weight: bold;" value="Numero Conadis:"/>
                        <p:inputText readonly="true" style="width: 100%" value="#{validacionPersonaMB.cliente.numConadis}"/>
                    </p:panelGrid>



                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel  style="font-weight: bold;" value="Contribuyente especial?"/>
                        <p:selectOneRadio disabled="true"   value="#{validacionPersonaMB.cliente.contribuyenteEspecial}" unselectable="true">
                            <f:selectItem itemLabel="Si" itemValue="true"/>
                            <f:selectItem itemLabel="No" itemValue="false"/>

                        </p:selectOneRadio>
                    </p:panelGrid>


                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="Resolución Sri:"/>
                        <p:inputText readonly="true" style="width: 100%" value="#{validacionPersonaMB.cliente.resolucionSri}"/>
                    </p:panelGrid>


                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                        <p:outputLabel style="font-weight: bold;" value="Enfermedad Catastrófica"/>
                        <p:selectOneRadio disabled="true" value="#{validacionPersonaMB.cliente.enfermedadCatastrofica}" unselectable="true">
                            <f:selectItem itemLabel="Si" itemValue="true"/>
                            <f:selectItem itemLabel="No" itemValue="false"/>

                        </p:selectOneRadio>
                    </p:panelGrid>

                </p:panelGrid>

                <div>
                    <center>
                        <p:commandButton value="Cerrar" 
                                         icon="fa fa-remove" style="width: 200px;" oncomplete="PF('dlogClienteView').hide()"/>

                    </center>
                </div>

            </h:form>
        </p:dialog>

        <p:dialog modal="true" header="Confirmación de Nodos" widgetVar="dlogoHistorial" id="dlogoHistorial" height="500" width="1000" showEffect="fade">
            <h:form id="frmRegisterHistorial" prependId="false">
                <div class="ui-g-8">
                    <p:dataTable var="datos" value="#{validacionPersonaMB.lazyListaSeguimiento}" lazy="true"  rows="10"  paginator="true"
                                 paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                 rowsPerPageTemplate="5,10,15,30"  widgetVar="datosHistorial" filterEvent="enter"
                                 rowIndexVar="index" scrollable="true" 
                                 id="datosHistorial">
                        <f:facet name="header">
                            Historial de Registros
                        </f:facet>
                        <!--                        <p:column headerText="Id Desde" filterBy="# {datos.desdeReferencia}" filterMatchMode="contains">
                                                    <h:outputText value="# {datos.desdeReferencia}"/>
                                                </p:column>
                                                <p:column headerText="Id Hasta" filterMatchMode="contains" filterBy="# {datos.hastaReferencia}">
                                                    <h:outputText value="# {datos.hastaReferencia}" />
                                                </p:column>
                                                <p:column headerText="User" filterMatchMode="contains" filterBy="# {datos.usuario}">
                                                    <h:outputText value="# {datos.usuario}"/>
                                                </p:column>-->
                        <p:column headerText="Fecha">
                            <h:outputText value="#{datos.fecha}">
                                <f:convertDateTime pattern="dd/MM/yyyy"/>
                            </h:outputText>
                        </p:column>


                    </p:dataTable>     
                </div>
                <div class="ui-g-4">
                    <h3>Formulario Registro</h3>
                    <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" >
                        <!--                        <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                                    <h:outputText value="Nombre User:"/>
                                                    <p:inputText value="#{validacionPersonaMB.seguimientoContibuyente.usuario}" style="width: 100%"/>
                                                </p:panelGrid>
                                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                                    <h:outputText value="Id Desde:"/>
                                                    <p:inputText value="#{validacionPersonaMB.seguimientoContibuyente.desdeReferencia}" style="width: 100%">
                                                        <p:keyFilter mask="num" />
                                                    </p:inputText>
                                                </p:panelGrid> comment 
                                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                                    <h:outputText value="Id Hasta:"/>
                                                    <p:inputText value="#{validacionPersonaMB.seguimientoContibuyente.hastaReferencia}" style="width: 100%">
                                                        <p:keyFilter mask="num" />
                                                    </p:inputText>
                                                </p:panelGrid>-->
                    </p:panelGrid>
                    <br/><!-- comment -->
                    <center>
                        <p:commandButton value="Guardar" style="width: auto;" icon="fa fa-save" actionListener="#{validacionPersonaMB.saveSeguimiento()}"/>
                        <p:spacer width="10"/>
                        <p:commandButton value="Cancelar" icon="fa fa-remove" oncomplete="PF('dlogoHistorial').hide()" style="background: red;"/>
                    </center>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog modal="true" header="User Similares" widgetVar="dlogoEleccion" id="dlogoEleccion" height="500" width="1000" showEffect="fade">
            <h:form id="fmUserSilmilares" prependId="false">
                <p:dataTable var="userItem" value="#{validacionPersonaMB.listPatronElectoral}" rows="15"
                             paginator="true"  lazy="true"  filterEvent="enter"
                             paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
                             rowsPerPageTemplate="5,10,15,25" rowIndexVar="index">
                    <p:column headerText="No. Identificación" filterMatchMode="contains" sortBy="#{userItem.cedula}" filterBy="#{userItem.cedula}">
                        <h:outputText value="#{userItem.cedula}"/>
                    </p:column>

                    <p:column headerText="Nombre Completo" filterMatchMode="contains" sortBy="#{userItem.nombre}" filterBy="#{userItem.nombre}">
                        <h:outputText value="#{userItem.nombre}"/>
                    </p:column>
                    <p:column headerText="Parroquia" filterMatchMode="contains" sortBy="#{userItem.parroquiaNombre}" filterBy="#{userItem.parroquiaNombre}">
                        <h:outputText value="#{userItem.parroquiaNombre}"/>
                    </p:column>
                    <p:column headerText="Provincia" filterMatchMode="contains" sortBy="#{userItem.provinciaNombre}" filterBy="#{userItem.provinciaNombre}">
                        <h:outputText value="#{userItem.provinciaNombre}"/>
                    </p:column>
                    <p:column headerText="Canton" filterMatchMode="contains" sortBy="#{userItem.cantonNombre}" filterBy="#{userItem.cantonNombre}">
                        <h:outputText value="#{userItem.cantonNombre}"/>
                    </p:column>
                    <p:column headerText="Zona" filterMatchMode="contains" sortBy="#{userItem.zonaNombre}" filterBy="#{userItem.zonaNombre}">
                        <h:outputText value="#{userItem.zonaNombre}"/>
                    </p:column>
                    <p:column headerText="Sexo" filterMatchMode="contains" sortBy="#{userItem.juntaSexo}" filterBy="#{userItem.juntaSexo}">
                        <h:outputText value="#{userItem.juntaSexo}"/>
                    </p:column>
                    <p:column headerText="Elección" >
                        <p:commandButton icon="fa fa-check" actionListener="#{validacionPersonaMB.eleccionAlterna(userItem)}"/>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>


        <p:dialog modal="true" header="Registros validados y con nodos Padres" widgetVar="dlogoRecords" id="dlogoRecords" height="500" width="1000" showEffect="true">
            <h:form id="fmRecors" prependId="false">
                <center>
                    <!--                    <h1>Realizados y/o corregidos por admin # {validacionPersonaMB.corregidoAdmin}</h1>-->

                    <h:commandLink title="Exportar Excel xls" value="EXPORT XLS">
                        <p:dataExporter type="xlsxstream" target="tbl" fileName="report" />
                    </h:commandLink>
                </center>
                <br/>

                <p:tabView>
                    <p:tab title="Validados solo padres">
                        <p:dataTable var="record" value="#{validacionPersonaMB.reportesValidadores}"  rows="15"
                                     paginator="true"    filterEvent="enter"  id="tbl" widgetVar="dataRecords"
                                     paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     currentPageReportTemplate="{startRecord}-{endRecord} of {totalRecords} records"
                                     rowIndexVar="index">


                            <p:column headerText="Users" filterMatchMode="contains"  filterBy="#{record.user}">
                                <h:outputText value="#{record.user.toUpperCase()}"/>
                            </p:column>
                            <p:column headerText="Nombres" filterMatchMode="contains"  filterBy="#{record.nombres}" width="300">
                                <h:outputText value="#{record.nombres.toUpperCase()}"/>
                            </p:column>  
                            <p:column headerText="Asignados" filterMatchMode="contains"  filterBy="#{record.asignados}">
                                <h:outputText value="#{record.asignados}" style="float: right"/>
                            </p:column>   
                            <p:column headerText="Validados" filterMatchMode="contains"  filterBy="#{record.validados}">
                                <h:outputText value="#{record.validados}" style="float: right"/>
                            </p:column>  
                            <p:column headerText="Eficiencia" filterMatchMode="contains"  filterBy="#{record.eficiencia}">
                                <h:outputText value="#{record.eficiencia gt 100?100:record.eficiencia}%" style="float: right"/>
                            </p:column>
                            <p:column headerText="Ranking" >
                                <p:rating value="#{record.eficiencia gt 100?5:((record.eficiencia/100)*5).intValue()}" readonly="true"/>
                            </p:column>

                        </p:dataTable>
                    </p:tab>  
                    <p:tab title="Total por dias">
                        <p:dataTable var="control" value="#{validacionPersonaMB.lazyValidadores}" lazy="true"  rows="10"  paginator="true"
                                     paginatorTemplate="{RowsPerPageDropdown} {FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                                     rowsPerPageTemplate="5,10,15,30"  widgetVar="datosControls" filterEvent="enter"
                                     rowIndexVar="index" id="datosControls">
                            <f:facet name="header">
                                <p:commandButton style="background: blue" title="Refresacar data"
                                                 icon="fa fa-refresh" actionListener="#{controlValidacionMb.refreshRecords()}" update="frmMain"/>
                            </f:facet>
                            <p:column headerText="No" style="width: 10%;"  >
                                #{index+1}
                            </p:column>
                            <p:column headerText="Nombres" filterMatchMode="contains" filterBy="#{control.nombreCompleto}">
                                <h:outputText value="#{control.nombreCompleto.toUpperCase()}"/>
                            </p:column>
                            <p:column headerText="User" filterMatchMode="contains" filterBy="#{control.usuario}" style="width: 10%; text-align: center;">
                                <h:outputText value="#{control.usuario}"/>
                            </p:column>
                            <p:column headerText="Fecha"  filterBy="#{control.fecha}" style="width: 10%;">
                                <f:facet name="filter">
                                    <p:datePicker  onchange="PF('data').filter()" />
                                </f:facet>

                                <h:outputText value="#{control.fecha eq null ?'valid_admin':control.fecha}">
                                    <f:convertDateTime pattern="dd/MM/yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Conteo(Registro)" filterMatchMode="contains" style="width: 10%; text-align: center;" filterBy="#{control.registrosConteo}">
                                <h:outputText value="#{control.registrosConteo}"/>
                            </p:column >
                            <p:column rendered="false" headerText="****" style="width: 8%;">
                                <p:commandButton icon="fa fa-search"/>
                            </p:column>
                        </p:dataTable>

                    </p:tab>
                </p:tabView>

            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>