<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <a href="servidorPublico.xhtml"></a>
    <ui:define name="title">
        Mantenimiento Servidor Público
    </ui:define>
    <ui:param name="tittle" value="Servidores y Funciones Institucionales" />
    <ui:define name="content">
        <h:form id="formMain">
            <h:panelGroup id="dataTableServidorPublico" layout="block">
                <p:growl showDetail="true" globalOnly="true" showSummary="true" ><p:autoUpdate/></p:growl>
                <p:tabView id="formMainTabView" prependId="false" style="width: 100%;">
                    <p:tab  title="Datos Personales" id="datosPersonalesTab" >
                        <p:commandButton value="Adicionar Servidor Público"
                                         icon="ui-icon-plus"
                                         styleClass="Fs16 nuevo" style="width: auto; margin-bottom: 15px;"
                                         actionListener="#{servidorPublicoView.nuevoDatos(null, 'btn-servidor')}"   
                                         update="formServidorPublico"
                                         rendered="true"/>
                        <p:commandButton value="Limpiar Filtro" icon="ui-icon-refresh" styleClass="Fs16"
                                         style="width: auto;margin-bottom: 15px; margin-top: 13px" onclick="PF('dtServidor').filter()"/>
                        <p:commandButton value="Generar Documento" icon="fa fa-fw fa-file-pdf-o" 
                                         styleClass="Fs16"
                                         style="width: auto;margin-bottom: 15px; margin-top: 13px" 
                                         actionListener="#{servidorPublicoView.generarDoc()}"/>
                        <p:dataTable id="servidorPublico" emptyMessage="No se encontró ningún servidor público" widgetVar="dtServidor" var="ser"
                                     style="width: 100%;text-align:center" reflow="true" paginator="true" lazy="true" rows="25"
                                     rowsPerPageTemplate="25,50,100" value="#{servidorPublicoView.servidorLazy}"
                                     currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     selectionMode="single" rowKey="#{ser.id}" 
                                     paginatorPosition="bottom"
                                     rowIndexVar="num">
                            <f:facet name="header">
                                Listado de Servidores Públicos
                            </f:facet>
                            <p:column headerText="N°" style="width: 4%;">
                                <h:outputText value="#{num+1}"/>
                            </p:column>
                            <p:column headerText="Nombre" filterBy="#{ser.persona.nombreCompleltoSql}" filterMatchMode="contains" >
                                <h:outputText value="#{ser.persona.nombreCompleltoSql}"/>
                            </p:column>
                            <p:column headerText="Identificación" style="width: 10%; " filterBy="#{ser.persona.identificacion}">
                                <h:outputText value="#{ser.persona.identificacion}"/>
                            </p:column>
                            <p:column headerText="Fecha de Ingreso" style="width: 7%; ;" id="espacioFecha" filterBy="#{ser.fechaIngreso}" filterMatchMode="gte" >
                                <f:facet name="filter">
                                    <p:calendar label="Ids" onselect="PF('dtServidor').filter()" styleClass="custom-filter" navigator="true" pattern="yyyy-MM-dd" >
                                        <p:ajax event="dateSelect" oncomplete="PF('dtServidor').filter()" />
                                    </p:calendar>
                                </f:facet>
                                <h:outputText value="#{ser.fechaIngreso}">
                                    <f:convertDateTime pattern="dd-MM-yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Domicilio" >
                                <h:outputText value="#{ser.persona.direccion}"/>
                            </p:column>
                            <p:column headerText="Estado Civil" style="width: 8%; ">
                                <h:outputText value="#{ser.estadoCivil}"/>
                            </p:column>
                            <p:column headerText="Acciones" style="text-align: center; width: 7%; ">
                                <p:commandLink title="Editar Servidor Público" actionListener="#{servidorPublicoView.nuevoDatos(ser,'btn-servidor')}" process="@this"
                                               update="formMain:dataTableServidorPublico">
                                    <i class="fa fa-edit" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="yes" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check"/>
                            <p:commandButton value="no" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times"/>
                        </p:confirmDialog>
                        <br></br>
                        <br></br>
                    </p:tab>
                    <p:tab  title="Funciones de la Institución" id="funcionesInstitucionTab">                            
                        <p:dataTable id="servidorPublico1" emptyMessage="No se encontró ningún servidor público" widgetVar="dtServidor1" var="ser1"
                                     style="width: 100%;" reflow="true" paginator="true" lazy="true" rows="25"
                                     rowsPerPageTemplate="25,50,100" value="#{servidorPublicoView.servidorLazy}"
                                     selectionMode="single" rowKey="#{ser1.id}"
                                     rowIndexVar="num"
                                     paginatorPosition="bottom"
                                     currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
                            <f:facet name="header">
                                Datos del Distributivo
                            </f:facet>
                            <p:column headerText="N°" style="width: 2%;text-align: center">
                                <h:outputText value="#{num+1}"/>
                            </p:column>
                            <p:column headerText="Nombre" style="width: 13%" filterBy="#{ser1.persona.nombreCompleltoSql}" filterMatchMode="contains">
                                <h:outputText value="#{ser1.persona.nombreCompleltoSql}"/>
                            </p:column>
                            <p:column headerText="Cargo" style="width: 11%; " filterBy="#{ser1.distributivo.cargo.nombreCargo}" filterMatchMode="contains">
                                <h:outputText value="#{ser1.distributivo.cargo.nombreCargo}"/>
                            </p:column>
                            <p:column headerText="Régimen Laboral" style="width: 12%; " filterBy="#{ser1.distributivo.regimen.nombre}" filterMatchMode="contains">
                                <h:outputText value="#{ser1.distributivo.regimen.nombre}"/>
                            </p:column>
                            <p:column headerText="Tipo de Contrato" filterBy="#{ser1.distributivo.tipoContrato.nombre}" filterMatchMode="contains" style="width: 12%">
                                <h:outputText value="#{ser1.distributivo.tipoContrato.nombre}"/>
                            </p:column>
                            <p:column headerText="Email Institucional" style="width: 10%; " >
                                <h:outputText value="#{ser1.emailInstitucion}"/>
                            </p:column>
                            <p:column headerText="Teléfono" style="width: 5%;text-align: center" >
                                <h:outputText value="#{ser1.telefonoOficina}"/>
                            </p:column>
                            <p:column headerText="Fecha de Salida" style="width: 5%;text-align: center" >
                                <h:outputText value="#{ser1.fechaSalida == null ? 'NO EXISTE' : ser1.fechaSalida}">
                                    <f:convertDateTime pattern="dd-MM-yyyy"/>
                                </h:outputText>
                            </p:column>
                            <p:column headerText="Estado" filterBy="#{ser1.estado}" style="width: 5%; text-align: center; ">
                                <f:facet name="filter">
                                    <p:selectOneMenu onchange="PF('dtServidor1').filter()" styleClass="custom-filter">
                                        <f:converter converterId="javax.faces.Boolean" />
                                        <f:selectItem itemLabel="Todos" itemValue=""/>
                                        <f:selectItem itemLabel="ACTIVO" itemValue="TRUE" />
                                        <f:selectItem itemLabel="INACTIVO" itemValue="FALSE" />
                                    </p:selectOneMenu>
                                </f:facet>
                                <h:outputText value="#{ser1.estado ? 'ACTIVO':'INACTIVO' }" />
                            </p:column>
                            <p:column headerText="Acciones" style="text-align: center; width: 5%; ">
                                <p:commandLink title="Agregar Cargo de Servidor Público" actionListener="#{servidorPublicoView.nuevo(ser1,'btn-cargo',true)}" process="@this"
                                               update="formServidorPublico"  disabled="#{ser1.distributivo != null? true: false}" >
                                    <i class="fa fa-plus new" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                </p:commandLink>
                                <p:commandLink title="Editar Servidor Público" actionListener="#{servidorPublicoView.nuevo(ser1,'btn-cargo',false)}" process="@this"
                                               update="formServidorPublico"  disabled="#{ser1.distributivo== null? true: false}">
                                    <i class="fa fa-edit" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                </p:commandLink>
                            </p:column>
                        </p:dataTable>
                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                            <p:commandButton value="yes" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check"/>
                            <p:commandButton value="no" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times"/>
                        </p:confirmDialog>
                    </p:tab>
                </p:tabView>
            </h:panelGroup>
        </h:form>

        <p:dialog id="servidorPublicoDialog" header="Formulario de Servidor Público" widgetVar="servidorPublicoDialog"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="true" width="#{servidorPublicoView.weightDig+40}" height="#{servidorPublicoView.heightDlg-110}">
            <h:form id="frmdlg" prependId="false">
                <h:panelGroup id="formServidorPublico" layout="block">
                    <p:fieldset title="Datos Servidor Público" id="fieldset-servidor" rendered="#{servidorPublicoView.nuevodig}">
                        <p:panelGrid columns="3" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <h:panelGroup layout="block" class="panelInput" >
                                    <p:outputLabel for="identificacion"  value="Identificación:" />
                                    <div class="ui-inputgroup">
                                        <p:inputText id="identificacion" class="panelInput" readonly="false" required="true" style="width: 100%"
                                                     value="#{servidorPublicoView.servidor.persona.identificacion}" maxlength="10" onkeypress="focusNextOnEnter(event, 'listCliente')">
                                            <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                            <p:ajax update="identificacion" />
                                        </p:inputText>
                                        <p:commandButton title="Lista de Cliente" icon="fa fa-search" id="listCliente"
                                                         actionListener="#{servidorPublicoView.buscarCliente()}"
                                                         process="@this" update="@(.ui-panelgrid)" rendered="#{servidorPublicoView.servidor.id!=null?false:true}"
                                                         styleClass="green-button button-group" >
                                            <p:ajax event="dialogReturn" listener="#{servidorPublicoView.selectData}" update="fieldset-servidor" />
                                        </p:commandButton>
                                    </div>
                                </h:panelGroup> 
                            </p:panelGrid>
                        </p:panelGrid>
                        <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="servidorPublico" value="Servidor Público:" style="font-weight: bold"/>
                                <p:inputText id="servidorPublico" class="panelInput" readonly="true" value="#{servidorPublicoView.servidor.persona.nombre} #{servidorPublicoView.servidor.persona.apellido}"
                                             required="false" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'servidorPublico')">
                                </p:inputText>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="direccionDomiciliaria" value="Domicilio:" style="font-weight: bold"/>
                                <p:inputText id="direccionDomiciliaria" class="panelInput" readonly="true" value="#{servidorPublicoView.servidor.persona.direccion}"
                                             required="false" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'direccionDomiciliaria')">
                                </p:inputText>
                            </p:panelGrid>
                        </p:panelGrid>  
                        <p:panelGrid columns="4" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="codBiometrico"  value="Código Biométrico:" style="font-weight: bold"/>
                                <p:inputText id="codBiometrico" value="#{servidorPublicoView.servidor.codBiometrico}" style="width: 100%" onkeypress="focusNextOnEnter(event, 'puntoMarcacion')"/>
                            </p:panelGrid>

                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="puntoMarcacion"  value="Punto Marcación:" style="font-weight: bold"/>
                                <p:inputText id="puntoMarcacion" value="#{servidorPublicoView.servidor.puntoMarcacion}" style="width: 100%" onkeypress="focusNextOnEnter(event, 'fecha-v')"/>
                            </p:panelGrid>

                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Fecha de Ingreso:" style="font-weight: bold"/>
                                <p:calendar id="fecha-v" pattern="dd/MM/yyyy" mask="true" navigator="true" locale="es" required="true" readonlyInput="true" 
                                            value="#{servidorPublicoView.servidor.fechaIngreso}"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="estadoCivil" value="Estado Civil:" style="font-weight: bold" />
                                <p:selectOneMenu id="estadoCivil" value="#{servidorPublicoView.servidor.estadoCivil}" converter="#{utilConverter}" 
                                                 filter="true" filterMatchMode="startsWith" style="width: 100%">
                                    <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItems value="#{servidorPublicoView.listCatalogo}" var="lista"
                                                   itemLabel="#{lista.texto}" itemValue="#{lista}" itemLabelEscaped="false">
                                    </f:selectItems>
                                    <p:ajax update="gridConyuge" />
                                </p:selectOneMenu>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="etnia" value="Etnia:" style="width: auto;font-weight: bold"/>
                                <p:selectOneMenu id="etnia" value="#{servidorPublicoView.servidor.etnia}" converter="#{utilConverter}"
                                                 filter="true" filterMatchMode="startsWith" style="width: 100%">
                                    <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItems value="#{servidorPublicoView.listCatalogo1}" var="lis"
                                                   itemLabel="#{lis.texto}" itemValue="#{lis}" itemLabelEscaped="false"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                        </p:panelGrid>
                        <p:panelGrid columns="4" layout="grid" styleClass="ui-panelgrid-blank form-group" id="gridConyuge">
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="estadoca" rendered="#{servidorPublicoView.renderedEstadoCivil(servidorPublicoView.servidor.estadoCivil.codigo)}">
                                <p:outputLabel for="nombreconyuge" value="Cónyuge:" style="font-weight: bold"/>
                                <p:inputText id="nombreconyuge" class="panelInput" value="#{servidorPublicoView.servidor.nombreConyugue}"
                                             required="false" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'nombreconyuge')">
                                </p:inputText>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="form-group ui-panelgrid-blank" id="estadoca1" rendered="#{servidorPublicoView.renderedEstadoCivil(servidorPublicoView.servidor.estadoCivil.codigo)}">
                                <p:outputLabel for="cedulaconyuge" value="Cédula:" style="font-weight: bold"/>
                                <p:inputText id="cedulaconyuge" class="panelInput" value="#{servidorPublicoView.servidor.cedulaConyugue}"
                                             required="false" style="text-transform: uppercase;width: 100%" maxlength="10" onkeypress="focusNextOnEnter(event, 'cedulaconyuge')">
                                </p:inputText>
                            </p:panelGrid>
                            <p:panelGrid columns="1"  styleClass="form-group ui-panelgrid-blank" layout="grid" >
                                <p:outputLabel for="tiposangre" value="Tipo de Sangre:" style="font-weight: bold"/>
                                <p:selectOneMenu id="tiposangre" value="#{servidorPublicoView.servidor.tipoSangre}" converter="#{utilConverter}"
                                                 filter="true" filterMatchMode="startsWith" style="width: 100%">
                                    <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItems value="#{servidorPublicoView.listCatalogo3}" var="tipolista"
                                                   itemLabel="#{tipolista.texto}" itemValue="#{tipolista}" itemLabelEscaped="false"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                            <p:panelGrid columns="1"  styleClass="form-group ui-panelgrid-blank" layout="grid" >
                                <p:outputLabel for="cell" value="Teléfono/Celular:" style="font-weight: bold"/>
                                <p:inputText id="cell" class="panelInput" readonly="true" onkeypress="focusNextOnEnter(event, 'cell')"
                                             value="#{servidorPublicoView.cliente.telefono==null? servidorPublicoView.servidor.persona.celular:servidorPublicoView.servidor.persona.telefono}"
                                             required="false" style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Datos del Servidor" rendered="#{servidorPublicoView.variable}">
                        <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput">
                                <p:outputLabel for="@next" value="No. de Identificación:"  style="font-weight: bold"/>
                                <p:inputText id="identificacionServidorView" value="#{servidorPublicoView.servidor.persona.identificacion}" readonly="true"
                                             style="width: 100%" onkeypress="focusNextOnEnter(event, 'identificacionServidorView')"/>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel for="@next" value="Apellidos y Nombres:"  style="font-weight: bold"/>
                                <p:inputText id="nombreServidorView" value="#{servidorPublicoView.servidor.persona.nombreCompleto}" readonly="true"
                                             style="width: 100%" onkeypress="focusNextOnEnter(event, 'nombreServidorView')"/>
                            </h:panelGroup>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Contacto de Emergencia" id="fieldset-emergencia" rendered="#{!servidorPublicoView.variable}">
                        <p:panelGrid columns="3" layout="grid" styleClass="form-group ui-panelgrid-blank" id="emergencianombre">
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                <p:outputLabel for="nombreemergencia" value="Nombre:" style="font-weight: bold"/>
                                <p:inputText id="nombreemergencia" class="panelInput" value="#{servidorPublicoView.servidor.nombresEmergencia}"
                                             required="true" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'nombreemergencia')">
                                </p:inputText>
                            </p:panelGrid>  
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >  
                                <p:outputLabel for="apellidoemergencia" value="Apellido:" style="font-weight: bold"/>
                                <p:inputText id="apellidoemergencia" class="panelInput" value="#{servidorPublicoView.servidor.apellidoEmergencia}"
                                             required="true" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'apellidoemergencia')">
                                </p:inputText>
                            </p:panelGrid>  
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >  
                                <p:outputLabel for="telefonoemergencia" value="Teléfono/cel:" style="font-weight: bold"/>
                                <p:inputText id="telefonoemergencia" class="panelInput" value="#{servidorPublicoView.servidor.telefonoEmergencia}" 
                                             required="true" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'telefonoemergencia')">
                                    <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                </p:inputText>
                            </p:panelGrid>   
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Funciones Institución"  rendered="#{servidorPublicoView.variable}"  >
                        <p:panelGrid columns="3" layout="grid" styleClass="form-group ui-panelgrid-blank" >
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" > 
                                <p:outputLabel for="email" value="Email de la Institución:" style="font-weight: bold"/>
                                <p:inputText id="email" style="text-transform: uppercase;width: 100%" value="#{servidorPublicoView.servidor.emailInstitucion}"
                                             required="true" onkeypress="focusNextOnEnter(event, 'email')">
                                </p:inputText>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" > 
                                <p:outputLabel for="telefono" value="Teléfono:" style="font-weight: bold"/>
                                <p:inputMask  mask="(99) 999-9999" id="telefono" placeholder="(99) 999-9999" onkeypress="focusNextOnEnter(event, 'telefono')"
                                              style="width: 100%" value="#{servidorPublicoView.servidor.telefonoOficina}" />
                            </p:panelGrid>                                     
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" > 
                                <p:outputLabel for="e" value="Extensión:" style="font-weight: bold"/>
                                <p:inputText id="e" required="false" maxlength="4" value="#{servidorPublicoView.servidor.extencion}"  
                                             onkeypress="focusNextOnEnter(event, 'e')" style="width: 100%">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </p:panelGrid>                                     
                        </p:panelGrid>
                        <p:panelGrid  columns="2" layout="grid" styleClass="form-group ui-panelgrid-blank">
                            <h:panelGroup>
                                <p:outputLabel value="Actividades" for="actividades" style="font-weight: bold"/>
                                <p:inputTextarea  id="actividades" rows="3" cols="30" autoResize="false" 
                                                  class="panelInput" readonly ="false" required="true"
                                                  style="width: 100%; text-transform: uppercase" onkeypress="focusNextOnEnter(event, 'actividades')"
                                                  value="#{servidorPublicoView.servidor.actividades}"/>
                            </h:panelGroup>
                            <h:panelGroup>
                                <p:selectBooleanButton offLabel="No Aplica Horas Extras" onLabel="Aplica Horas Extras" value="#{servidorPublicoView.servidor.realizaHorasExtras}" >
                                    <p:ajax update="horasExtras" />
                                </p:selectBooleanButton><br/><br/>
                                <p:inputNumber decimalPlaces="0" value="#{servidorPublicoView.servidor.maximoHorasExtras}" id="horasExtras" title="Maximo de horas extras" 
                                               placeholder="Máximo de horas extras" readonly="#{!servidorPublicoView.servidor.realizaHorasExtras}" maxValue="#{servidorPublicoView.maxHoras}" minValue="0" />
                            </h:panelGroup>
                        </p:panelGrid>
                    </p:fieldset >
                    <p:fieldset legend="Movimientos bancarios" rendered="#{servidorPublicoView.nuevodig}">
                        <h:panelGroup id="dataBan" layout="block">
                            <p:commandButton value="Agregar Entidad Bancaria"
                                             icon="ui-icon-plus"
                                             styleClass="Fs16" style="width: auto; margin-bottom: 15px;"
                                             actionListener="#{servidorPublicoView.openDlgBan()}"   
                                             process="@this" >
                                <p:ajax event="dialogReturn" listener="#{servidorPublicoView.selectDataBan}" update="tablaBanco" />
                            </p:commandButton>
                            <p:dataTable  paginator="true"  paginatorPosition="bottom"
                                          rowsPerPageTemplate="10,20" tableStyle="table-layout:auto"
                                          reflow="true"  rows="10" rowIndexVar="can"
                                          emptyMessage="No existen cuentas, ningún movimiento bancario" 
                                          id="tablaBanco" value="#{servidorPublicoView.bancoList}" var="Art"
                                          editable="true" editMode="cell" widgetVar="cellCars"
                                          currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                          paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
                                <f:facet name="header">
                                    Movimiento de Entidades Bancarias de Servidores Públicos
                                </f:facet>
                                <p:ajax event="cellEdit" listener="#{servidorPublicoView.onCellEdit}" update="tablaBanco" />
                                <p:column headerText="Banco">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{Art.banco.nombreBanco}" /></f:facet>
                                        <f:facet name="input"><p:inputText id="modelInput" value="#{Art.banco.nombreBanco}" style="width:96%"/></f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Cuenta">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{Art.cuentaBanco}" /></f:facet>
                                        <f:facet name="input">
                                            <p:inputText value="#{Art.cuentaBanco}" style="width:96%" 
                                                         maxlength="16" > 
                                                <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                            </p:inputText>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Tipo de Cuenta">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{Art.tipoCuenta.texto}" /></f:facet>
                                        <f:facet name="input">
                                            <h:selectOneMenu value="#{Art.tipoCuenta}" style="width:100%" converter="#{utilConverter}">
                                                <f:selectItem itemLabel="Seleccione" />
                                                <f:selectItems value="#{servidorPublicoView.listCatalogo2}" var="ti" itemLabel="#{ti.texto}" itemValue="#{ti}"/>
                                            </h:selectOneMenu>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Registro">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{Art.registro}" /></f:facet>
                                        <f:facet name="input"><p:inputText value="#{Art.registro}" style="width:96%"/></f:facet>

                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Estado" style="text-align: center">
                                    <p:selectBooleanCheckbox value="#{Art.estadoCuenta}" >
                                        <p:ajax update="tablaBanco" process="@this"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>
                                <p:column headerText="Quitar" style="text-align: center">
                                    <p:commandLink title="Eliminar" process="@this" 
                                                   actionListener="#{servidorPublicoView.borrarLista(can)}"
                                                   update="tablaBanco">
                                        <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 5px; color: red;"></i>
                                        <p:confirm header="Confirmación de eliminación" message="¿Está seguro de eliminar la cuenta bancaria?" icon="fa fa-exclamation-triangle" />
                                    </p:commandLink>        
                                </p:column>
                            </p:dataTable>

                        </h:panelGroup>
                    </p:fieldset>
                    <p:fieldset legend="Datos del Distributivo" rendered="#{servidorPublicoView.variable}">
                        <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel value="Período" for="periodo" />
                                <p:selectOneMenu id="periodo" style="width: 100px;"
                                                 value="#{servidorPublicoView.busqueda.anio}">
                                    <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" 
                                                  noSelectionOption="true" />
                                    <f:selectItems value="#{servidorPublicoView.periodos}"
                                                   var="periodo"
                                                   itemLabel="#{periodo.anio}"
                                                   itemValue="#{periodo.anio}"/>
                                    <p:ajax update="periodo"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <h:panelGroup layout="block" class="panelInput" >
                                    <p:outputLabel for="cargo" value="Cargo:" style="font-weight: bold" />
                                    <div class="ui-inputgroup">
                                        <p:inputText id="cargo" class="panelInput" readonly="true" required="false" onkeypress="focusNextOnEnter(event, 'listCargo')"
                                                     value="#{servidorPublicoView.servidor.distributivo.cargo.nombreCargo}" style="width: 100%"/>
                                        <p:commandButton title="Lista de Cargos" icon="fa fa-search"
                                                         styleClass="green-button button-group"
                                                         actionListener="#{servidorPublicoView.openDlgDis()}"
                                                         process="@this"
                                                         id="listCargo">
                                            <p:ajax event="dialogReturn" listener="#{servidorPublicoView.selectDataDis}" update="grind2,cargo,paneldistributivo" />
                                        </p:commandButton>
                                    </div>
                                </h:panelGroup>
                            </p:panelGrid> 
                        </p:panelGrid>
                        <p:panelGrid columns="3" layout="grid" styleClass="form-group ui-panelgrid-blank" id="grind2">
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel for="regi" value="Régimen Laboral:" style="font-weight: bold"/>
                                <p:inputText id="regi" class="panelInput" readonly="true" onkeypress="focusNextOnEnter(event, 'regi')"
                                             value="#{servidorPublicoView.servidor.distributivo.regimen.nombre}" style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>

                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel for="tipo" value="Tipo de Contrato:" style="font-weight: bold"/>
                                <p:inputText id="tipo" class="panelInput" readonly="true" onkeypress="focusNextOnEnter(event, 'tipo')"
                                             value="#{servidorPublicoView.servidor.distributivo.tipoContrato.nombre}" style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>

                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel title="Escala Salarial" for="escala" value="Escala Salarial:" style="font-weight: bold"/>
                                <p:inputText  id="escala" class="panelInput" readonly="true" required="false" onkeypress="focusNextOnEnter(event, 'escala')"
                                              value="#{servidorPublicoView.distributivoEscala.escalaSalarial.grupoOrganizacional}" style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>

                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel title="Remuneración Básica Unificada" for="RMU" value="R.M.U:" style="font-weight: bold"/>
                                <p:inputNumber  id="RMU" class="panelInput" readonly="true" required="false" onkeypress="focusNextOnEnter(event, 'RMU')"
                                                value="#{servidorPublicoView.distributivoEscala.remuneracionDolares}" style="text-transform: uppercase;width: 100%">
                                </p:inputNumber>
                            </p:panelGrid>

                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel title="Unidad" for="unidad" value="Unidad:" style="font-weight: bold"/>
                                <p:inputText  id="unidad" class="panelInput" readonly="true" required="false" onkeypress="focusNextOnEnter(event, 'unidad')"
                                              value="#{servidorPublicoView.servidor.distributivo.unidadAdministrativa.nombre}" style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel title="Supervisa" for="supervisa" value="Supervisado por:" style="font-weight: bold"/>
                                <p:inputText id="supervisa" class="panelInput" readonly="true" required="false" onkeypress="focusNextOnEnter(event, 'supervisa')"
                                             value="#{servidorPublicoView.servidor.distributivo.unidadAdministrativa.padre.nombre}" 
                                             style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>
                        </p:panelGrid>
                    </p:fieldset>

                    <p:panelGrid id="paneldistributivo" styleClass="form-group ui-panelgrid-blank" rendered="#{servidorPublicoView.variable}">
                        <p:fieldset legend="Datos Adicionales" rendered="#{servidorPublicoView.servidor.distributivo.regimen.codigo == 'CT'}" >
                            <p:panelGrid  columns="3" layout="grid" styleClass="ui-panelgrid-blank form-group" id="panelDetalle" style="">
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen"
                                             rendered="#{servidorPublicoView.servidor.distributivo.regimen.codigo == 'CT'}">
                                    <p:outputLabel for="Nregistro" value="N registro MT:" style="font-weight: bold"/>
                                    <p:inputText id="Nregistro" required="true" style="text-transform: uppercase;width: 100%"
                                                 maxlength="10" value="#{servidorPublicoView.detalle_registro.registroMt}" onkeypress="focusNextOnEnter(event, 'fechaReg')" >
                                    </p:inputText>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank"  layout="grid" id="desregimen1"
                                             rendered="#{servidorPublicoView.servidor.distributivo.regimen.codigo == 'CT'}">
                                    <p:outputLabel for="fechaReg" value="Fecha Registro MT:" style="font-weight: bold"/>
                                    <p:calendar id="fechaReg" pattern="dd-MM-yyyy" mask="true" required="true" value="#{servidorPublicoView.detalle_registro.fechaRegistroMt}"
                                                onkeypress="focusNextOnEnter(event, 'Ncontrato')" navigator="true" locale="es" style="width: 100%"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank"  layout="grid" id="desregimen2"
                                             rendered="#{servidorPublicoView.servidor.distributivo.regimen.codigo == 'CT'}">
                                    <p:outputLabel for="Ncontrato" value="N° Contrato" style="font-weight: bold"/>
                                    <p:inputText id="Ncontrato" required="true" style="text-transform: uppercase;width: 100%;"
                                                 value="#{servidorPublicoView.detalle_registro.contratoRmt}" onkeypress="focusNextOnEnter(event, 'fechadesde')" >
                                    </p:inputText>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen3"
                                             rendered="#{servidorPublicoView.servidor.distributivo.regimen.codigo == 'CT'}">
                                    <p:outputLabel for="fechadesde" value="Rige Desde:" style="font-weight: bold"/>
                                    <p:calendar id="fechadesde" pattern="dd-MM-yyyy" mask="true" required="true" value="#{servidorPublicoView.detalle_registro.rigeDesde}"
                                                onkeypress="focusNextOnEnter(event, 'fechahasta')" navigator="true" locale="es" style="width: 100%"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen4"
                                             rendered="#{servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'CI' or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'CSO' or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'CSOL'}">
                                    <p:outputLabel for="fechahasta" value="Rige Hasta:" style="font-weight: bold"/>
                                    <p:calendar id="fechahasta" pattern="dd-MM-yyyy" mask="true" required="true" value="#{servidorPublicoView.detalle_registro.rigeHasta}"
                                                onkeypress="focusNextOnEnter(event, 'n_Accion')" navigator="true" locale="es" style="width: 100%"/>
                                </p:panelGrid>
                            </p:panelGrid>
                        </p:fieldset>
                        <p:fieldset legend="Datos Adicionales" rendered="#{servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NP' or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NPRO' or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NLR'
                                                                           or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NPF'}" >
                            <p:panelGrid  columns="3" columnClasses="ui-grid-col-20" styleClass="ui-panelgrid-blank form-group">
                                <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen5"
                                              rendered="#{servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NP' or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NPRO' or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NLR'
                                                          or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NPF'}">
                                    <p:outputLabel for="n_Accion" value="N°de Acción del personal: " style="font-weight: bold" />
                                    <p:inputText id="n_Accion" required="true"
                                                 value="#{servidorPublicoView.detalle_registro.accionPersonal}"
                                                 onkeypress="focusNextOnEnter(event, 'fechaAccionPersonal')" style="text-transform: uppercase;width: 100%">
                                    </p:inputText>

                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen6"
                                             rendered="#{servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NP' or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NPRO' or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NLR'
                                                         or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NPF'}">
                                    <p:outputLabel for="fechaAccionPersonal" value="Fecha de Acción del Personal:" style="font-weight: bold"/>
                                    <p:calendar id="fechaAccionPersonal"  pattern="dd-MM-yyyy" mask="true" required="true"
                                                value="#{servidorPublicoView.detalle_registro.fechaAccionPersonal}"
                                                onkeypress="focusNextOnEnter(event, 'supervisor')" locale="es" navigator="true"
                                                style="text-transform: uppercase;width: 100%"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen7" 
                                             rendered="#{servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NP' or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NPRO' or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NLR'
                                                         or servidorPublicoView.servidor.distributivo.tipoContrato.codigo == 'NPF'}">
                                    <h:panelGroup layout="span" class="panelInput" >
                                        <div class="ui-inputgroup">
                                            <p:outputLabel for="supervisor" value="Supervisor: " style="font-weight: bold"/>
                                            <p:commandButton title="Lista de Servidores Públicos" icon="fa fa-search" styleClass="green-button button-group"
                                                             actionListener="#{servidorPublicoView.openDlgSer()}" process="@this" >
                                                <p:ajax event="dialogReturn" listener="#{servidorPublicoView.selectDataSer}" update="desregimen7" />
                                            </p:commandButton>
                                        </div>
                                    </h:panelGroup>
                                    <p:inputText id="supervisor" class="panelInput" readonly="true" required="false"
                                                 value="#{servidorPublicoView.detalle_registro.supervisor.persona.nombreCompleto}"
                                                 onkeypress="focusNextOnEnter(event, 'guardar')" style="text-transform: uppercase;width: 100%"/>
                                </p:panelGrid>
                            </p:panelGrid>
                        </p:fieldset>
                    </p:panelGrid>
                    <br></br>
                    <center>
                        <p:commandButton value="Guardar" id="guardar" update="formMain:dataTableServidorPublico,formServidorPublico"
                                         icon="ui-icon-save"  actionListener="#{servidorPublicoView.guardarServidor()}" styleClass="Fs16"/>
                    </center>
                </h:panelGroup>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
