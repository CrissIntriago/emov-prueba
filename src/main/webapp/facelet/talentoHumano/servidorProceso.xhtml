<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../WEB-INF/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:u="http://xmlns.jcp.org/jsf/composite/comp">
    <a href="servidorPublico.xhtml"></a>>

    <ui:define name="title">
        Mantenimiento Servidor Público
    </ui:define>

    <ui:define name="content">

        <div class="ui-g ui-fluid">
            <u:titleTask task="#{aprobacionControlPrevio.tarea}" tramite="#{aprobacionControlPrevio.tramite}" />
        </div>
        <h:form id="formMain">
            <div class="ui-fluid">
                <div class="ui-g">
                    <div class="ui-g-12">
                        <div class="car card-w-title">
                            <h:panelGroup id="dataTableServidorPublico" layout="block">
                                <p:growl showDetail="true" globalOnly="true" showSummary="true" ><p:autoUpdate/></p:growl>
                                <p:tabView id="formMain" prependId="false" style="width: 100%;">
                                    <p:tab  title="Datos Personales">
                                        <p:commandButton value="Adicionar Servidor Público"
                                                         icon="ui-icon-plus"
                                                         styleClass="Fs16 nuevo" style="width: auto; margin-bottom: 15px;"
                                                         actionListener="#{servidorPublicoProceso.nuevoDatos(null, 'btn-servidor')}"   
                                                         update="formServidorPublico"
                                                         rendered="true"/>
                                        <p:commandButton value="Limpiar Filtro" icon="ui-icon-refresh" styleClass="Fs16"
                                                         style="width: auto; margin-left: 15px;"/>
                                        <p:dataTable id="servidorPublico" emptyMessage="No se encontró ningún servidor público" widgetVar="dtServidor" var="ser"
                                                     style="width: 100%;text-align:center" reflow="true" paginator="true" lazy="true" rows="25"
                                                     rowsPerPageTemplate="25,50,100" value="#{servidorPublicoProceso.servidorLazy}"
                                                     currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                     selectionMode="single" rowKey="#{ser.id}" 
                                                     paginatorPosition="bottom"
                                                     rowIndexVar="num"
                                                     >
                                            <f:facet name="header">
                                                Listado de Servidores Públicos
                                            </f:facet>
                                            <p:column headerText="N°" style="width: 4%;">
                                                <h:outputText value="#{num+1}"/>
                                            </p:column>
                                            <p:column headerText="Nombre" filterBy="#{ser.persona.nombreCompleltoSql}" filterMatchMode="contains" >
                                                <h:outputText value="#{ser.persona.nombreCompleltoSql}"/>
                                            </p:column>
                                            <p:column headerText="Identificación" style="width: 10%; " filterBy="#{ser.persona.identificacion}">
                                                <h:outputText value="#{ser.persona.identificacion}"/>
                                            </p:column>
                                            <p:column headerText="Fecha de Ingreso" style="width: 7%; ;" id="espacioFecha" filterBy="#{ser.fechaIngreso}" filterMatchMode="gte" >
                                                <f:facet name="filter">
                                                    <p:calendar label="Ids" onselect="PF('dtServidor').filter()" styleClass="custom-filter" navigator="true" pattern="yyyy-MM-dd" >
                                                        <p:ajax event="dateSelect" oncomplete="PF('dtServidor').filter()" />
                                                    </p:calendar>
                                                </f:facet>
                                                <h:outputText value="#{ser.fechaIngreso}">
                                                    <f:convertDateTime pattern="dd-MM-yyyy"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column headerText="Domicilio" >
                                                <h:outputText value="#{ser.persona.direccion}"/>
                                            </p:column>
                                            <p:column headerText="Estado Civil" style="width: 8%; ">
                                                <h:outputText value="#{ser.estadoCivil}"/>
                                            </p:column>
                                            <p:column headerText="Acciones" style="text-align: center; width: 7%">
                                                <p:commandLink actionListener="#{servidorPublicoProceso.nuevoDatos(ser,'btn-servidor')}" title="Editar Servidor Público" 
                                                               update="formMain:dataTableServidorPublico" process="@this">
                                                    <i class="fa fa-edit" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                                </p:commandLink>
                                            </p:column>
                                        </p:dataTable>
                                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                            <p:commandButton value="yes" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check"/>
                                            <p:commandButton value="no" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times"/>
                                        </p:confirmDialog>
                                        <br></br>
                                        <br></br>
                                    </p:tab>
                                    <p:tab  title="Funciones de la Institución" id="funcionesInstitucionTab">
                                        <p:dataTable id="servidorPublico1" emptyMessage="No se encontró ningún servidor público" widgetVar="dtServidor1" var="ser1"
                                                     style="width: 100%;" reflow="true" paginator="true" lazy="true" rows="25"
                                                     rowsPerPageTemplate="25,50,100" value="#{servidorPublicoProceso.servidorLazy}"
                                                     selectionMode="single" rowKey="#{ser1.id}"
                                                     rowIndexVar="num"
                                                     paginatorPosition="bottom"
                                                     currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">

                                            <f:facet name="header">
                                                Datos del Distributivo
                                            </f:facet>
                                            <p:column headerText="N°" style="width: 2%;text-align: center">
                                                <h:outputText value="#{num+1}"/>
                                            </p:column>
                                            <p:column headerText="Nombre" style="width: 13%" filterBy="#{ser1.persona.nombreCompleltoSql}" filterMatchMode="contains">
                                                <h:outputText value="#{ser1.persona.nombreCompleltoSql}"/>
                                            </p:column>
                                            <p:column headerText="Cargo" style="width: 11%; " filterBy="#{ser1.distributivo.cargo.nombreCargo}" filterMatchMode="contains">
                                                <h:outputText value="#{ser1.distributivo.cargo.nombreCargo}"/>
                                            </p:column>
                                            <p:column headerText="Régimen Laboral" style="width: 12%; " filterBy="#{ser1.distributivo.regimen.nombre}" filterMatchMode="contains">
                                                <h:outputText value="#{ser1.distributivo.regimen.nombre}"/>
                                            </p:column>
                                            <p:column headerText="Tipo de Contrato" filterBy="#{ser1.distributivo.tipoContrato.nombre}" filterMatchMode="contains" style="width: 12%">
                                                <h:outputText value="#{ser1.distributivo.tipoContrato.nombre}"/>
                                            </p:column>
                                            <p:column headerText="Email Institucional" style="width: 10%; " >
                                                <h:outputText value="#{ser1.emailInstitucion}"/>
                                            </p:column>
                                            <p:column headerText="Teléfono" style="width: 5%;text-align: center" >
                                                <h:outputText value="#{ser1.telefonoOficina}"/>
                                            </p:column>
                                            <p:column headerText="Fecha de Salida" style="width: 5%;text-align: center" >
                                                <h:outputText value="#{ser1.fechaSalida == null ? 'NO EXISTE' : ser1.fechaSalida}">
                                                    <f:convertDateTime pattern="dd-MM-yyyy"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column headerText="Estado" filterBy="#{ser1.estado}" style="width: 5%; text-align: center">
                                                <f:facet name="filter">
                                                    <p:selectOneMenu onchange="PF('dtServidor1').filter()" styleClass="custom-filter">
                                                        <f:converter converterId="javax.faces.Boolean" />
                                                        <f:selectItem itemLabel="Todos" itemValue=""/>
                                                        <f:selectItem itemLabel="ACTIVO" itemValue="TRUE" />
                                                        <f:selectItem itemLabel="INACTIVO" itemValue="FALSE" />
                                                    </p:selectOneMenu>
                                                </f:facet>
                                                <h:outputText value="#{ser1.estado ? 'ACTIVO':'INACTIVO' }" />
                                            </p:column>
                                            <p:column headerText="Acciones" style="text-align: center; width: 5%">
                                                <p:commandLink title="Agregar Servidor Público" actionListener="#{servidorPublicoProceso.nuevo(ser1,'btn-cargo',true)}" process="@this"
                                                               update="formServidorPublico"  disabled="#{ser1.distributivo != null? true: false}"  >
                                                    <i class="fa fa-plus new" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                                </p:commandLink>
                                                <p:commandLink actionListener="#{servidorPublicoProceso.nuevo(ser1,'btn-cargo',false)}" title="Editar Servidor Público" 
                                                               update="servidorPublico1" process="@this"
                                                               disabled="#{ser1.distributivo != null? false: true}">
                                                    <i class="fa fa-edit" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                                </p:commandLink>
                                            </p:column>
                                        </p:dataTable>
                                        <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                            <p:commandButton value="yes" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check"/>
                                            <p:commandButton value="no" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times"/>
                                        </p:confirmDialog>

                                    </p:tab>
                                </p:tabView>
                                <center>
                                    <p:commandButton value="Enviar Trámite" process="@this"
                                                     icon="fa fa-external-link"  actionListener="#{servidorPublicoProceso.abriDlogoObservaciones()}"
                                                     style="width: auto; background: #0081cb; margin-top: 2%;"
                                                     rendered="#{servidorPublicoProceso.vista==false}"/>
                                </center>
                                <br/>
                            </h:panelGroup>
                        </div>
                    </div>
                </div>
            </div>
        </h:form>
        <p:dialog id="servidorPublicoDialog" header="Formulario de Servidor Público" widgetVar="servidorPublicoDialog"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="true" width="#{servidorPublicoProceso.weightDig+40}" height="#{servidorPublicoProceso.heightDlg-110}">
            <h:form id="frmdlg" prependId="false">
                <h:panelGroup id="formServidorPublico" layout="block">
                    <p:fieldset title="Datos Servidor Público" id="fieldset-servidor" rendered="#{servidorPublicoProceso.nuevodig}">
                        <p:panelGrid columns="3" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <h:panelGroup layout="block" class="panelInput" >
                                    <p:outputLabel for="identificacion"  value="Identificación:" />
                                    <div class="ui-inputgroup">
                                        <p:inputText id="identificacion" class="panelInput" readonly="false" required="true" style="width: 100%"
                                                     value="#{servidorPublicoProceso.servidor.persona.identificacion}" maxlength="10" onkeypress="focusNextOnEnter(event, 'listCliente')">
                                            <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                            <p:ajax update="identificacion" />
                                        </p:inputText>
                                        <p:commandButton title="Lista de Cliente" icon="fa fa-search" id="listCliente"
                                                         actionListener="#{servidorPublicoProceso.buscarCliente()}"
                                                         process="@this" update="@(.ui-panelgrid)" rendered="#{servidorPublicoProceso.servidor.id!=null?false:true}"
                                                         styleClass="green-button button-group" >
                                            <p:ajax event="dialogReturn" listener="#{servidorPublicoProceso.selectData}" update="fieldset-servidor" />
                                        </p:commandButton>
                                    </div>
                                </h:panelGroup> 
                            </p:panelGrid>
                        </p:panelGrid>
                        <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="servidorPublico" value="Servidor Público:" style="font-weight: bold"/>
                                <p:inputText id="servidorPublico" class="panelInput" readonly="true" value="#{servidorPublicoProceso.servidor.persona.nombre} #{servidorPublicoProceso.servidor.persona.apellido}"
                                             required="false" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'servidorPublico')">
                                </p:inputText>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="direccionDomiciliaria" value="Domicilio:" style="font-weight: bold"/>
                                <p:inputText id="direccionDomiciliaria" class="panelInput" readonly="true" value="#{servidorPublicoProceso.servidor.persona.direccion}"
                                             required="false" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'direccionDomiciliaria')">
                                </p:inputText>
                            </p:panelGrid>
                        </p:panelGrid>  
                        <p:panelGrid columns="4" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="codBiometrico"  value="Código Biométrico:" style="font-weight: bold"/>
                                <p:inputText id="codBiometrico" value="#{servidorPublicoProceso.servidor.codBiometrico}" style="width: 100%" onkeypress="focusNextOnEnter(event, 'codBiometrico')"/>
                            </p:panelGrid>

                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="@next" value="Fecha de Ingreso:" style="font-weight: bold"/>
                                <p:calendar id="fecha-v" pattern="dd/MM/yyyy" mask="true" navigator="true" locale="es" required="true" readonlyInput="true" 
                                            value="#{servidorPublicoProceso.servidor.fechaIngreso}"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="estadoCivil" value="Estado Civil:" style="font-weight: bold" />
                                <p:selectOneMenu id="estadoCivil" value="#{servidorPublicoProceso.servidor.estadoCivil}" converter="#{utilConverter}" 
                                                 filter="true" filterMatchMode="startsWith" style="width: 100%">
                                    <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItems value="#{servidorPublicoProceso.listCatalogo}" var="lista"
                                                   itemLabel="#{lista.texto}" itemValue="#{lista}" itemLabelEscaped="false">
                                    </f:selectItems>
                                    <p:ajax update="gridConyuge" />
                                </p:selectOneMenu>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                <p:outputLabel for="etnia" value="Etnia:" style="width: auto;font-weight: bold"/>
                                <p:selectOneMenu id="etnia" value="#{servidorPublicoProceso.servidor.etnia}" converter="#{utilConverter}"
                                                 filter="true" filterMatchMode="startsWith" style="width: 100%">
                                    <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItems value="#{servidorPublicoProceso.listCatalogo1}" var="lis"
                                                   itemLabel="#{lis.texto}" itemValue="#{lis}" itemLabelEscaped="false"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                        </p:panelGrid>
                        <p:panelGrid columns="4" layout="grid" styleClass="ui-panelgrid-blank form-group" id="gridConyuge">
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="estadoca" rendered="#{servidorPublicoProceso.renderedEstadoCivil(servidorPublicoProceso.servidor.estadoCivil.codigo)}">
                                <p:outputLabel for="nombreconyuge" value="Cónyuge:" style="font-weight: bold"/>
                                <p:inputText id="nombreconyuge" class="panelInput" value="#{servidorPublicoProceso.servidor.nombreConyugue}"
                                             required="false" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'nombreconyuge')">
                                </p:inputText>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="form-group ui-panelgrid-blank" id="estadoca1" rendered="#{servidorPublicoProceso.renderedEstadoCivil(servidorPublicoProceso.servidor.estadoCivil.codigo)}">
                                <p:outputLabel for="cedulaconyuge" value="Cédula:" style="font-weight: bold"/>
                                <p:inputText id="cedulaconyuge" class="panelInput" value="#{servidorPublicoProceso.servidor.cedulaConyugue}"
                                             required="false" style="text-transform: uppercase;width: 100%" maxlength="10" onkeypress="focusNextOnEnter(event, 'cedulaconyuge')">
                                </p:inputText>
                            </p:panelGrid>
                            <p:panelGrid columns="1"  styleClass="form-group ui-panelgrid-blank" layout="grid" >
                                <p:outputLabel for="tiposangre" value="Tipo de Sangre:" style="font-weight: bold"/>
                                <p:selectOneMenu id="tiposangre" value="#{servidorPublicoProceso.servidor.tipoSangre}" converter="#{utilConverter}"
                                                 filter="true" filterMatchMode="startsWith" style="width: 100%">
                                    <f:selectItem itemLabel="Seleccione" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItems value="#{servidorPublicoProceso.listCatalogo3}" var="tipolista"
                                                   itemLabel="#{tipolista.texto}" itemValue="#{tipolista}" itemLabelEscaped="false"/>
                                </p:selectOneMenu>
                            </p:panelGrid>
                            <p:panelGrid columns="1"  styleClass="form-group ui-panelgrid-blank" layout="grid" >
                                <p:outputLabel for="cell" value="Teléfono/Celular:" style="font-weight: bold"/>
                                <p:inputText id="cell" class="panelInput" readonly="true" onkeypress="focusNextOnEnter(event, 'cell')" 
                                             value="#{servidorPublicoProceso.cliente.telefono==null? servidorPublicoProceso.servidor.persona.celular:servidorPublicoProceso.servidor.persona.telefono}"
                                             required="false" style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Datos del Servidor" rendered="#{servidorPublicoProceso.variable}">
                        <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput">
                                <p:outputLabel for="@next" value="No. de Identificación:"  style="font-weight: bold"/>
                                <p:inputText id="identificacionServidorView" value="#{servidorPublicoProceso.servidor.persona.identificacion}" readonly="true"
                                             style="width: 100%" onkeypress="focusNextOnEnter(event, 'identificacionServidorView')"/>
                            </h:panelGroup>
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:outputLabel for="@next" value="Apellidos y Nombres:"  style="font-weight: bold"/>
                                <p:inputText id="nombreServidorView" value="#{servidorPublicoProceso.servidor.persona.nombreCompleto}" readonly="true"
                                             style="width: 100%" onkeypress="focusNextOnEnter(event, 'nombreServidorView')"/>
                            </h:panelGroup>
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Contacto de Emergencia" id="fieldset-emergencia" rendered="#{!servidorPublicoProceso.variable}">
                        <p:panelGrid columns="3" layout="grid" styleClass="form-group ui-panelgrid-blank" id="emergencianombre">
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                <p:outputLabel for="nombreemergencia" value="Nombre:" style="font-weight: bold"/>
                                <p:inputText id="nombreemergencia" class="panelInput" value="#{servidorPublicoProceso.servidor.nombresEmergencia}"
                                             required="false" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'nombreemergencia')">
                                </p:inputText>
                            </p:panelGrid>  
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >  
                                <p:outputLabel for="apellidoemergencia" value="Apellido:" style="font-weight: bold"/>
                                <p:inputText id="apellidoemergencia" class="panelInput" value="#{servidorPublicoProceso.servidor.apellidoEmergencia}"
                                             required="false" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'apellidoemergencia')">
                                </p:inputText>
                            </p:panelGrid>  
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >  
                                <p:outputLabel for="telefonoemergencia" value="Teléfono/cel:" style="font-weight: bold"/>
                                <p:inputText id="telefonoemergencia" class="panelInput" value="#{servidorPublicoProceso.servidor.telefonoEmergencia}" maxlength="10"
                                             required="false" style="text-transform: uppercase;width: 100%" onkeypress="focusNextOnEnter(event, 'telefonoemergencia')">
                                    <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                </p:inputText>
                            </p:panelGrid>   
                        </p:panelGrid>
                    </p:fieldset>
                    <p:fieldset legend="Funciones Institución"  rendered="#{servidorPublicoProceso.variable}"  >
                        <p:panelGrid columns="3" layout="grid" styleClass="form-group ui-panelgrid-blank" >
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" > 
                                <p:outputLabel for="email" value="Email de la Institución:" style="font-weight: bold"/>
                                <p:inputText id="email" style="text-transform: uppercase;width: 100%" value="#{servidorPublicoProceso.servidor.emailInstitucion}"
                                             required="true" onkeypress="focusNextOnEnter(event, 'email')">
                                </p:inputText>
                            </p:panelGrid>
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" > 
                                <p:outputLabel for="telefono" value="Teléfono:" style="font-weight: bold"/>
                                <p:inputMask  mask="(99) 999-9999" id="telefono" placeholder="(99) 999-9999" onkeypress="focusNextOnEnter(event, 'telefono')"
                                              style="width: 100%" value="#{servidorPublicoProceso.servidor.telefonoOficina}" />
                            </p:panelGrid>                                     
                            <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" > 
                                <p:outputLabel for="e" value="Extensión:" style="font-weight: bold"/>
                                <p:inputText id="e" required="false" maxlength="4" value="#{servidorPublicoProceso.servidor.extencion}"  
                                             onkeypress="focusNextOnEnter(event, 'e')" style="width: 100%">
                                    <p:keyFilter regEx="/[\d]/"/>
                                </p:inputText>
                            </p:panelGrid>                                     
                        </p:panelGrid>
                        <p:panelGrid  columns="2" layout="grid" styleClass="form-group ui-panelgrid-blank">
                            <h:panelGroup>
                                <p:outputLabel value="Actividades" for="actividades" style="font-weight: bold"/>
                                <p:inputTextarea  id="actividades" rows="3" cols="30" autoResize="false" 
                                                  class="panelInput" readonly ="false" required="true"
                                                  style="width: 100%; text-transform: uppercase" onkeypress="focusNextOnEnter(event, 'actividades')"
                                                  value="#{servidorPublicoProceso.servidor.actividades}"/>
                            </h:panelGroup>
                            <h:panelGroup>
                                <p:selectBooleanButton offLabel="No Aplica Horas Extras" onLabel="Aplica Horas Extras" value="#{servidorPublicoProceso.servidor.realizaHorasExtras}" >
                                    <p:ajax update="horasExtras" />
                                </p:selectBooleanButton><br/><br/>
                                <p:inputNumber decimalPlaces="0" value="#{servidorPublicoProceso.servidor.maximoHorasExtras}" id="horasExtras" title="Maximo de horas extras" 
                                               placeholder="Máximo de horas extras" readonly="#{!servidorPublicoProceso.servidor.realizaHorasExtras}" maxValue="#{servidorPublicoProceso.maxHoras}" minValue="0" />
                            </h:panelGroup>
                        </p:panelGrid>
                    </p:fieldset >
                    <p:fieldset legend="Movimientos bancarios" rendered="#{servidorPublicoProceso.nuevodig}">
                        <h:panelGroup id="dataBan" layout="block">
                            <p:commandButton value="Agregar Entidad Bancaria"
                                             icon="ui-icon-plus"
                                             styleClass="Fs16" style="width: auto; margin-bottom: 15px;"
                                             actionListener="#{servidorPublicoProceso.openDlgBan()}"   
                                             process="@this" >
                                <p:ajax event="dialogReturn" listener="#{servidorPublicoProceso.selectDataBan}" update="tablaBanco" />
                            </p:commandButton>
                            <p:dataTable  paginator="true"  paginatorPosition="bottom"
                                          rowsPerPageTemplate="10,20" tableStyle="table-layout:auto"
                                          reflow="true"  rows="10" rowIndexVar="can"
                                          emptyMessage="No existen cuentas, ningún movimiento bancario" 
                                          id="tablaBanco" value="#{servidorPublicoProceso.bancoList}" var="Art"
                                          editable="true" editMode="cell" widgetVar="cellCars"
                                          currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                          paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}">
                                <f:facet name="header">
                                    Movimiento de Entidades Bancarias de Servidores Públicos
                                </f:facet>
                                <p:ajax event="cellEdit" listener="#{servidorPublicoProceso.onCellEdit}" update="tablaBanco" />
                                <p:column headerText="Banco">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{Art.banco.nombreBanco}" /></f:facet>
                                        <f:facet name="input"><p:inputText id="modelInput" value="#{Art.banco.nombreBanco}" style="width:96%"/></f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Cuenta">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{Art.cuentaBanco}" /></f:facet>
                                        <f:facet name="input">
                                            <p:inputText value="#{Art.cuentaBanco}" style="width:96%" 
                                                         maxlength="16" > 
                                                <p:keyFilter regEx="/[\d]/" preventPaste="false"/>
                                            </p:inputText>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Tipo de Cuenta">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{Art.tipoCuenta.texto}" /></f:facet>
                                        <f:facet name="input">
                                            <h:selectOneMenu value="#{Art.tipoCuenta}" style="width:100%" converter="#{utilConverter}">
                                                <f:selectItem itemLabel="Seleccione" />
                                                <f:selectItems value="#{servidorPublicoProceso.listCatalogo2}" var="ti" itemLabel="#{ti.texto}" itemValue="#{ti}"/>
                                            </h:selectOneMenu>
                                        </f:facet>
                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Registro">
                                    <p:cellEditor>
                                        <f:facet name="output"><h:outputText value="#{Art.registro}" /></f:facet>
                                        <f:facet name="input"><p:inputText value="#{Art.registro}" style="width:96%"/></f:facet>

                                    </p:cellEditor>
                                </p:column>
                                <p:column headerText="Estado" style="text-align: center">
                                    <p:selectBooleanCheckbox value="#{Art.estadoCuenta}" >
                                        <p:ajax update="tablaBanco" process="@this"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>
                                <p:column headerText="Quitar" style="text-align: center">
                                    <p:commandLink title="Eliminar" process="@this" 
                                                   actionListener="#{servidorPublicoProceso.borrarLista(can)}"
                                                   update="tablaBanco">
                                        <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 5px; color: red;"></i>
                                        <p:confirm header="Confirmación de eliminación" message="¿Está seguro de eliminar la cuenta bancaria?" icon="fa fa-exclamation-triangle" />
                                    </p:commandLink>        
                                </p:column>
                            </p:dataTable>

                        </h:panelGroup>
                    </p:fieldset>
                    <p:fieldset legend="Datos del Distributivo" rendered="#{servidorPublicoProceso.variable}">

                        <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group">
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <h:panelGroup layout="block" class="panelInput" >
                                    <p:outputLabel for="cargo" value="Cargo:" style="font-weight: bold" />
                                    <div class="ui-inputgroup">
                                        <p:inputText id="cargo" class="panelInput" readonly="true" required="false" onkeypress="focusNextOnEnter(event, 'listCargo')"
                                                     value="#{servidorPublicoProceso.servidor.distributivo.cargo.nombreCargo}" style="width: 100%"/>
                                        <p:commandButton title="Lista de Cargos" icon="fa fa-search"
                                                         styleClass="green-button button-group"
                                                         actionListener="#{servidorPublicoProceso.openDlgDis()}"
                                                         process="@this"
                                                         id="listCargo">
                                            <p:ajax event="dialogReturn" listener="#{servidorPublicoProceso.selectDataDis}" update="grind2,cargo,paneldistributivo" />
                                        </p:commandButton>
                                    </div>
                                </h:panelGroup>
                            </p:panelGrid> 
                        </p:panelGrid>
                        <p:panelGrid columns="3" layout="grid" styleClass="form-group ui-panelgrid-blank" id="grind2">
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel for="regi" value="Régimen Laboral:" style="font-weight: bold"/>
                                <p:inputText id="regi" class="panelInput" readonly="true" onkeypress="focusNextOnEnter(event, 'regi')"
                                             value="#{servidorPublicoProceso.servidor.distributivo.regimen.nombre}" style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>

                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel for="tipo" value="Tipo de Contrato:" style="font-weight: bold"/>
                                <p:inputText id="tipo" class="panelInput" readonly="true" onkeypress="focusNextOnEnter(event, 'tipo')"
                                             value="#{servidorPublicoProceso.servidor.distributivo.tipoContrato.nombre}" style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>

                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel title="Escala Salarial" for="escala" value="Escala Salarial:" style="font-weight: bold"/>
                                <p:inputText  id="escala" class="panelInput" readonly="true" required="false" onkeypress="focusNextOnEnter(event, 'escala')"
                                              value="#{servidorPublicoProceso.distributivoEscala.escalaSalarial.grupoOrganizacional}" style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>

                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel title="Remuneración Básica Unificada" for="RMU" value="R.M.U:" style="font-weight: bold"/>
                                <p:inputNumber  id="RMU" class="panelInput" readonly="true" required="false" onkeypress="focusNextOnEnter(event, 'RMU')"
                                                value="#{servidorPublicoProceso.distributivoEscala.remuneracionDolares}" style="text-transform: uppercase;width: 100%">
                                </p:inputNumber>
                            </p:panelGrid>

                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel title="Unidad" for="unidad" value="Unidad:" style="font-weight: bold"/>
                                <p:inputText  id="unidad" class="panelInput" readonly="true" required="false" onkeypress="focusNextOnEnter(event, 'unidad')"
                                              value="#{servidorPublicoProceso.servidor.distributivo.unidadAdministrativa.nombre}" style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>
                            <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid">
                                <p:outputLabel title="Supervisa" for="supervisa" value="Supervisado por:" style="font-weight: bold"/>
                                <p:inputText id="supervisa" class="panelInput" readonly="true" required="false" onkeypress="focusNextOnEnter(event, 'supervisa')"
                                             value="#{servidorPublicoProceso.servidor.distributivo.unidadAdministrativa.padre.nombre}" 
                                             style="text-transform: uppercase;width: 100%"/>
                            </p:panelGrid>
                        </p:panelGrid>
                    </p:fieldset>

                    <p:panelGrid id="paneldistributivo" styleClass="form-group ui-panelgrid-blank" rendered="#{servidorPublicoProceso.variable}">
                        <p:fieldset legend="Datos Adicionales" rendered="#{servidorPublicoProceso.servidor.distributivo.regimen.codigo == 'CT'}" >
                            <p:panelGrid  columns="3" layout="grid" styleClass="ui-panelgrid-blank form-group" id="panelDetalle" style="">
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen"
                                             rendered="#{servidorPublicoProceso.servidor.distributivo.regimen.codigo == 'CT'}">
                                    <p:outputLabel for="Nregistro" value="N registro MT:" style="font-weight: bold"/>
                                    <p:inputText id="Nregistro" required="true" style="text-transform: uppercase;width: 100%"
                                                 maxlength="10" value="#{servidorPublicoProceso.detalle_registro.registroMt}" onkeypress="focusNextOnEnter(event, 'fechaReg')" >
                                    </p:inputText>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank"  layout="grid" id="desregimen1"
                                             rendered="#{servidorPublicoProceso.servidor.distributivo.regimen.codigo == 'CT'}">
                                    <p:outputLabel for="fechaReg" value="Fecha Registro MT:" style="font-weight: bold"/>
                                    <p:calendar id="fechaReg" pattern="dd-MM-yyyy" mask="true" required="true" value="#{servidorPublicoProceso.detalle_registro.fechaRegistroMt}"
                                                onkeypress="focusNextOnEnter(event, 'Ncontrato')" navigator="true" locale="es" style="width: 100%"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank"  layout="grid" id="desregimen2"
                                             rendered="#{servidorPublicoProceso.servidor.distributivo.regimen.codigo == 'CT'}">
                                    <p:outputLabel for="Ncontrato" value="N° Contrato" style="font-weight: bold"/>
                                    <p:inputText id="Ncontrato" required="true" style="text-transform: uppercase;width: 100%;"
                                                 value="#{servidorPublicoProceso.detalle_registro.contratoRmt}" onkeypress="focusNextOnEnter(event, 'fechadesde')" >
                                    </p:inputText>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen3"
                                             rendered="#{servidorPublicoProceso.servidor.distributivo.regimen.codigo == 'CT'}">
                                    <p:outputLabel for="fechadesde" value="Rige Desde:" style="font-weight: bold"/>
                                    <p:calendar id="fechadesde" pattern="dd-MM-yyyy" mask="true" required="true" value="#{servidorPublicoProceso.detalle_registro.rigeDesde}"
                                                onkeypress="focusNextOnEnter(event, 'fechahasta')" navigator="true" locale="es" style="width: 100%"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen4"
                                             rendered="#{servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'CI' or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'CSO' or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'CSOL'}">
                                    <p:outputLabel for="fechahasta" value="Rige Hasta:" style="font-weight: bold"/>
                                    <p:calendar id="fechahasta" pattern="dd-MM-yyyy" mask="true" required="true" value="#{servidorPublicoProceso.detalle_registro.rigeHasta}"
                                                onkeypress="focusNextOnEnter(event, 'n_Accion')" navigator="true" locale="es" style="width: 100%"/>
                                </p:panelGrid>
                            </p:panelGrid>
                        </p:fieldset>
                        <p:fieldset legend="Datos Adicionales" rendered="#{servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NP' or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NPRO' or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NLR'
                                                                           or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NPF'}" >
                            <p:panelGrid  columns="3" columnClasses="ui-grid-col-20" styleClass="ui-panelgrid-blank form-group">
                                <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen5"
                                              rendered="#{servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NP' or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NPRO' or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NLR'
                                                          or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NPF'}">
                                    <p:outputLabel for="n_Accion" value="N°de Acción del personal: " style="font-weight: bold" />
                                    <p:inputText id="n_Accion" required="true"
                                                 value="#{servidorPublicoProceso.detalle_registro.accionPersonal}"
                                                 onkeypress="focusNextOnEnter(event, 'fechaAccionPersonal')" style="text-transform: uppercase;width: 100%">
                                    </p:inputText>

                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen6"
                                             rendered="#{servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NP' or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NPRO' or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NLR'
                                                         or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NPF'}">
                                    <p:outputLabel for="fechaAccionPersonal" value="Fecha de Acción del Personal:" style="font-weight: bold"/>
                                    <p:calendar id="fechaAccionPersonal"  pattern="dd-MM-yyyy" mask="true" required="true"
                                                value="#{servidorPublicoProceso.detalle_registro.fechaAccionPersonal}"
                                                onkeypress="focusNextOnEnter(event, 'supervisor')" locale="es" navigator="true"
                                                style="text-transform: uppercase;width: 100%"/>
                                </p:panelGrid>
                                <p:panelGrid columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" id="desregimen7" 
                                             rendered="#{servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NP' or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NPRO' or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NLR'
                                                         or servidorPublicoProceso.servidor.distributivo.tipoContrato.codigo == 'NPF'}">
                                    <h:panelGroup layout="span" class="panelInput" >
                                        <div class="ui-inputgroup">
                                            <p:outputLabel for="supervisor" value="Supervisor: " style="font-weight: bold"/>
                                            <p:commandButton title="Lista de Servidores Públicos" icon="fa fa-search" styleClass="green-button button-group"
                                                             actionListener="#{servidorPublicoProceso.openDlgSer()}" process="@this" >
                                                <p:ajax event="dialogReturn" listener="#{servidorPublicoProceso.selectDataSer}" update="desregimen7" />
                                            </p:commandButton>
                                        </div>
                                    </h:panelGroup>
                                    <p:inputText id="supervisor" class="panelInput" readonly="true" required="false"
                                                 value="#{servidorPublicoProceso.detalle_registro.supervisor.persona.nombreCompleto}"
                                                 onkeypress="focusNextOnEnter(event, 'guardar')" style="text-transform: uppercase;width: 100%"/>
                                </p:panelGrid>
                            </p:panelGrid>
                        </p:fieldset>
                    </p:panelGrid>
                    <br></br>
                    <center>
                        <p:commandButton value="Guardar" id="guardar" update="formMain:dataTableServidorPublico,formServidorPublico"
                                         icon="ui-icon-save"  actionListener="#{servidorPublicoProceso.guardarServidor()}" styleClass="Fs16"/>
                    </center>
                </h:panelGroup>
            </h:form>
        </p:dialog>
        
        <p:dialog id="dlgObservaciones" widgetVar="dlgObservaciones" width="30%" position="center" draggable="false" header="Observación"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false" >
            <div class="ui-g-12" >
                <h:form id="frmDlgObser">
                    <p:outputPanel id="panelObsevacion" style="width: 100%;" >
                        <p:panelGrid  columns="1" styleClass="form-group ui-panelgrid-blank" layout="grid" >
                            <h:panelGroup layout="block" style="width: 100%;" class="panelInput" >
                                <p:inputTextarea value="#{servidorPublicoProceso.observaciones}" onkeyup="toUpperCase(this)"
                                                 rows="7" style="border: 1px solid;text-transform: uppercase;width: 100%;border-radius: 5px 5px 5px 5px;"/>
                            </h:panelGroup> 
                        </p:panelGrid>
                        <center>
                            <p:commandButton icon="fa fa-thumbs-o-up" value="Aprobar"  title="Culminar Tarea" process="frmDlgObser" update="frmDlgObser"
                                             actionListener="#{servidorPublicoProceso.completarTarea()}" style="width: 150px;margin: 10px"  />
                            <p:commandButton icon="fa fa-thumbs-o-remove" value="Cerrar" onclick="PF('dlgObservaciones').hide()"
                                             style="background: red; width: 150px;margin: 10px" />
                        </center> 
                    </p:outputPanel>
                </h:form>  
            </div>
        </p:dialog>
        
    </ui:define>

</ui:composition>
