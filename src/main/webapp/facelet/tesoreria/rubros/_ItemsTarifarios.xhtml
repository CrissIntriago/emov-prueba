<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../../WEB-INF/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="title">
        Rubros
    </ui:define>
    <ui:param name="tittle" value="CONFIGURACIÓN DE RUBROS" />
    <ui:define name="content">
        <h:form id="frmMain" prependId="false">
            <div class="ui-fluid">
                <div class="ui-g">
                    <div class="ui-g-12">                          
                        <p:outputPanel id="regresar" style="width: 5%">
                            <p:commandLink title="Regresar" immediate="true" action="administracion.xhtml?faces-redirect=true">
                                <p:graphicImage value="/resources/icons/regresar.png"
                                                width="30" height="30"/>
                            </p:commandLink>
                        </p:outputPanel>
                        <div class="ui-g">
                            <div class="ui-g-8">
                                <p:outputPanel  style="width: 100%">
                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">                                                        
                                        <p:dataTable id="dtData"
                                                     widgetVar="dtData"
                                                     value="#{itemTarifarioView.lazy}"
                                                     var="item"
                                                     paginator="true"
                                                     lazy="true" rows="10"
                                                     paginatorPosition="bottom"
                                                     rowKey="#{item.id}"
                                                     rowsPerPageTemplate="10,20,60,100"
                                                     tableStyle="table-layout:auto"
                                                     emptyMessage="No se encontró ningún rubro para mostrar."
                                                     style="font-size: 11px;width: 100%">
                                            <p:column headerText="Titulo" filterBy="#{item.tipoLiquidacion.nombreTitulo}" filterMatchMode="contains">
                                                <p:outputLabel value="#{item.tipoLiquidacion.nombreTitulo}" />
                                            </p:column>
                                            <p:column headerText="Concepto" filterBy="#{item.descripcion}" filterMatchMode="contains">
                                                <p:outputLabel value="#{item.descripcion}" />
                                            </p:column>
                                            <p:column headerText="Municipal" filterBy="#{item.rubroDelMunicipio}" style="text-align: center" >
                                                <f:facet name="filter">
                                                    <p:selectOneMenu onchange="PF('dtData').filter()" styleClass="custom-filter">
                                                        <f:converter converterId="javax.faces.Boolean" />
                                                        <f:selectItem itemLabel="Todos" itemValue=""/>
                                                        <f:selectItem itemLabel="NO" itemValue="false" />
                                                        <f:selectItem itemLabel="SI" itemValue="true" />
                                                    </p:selectOneMenu>
                                                </f:facet>
                                                <p:outputLabel value="#{item.rubroDelMunicipio eq true ? 'SI':'NO'}" />
                                            </p:column>
                                            <p:column headerText="Partida" filterBy="#{item.partida.codigo}" filterMatchMode="contains">
                                                <p:outputLabel value="#{item.partida eq null ? '':item.partida.codigo.concat(' - ').concat(item.partida.descripcion)}" />
                                            </p:column>
                                            <p:column headerText="Cuenta Debe" filterBy="#{item.contCc.codigo}" filterMatchMode="contains">
                                                <p:outputLabel value="#{item.contCc eq null ? '':item.contCc.codigo.concat(' - ').concat(item.contCc.descripcion)}" />
                                            </p:column>
                                            <p:column headerText="Cuenta Haber" filterBy="#{item.contCp.codigo}" filterMatchMode="contains">
                                                <p:outputLabel value="#{item.contCp  eq null ? '':item.contCp.codigo.concat(' - ').concat(item.contCp.descripcion)}" />
                                            </p:column>
                                            <p:column headerText="Partida Cartera" filterBy="#{item.partidacart.codigo}" filterMatchMode="contains">
                                                <p:outputLabel value="#{item.partidacart eq null ? '':item.partidacart.codigo.concat(' - ').concat(item.partidacart.descripcion)}" />
                                            </p:column>
                                            <p:column headerText="Cta Debe Cart." filterBy="#{item.ctaDebeCart.codigo}" filterMatchMode="contains">
                                                <p:outputLabel value="#{item.ctaDebeCart eq null ? '':item.ctaDebeCart.codigo.concat(' - ').concat(item.ctaDebeCart.descripcion)}" />
                                            </p:column>
                                            <p:column headerText="Cta Haber Cart." filterBy="#{item.ctaHaberCart.codigo}" filterMatchMode="contains">
                                                <p:outputLabel value="#{item.ctaHaberCart eq null ? '':item.ctaHaberCart.codigo.concat(' - ').concat(item.ctaHaberCart.descripcion)}" />
                                            </p:column>
                                            <p:column headerText="Cta Orden Deudor" filterBy="#{item.ctaOrdenDeudor.codigo}" filterMatchMode="contains">
                                                <p:outputLabel value="#{item.ctaOrdenDeudor eq null ? '':item.ctaOrdenDeudor.codigo.concat(' - ').concat(item.ctaOrdenDeudor.descripcion)}" />
                                            </p:column>
                                            <p:column headerText="Cta Orden Acreedor." filterBy="#{item.ctaOrdenAcreedor.codigo}" filterMatchMode="contains">
                                                <p:outputLabel value="#{item.ctaOrdenAcreedor eq null ? '':item.ctaOrdenAcreedor.codigo.concat(' - ').concat(item.ctaOrdenAcreedor.descripcion)}" />
                                            </p:column>
                                            <p:column headerText="Acciones" style="text-align: center" >
                                                <p:commandLink title="Editar" actionListener="#{itemTarifarioView.editar(item)}" 
                                                               update="frmMain,fielDetalle" process="@this">
                                                    <i class="fa fa-edit" style="font-size: 1.5em;" />
                                                </p:commandLink>
                                                <p:commandLink title="Eliminar configuración" actionListener="#{itemTarifarioView.eliminarconfig(item)}" 
                                                               update="frmMain" process="@this">
                                                    <i class="fa fa-remove" style="color: red;font-size: 1.5em;" />
                                                </p:commandLink>
                                            </p:column>
                                        </p:dataTable>
                                    </p:panelGrid>
                                </p:outputPanel>
                            </div>
                            <div class="ui-g-4">
                                <p:tabView id="fielDetalle" style="font-weight: bold;">
                                    <p:tab title="Rubros Propios">
                                        <p:outputPanel id="datos" style="width: 100%">
                                            <p:panelGrid columns="1"  layout="grid" styleClass="ui-panelgrid-blank form-group">                                                  
                                                <h:panelGroup>
                                                    <p:outputLabel value="Rubro" for="@next" style="width: 100%"/><br></br><br></br>
                                                    <p:selectCheckboxMenu id="rubro"
                                                                          value="#{itemTarifarioView.itemsAdd}" multiple="true"
                                                                          converter="#{utilConverter}" panelStyle="width: 500px"
                                                                          filter="true" filterMatchMode="contains">
                                                        <!--<p:ajax event="itemUnselect" />-->
                                                        <f:selectItem  itemLabel="Selectione.."  itemValue="#{null}"/>
                                                        <f:selectItems value="#{itemTarifarioView.itemList}" var="it" 
                                                                       itemLabel="#{it.descripcion}-(#{it.tipoLiquidacion.nombreTitulo})"/>

                                                    </p:selectCheckboxMenu>
                                                </h:panelGroup>
                                            </p:panelGrid>
                                            <br></br>
                                            <p:panelGrid id="pgdetalle" columns="2"  layout="grid" 
                                                         styleClass="ui-panelgrid-blank form-group">
                                                <h:panelGroup id="panelTipo">
                                                    <p:outputLabel value="Tipo" for="tipo" /><br/><br/>
                                                    <p:selectOneMenu id="tipo" style="width:  85%" required="#{itemTarifarioView.requerido}"
                                                                     value="#{itemTarifarioView.tipo}"
                                                                     converter="#{utilConverter}">
                                                        <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" 
                                                                      noSelectionOption="true" />
                                                        <f:selectItems value="#{itemTarifarioView.tipos}"
                                                                       var="t"
                                                                       itemLabel="#{t.codigo}.-#{t.descripcion}"
                                                                       itemValue="#{t}"/>
                                                        <p:ajax update="tipo" />
                                                    </p:selectOneMenu>
                                                </h:panelGroup>
                                                <h:panelGroup>
                                                    <p:outputLabel value="Partida" for="@next" /><br></br><br></br>
                                                    <p:autoComplete id="partida" required="#{itemTarifarioView.requerido}"
                                                                    dropdown="true" value="#{itemTarifarioView.itemTarifario.partida}" 
                                                                    completeMethod="#{itemTarifarioView.catalogoCuenta}" 
                                                                    var="pt" itemLabel="#{pt.codigo} #{pt.descripcion}" itemValue="#{pt}" 
                                                                    converter="#{utilConverter}" 
                                                                    forceSelection="true" panelStyle="width:150px"
                                                                    scrollHeight="250" moreText="Mas registros" maxResults="100" class="Wid100" 
                                                                    inputStyleClass="Wid90">
                                                        <p:ajax event="itemSelect" update="partida" />
                                                    </p:autoComplete> 
                                                </h:panelGroup>
                                                <h:panelGroup>
                                                    <p:outputLabel value="Cuenta Debe" for="@next" /><br></br><br></br>
                                                    <p:autoComplete id="debe" required="#{itemTarifarioView.requerido}"
                                                                    dropdown="true" value="#{itemTarifarioView.itemTarifario.contCc}" 
                                                                    completeMethod="#{itemTarifarioView.cuentasDebe}" 
                                                                    var="cd" itemLabel="#{cd.codigo} #{cd.descripcion}" itemValue="#{cd}" 
                                                                    converter="#{utilConverter}" 
                                                                    forceSelection="true" panelStyle="width:150px"
                                                                    scrollHeight="250" moreText="Mas registros" maxResults="100" class="Wid100" 
                                                                    inputStyleClass="Wid90">
                                                        <p:ajax update="debe" process="partida,debe" />
                                                    </p:autoComplete> 
                                                </h:panelGroup>                                                         
                                                <h:panelGroup>
                                                    <p:outputLabel value="Cuenta Haber" for="@next" /><br/><br/>
                                                    <p:autoComplete id="haber" required="#{itemTarifarioView.requerido}"
                                                                    dropdown="true" value="#{itemTarifarioView.itemTarifario.contCp}" 
                                                                    completeMethod="#{itemTarifarioView.cuentashaber}" 
                                                                    var="ch" itemLabel="#{ch.codigo} #{ch.descripcion}" itemValue="#{ch}" 
                                                                    converter="#{utilConverter}" 
                                                                    forceSelection="true" panelStyle="width:150px"
                                                                    scrollHeight="250" moreText="Mas registros" maxResults="100" class="Wid100" 
                                                                    inputStyleClass="Wid90">
                                                        <p:ajax update="haber" process="partida,haber" />
                                                    </p:autoComplete> 
                                                </h:panelGroup>
                                            </p:panelGrid>                                                    
                                            <p:panelGrid id="detalleItem" columns="2" layout="grid"
                                                         styleClass="ui-panelgrid-blank form-group">
                                                <h:panelGroup>
                                                    <p:outputLabel value="Tipo Cartera" for="tipocart" /><br/><br/>
                                                    <p:selectOneMenu id="tipocart" style="width:  85%"
                                                                     value="#{itemTarifarioView.tipoCart}"
                                                                     converter="#{utilConverter}">
                                                        <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" 
                                                                      noSelectionOption="true" />
                                                        <f:selectItems value="#{itemTarifarioView.tipos}"
                                                                       var="t"
                                                                       itemLabel="#{t.codigo}.-#{t.descripcion}"
                                                                       itemValue="#{t}"/>
                                                        <p:ajax update="tipocart" />
                                                    </p:selectOneMenu>
                                                </h:panelGroup>
                                                <h:panelGroup>
                                                    <p:outputLabel value="Partida Cartera" for="@next" 
                                                                   style="width: 100%;"/><br></br><br></br>
                                                    <p:autoComplete id="partidaC"
                                                                    dropdown="true" value="#{itemTarifarioView.itemTarifario.partidacart}" 
                                                                    completeMethod="#{itemTarifarioView.catalogoCuentaCartera}" 
                                                                    var="pt" itemLabel="#{pt.codigo} #{pt.descripcion}" itemValue="#{pt}" 
                                                                    converter="#{utilConverter}" 
                                                                    forceSelection="true" panelStyle="width:150px"
                                                                    scrollHeight="250" moreText="Mas registros" maxResults="100" class="Wid100" 
                                                                    inputStyleClass="Wid90">
                                                        <p:ajax event="itemSelect" update="partidaC" />
                                                    </p:autoComplete> 
                                                </h:panelGroup>
                                                <h:panelGroup>
                                                    <p:outputLabel value="Cta Debe Cartera" for="@next" 
                                                                   style="width: auto;"/><br></br><br></br>
                                                    <p:autoComplete id="debeC"
                                                                    dropdown="true" value="#{itemTarifarioView.itemTarifario.ctaDebeCart}" 
                                                                    completeMethod="#{itemTarifarioView.cuentasDebeCartera}" 
                                                                    var="cd" itemLabel="#{cd.codigo} #{cd.descripcion}" itemValue="#{cd}" 
                                                                    converter="#{utilConverter}" 
                                                                    forceSelection="true" panelStyle="width:150px"
                                                                    scrollHeight="250" moreText="Mas registros" maxResults="100" class="Wid100" 
                                                                    inputStyleClass="Wid90">
                                                        <p:ajax update="debeC" process="partidaC,debeC" />
                                                    </p:autoComplete>
                                                </h:panelGroup>
                                                <h:panelGroup>
                                                    <p:outputLabel value="Cta Haber Cartera" for="@next" 
                                                                   style="width: auto;"/><br></br><br></br>
                                                    <p:autoComplete id="haberC"
                                                                    dropdown="true" value="#{itemTarifarioView.itemTarifario.ctaHaberCart}" 
                                                                    completeMethod="#{itemTarifarioView.cuentashaberCartera}" 
                                                                    var="cd" itemLabel="#{cd.codigo} #{cd.descripcion}" itemValue="#{cd}" 
                                                                    converter="#{utilConverter}" 
                                                                    forceSelection="true" panelStyle="width:150px"
                                                                    scrollHeight="250" moreText="Mas registros" maxResults="100" class="Wid100" 
                                                                    inputStyleClass="Wid90">
                                                        <p:ajax update="haberC" process="partidaC,haberC" />
                                                    </p:autoComplete>
                                                </h:panelGroup>

                                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                    <h:panelGroup layout="span" >
                                                        <br></br>
                                                        <p:outputLabel value="Cta de Orden" for="@next" style="width: 100%;"/><p:spacer width="10" />
                                                        <p:selectBooleanCheckbox   id="ctaOrdenAcCheck"
                                                                                   value="#{itemTarifarioView.ctaOrdenPropio}"
                                                                                   class="panelInput" >
                                                            <p:ajax update="fielDetalle:datos" />
                                                        </p:selectBooleanCheckbox><br></br>
                                                        <br></br>
                                                    </h:panelGroup>
                                                    <h:panelGroup layout="span" ></h:panelGroup>
                                                </p:panelGrid>
                                                <p:panelGrid id="panelCtaDeudor"
                                                             columns="1" layout="grid" 
                                                             styleClass="ui-panelgrid-blank form-group" rendered="#{itemTarifarioView.ctaOrdenPropio}" >
                                                    <p:outputLabel value="Cta de Orden Deudor" />
                                                    <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup>
                                                            <p:commandButton icon="ui-icon-plus" actionListener="#{itemTarifarioView.openDlgCuentaContable(7)}" 
                                                                             process="@this"
                                                                             styleClass="secondary" />  
                                                        </h:panelGroup>  
                                                        <h:panelGroup>  
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTarifario.ctaOrdenDeudor.codigo}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'ctaBanco')"/>
                                                        </h:panelGroup>
                                                    </p:panelGrid>
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup> 
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTarifario.ctaOrdenDeudor.descripcion}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'nomCtaBanco')"/>
                                                        </h:panelGroup>  
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{itemTarifarioView.ctaOrdenPropio}" >
                                                    <p:outputLabel value="Cta de Orden Acreedor" />
                                                    <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup>
                                                            <p:commandButton icon="ui-icon-plus" actionListener="#{itemTarifarioView.openDlgCuentaContable(8)}" process="@this"
                                                                             styleClass="secondary" />  
                                                        </h:panelGroup>  
                                                        <h:panelGroup>  
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTarifario.ctaOrdenAcreedor.codigo}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'ctaBanco')"/>
                                                        </h:panelGroup>
                                                    </p:panelGrid>
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup> 
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTarifario.ctaOrdenAcreedor.descripcion}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'nomCtaBanco')"/>
                                                        </h:panelGroup>  
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                            </p:panelGrid>
                                            <br></br>
                                            <h:panelGroup>
                                                <center>
                                                    <p:commandButton value="Guardar" 
                                                                     style="width: 35%"
                                                                     icon="ui-icon-plus"
                                                                     actionListener="#{itemTarifarioView.guardar()}"
                                                                     update="frmMain"                                                                             
                                                                     process="datos"/>
                                                    <p:commandButton value="Cancelar" 
                                                                     style="width: 35%"
                                                                     icon="ui-icon-remove"
                                                                     actionListener="#{itemTarifarioView.init()}"
                                                                     update="frmMain"/>
                                                </center>
                                            </h:panelGroup>
                                        </p:outputPanel>
                                    </p:tab>
                                    <p:tab title="Fondo Terceros">
                                        <p:outputPanel id="datos2" style="width: 100%">
                                            <p:panelGrid columns="1"  layout="grid" styleClass="ui-panelgrid-blank form-group">                                                  
                                                <h:panelGroup>
                                                    <p:outputLabel value="Rubro Terceros" for="@next" style="width: 100%"/><br></br><br></br>
                                                    <p:selectCheckboxMenu id="rubroT"
                                                                          value="#{itemTarifarioView.itemsAdd}"  multiple="true"
                                                                          converter="#{utilConverter}" panelStyle="width: 500px"
                                                                          filter="true" filterMatchMode="contains">
                                                        <f:selectItem  itemLabel="Selectione.."  itemValue="#{null}"/>
                                                        <f:selectItems value="#{itemTarifarioView.terceros}" var="ft" 
                                                                       itemLabel="#{ft.descripcion}-(#{ft.tipoLiquidacion.nombreTitulo})"/>
                                                        <!--<p:ajax update="rubroT" />-->
                                                    </p:selectCheckboxMenu>
                                                </h:panelGroup>
                                            </p:panelGrid>

                                            <p:panelGrid id="panelcuentas" columns="2"  layout="grid" styleClass="ui-panelgrid-blank form-group">
                                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                    <p:outputLabel value="Cuenta Debe" />
                                                    <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup>
                                                            <p:commandButton id="btndlgcta_1" icon="ui-icon-plus" actionListener="#{itemTarifarioView.openDlgCuentaContable(1)}" process="@this"
                                                                             styleClass="secondary" />  
                                                        </h:panelGroup>  
                                                        <h:panelGroup>
                                                            <!--<p:outputLabel for="@next" value="Código:" style="font-weight: bold"/>-->    
                                                            <p:inputText id="ctadebeTerc" class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.contCc.codigo}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'ctaBanco')"/>
                                                        </h:panelGroup>
                                                    </p:panelGrid>
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup>
                                                            <!--<p:outputLabel for="@next" value="Nombre:" style="font-weight: bold"/>-->   
                                                            <p:inputText id="nomCtaterc" class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.contCc.descripcion}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'nomCtaBanco')"/>
                                                        </h:panelGroup>  
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                    <p:outputLabel value="Cuenta Haber" />
                                                    <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup>
                                                            <p:commandButton id="btndlgcta_2" icon="ui-icon-plus" 
                                                                             actionListener="#{itemTarifarioView.openDlgCuentaContable(2)}" 
                                                                             process="@this"
                                                                             styleClass="secondary" />  
                                                        </h:panelGroup>  
                                                        <h:panelGroup>
                                                            <!--<p:outputLabel for="@next" value="Código:" style="font-weight: bold"/>-->    
                                                            <p:inputText id="ctahaberterc" class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.contCp.codigo}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'ctaBanco')"/>
                                                        </h:panelGroup>
                                                    </p:panelGrid>
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup>
                                                            <!--<p:outputLabel for="@next" value="Nombre:" style="font-weight: bold"/>-->   
                                                            <p:inputText id="nomCtahaberterc" class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.contCp.descripcion}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'nomCtaBanco')"/>
                                                        </h:panelGroup>  
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                    <h:panelGroup layout="span" >
                                                        <br></br>
                                                        <p:outputLabel value="(%)Compartido" for="compartido" style="width: 100%;"/><p:spacer width="10" />
                                                        <p:selectBooleanCheckbox   id="compartido"
                                                                                   value="#{itemTarifarioView.itemTercero.porcentajeServicio}"
                                                                                   class="panelInput" >
                                                            <p:ajax update="fielDetalle:panelcuentas" />
                                                        </p:selectBooleanCheckbox><br></br>
                                                        <br></br>
                                                    </h:panelGroup>
                                                    <h:panelGroup layout="span" ></h:panelGroup>
                                                </p:panelGrid>
                                                <p:panelGrid rendered="#{itemTarifarioView.itemTercero.porcentajeServicio}"
                                                             columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                    <h:panelGroup layout="span" >
                                                        <p:outputLabel value="Porcentaje(%)" for="compartido" style="width: 100%;"/><p:spacer width="10" />
                                                        <p:inputText value="#{itemTarifarioView.itemTercero.porcentaje}">
                                                            <p:ajax process="@this" event="blur" update="fielDetalle:panelcuentas" />
                                                        </p:inputText>
                                                    </h:panelGroup>
                                                </p:panelGrid>
                                                <p:panelGrid columns="1" rendered="#{itemTarifarioView.itemTercero.porcentajeServicio and itemTarifarioView.itemTercero.porcentaje.intValue()>0.00}"
                                                             layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                    <p:outputLabel value="Cuenta #{itemTarifarioView.porcentaje.subtract(itemTarifarioView.itemTercero.porcentaje)}(%)" />
                                                    <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup>
                                                            <p:commandButton icon="ui-icon-plus" actionListener="#{itemTarifarioView.openDlgCuentaContable(3)}" process="@this"
                                                                             styleClass="secondary" />  
                                                        </h:panelGroup>  
                                                        <h:panelGroup>  
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.ctaDebeCart.codigo}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'ctaBanco')"/>
                                                        </h:panelGroup>
                                                    </p:panelGrid>
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup> 
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.ctaDebeCart.descripcion}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'nomCtaBanco')"/>
                                                        </h:panelGroup>  
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                                <p:panelGrid columns="1" rendered="#{itemTarifarioView.itemTercero.porcentajeServicio and itemTarifarioView.itemTercero.porcentaje.intValue()>0.00}"
                                                             layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                    <p:outputLabel value="Cuenta Haber" />
                                                    <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup>
                                                            <p:commandButton icon="ui-icon-plus" actionListener="#{itemTarifarioView.openDlgCuentaContable(4)}" process="@this"
                                                                             styleClass="secondary" />  
                                                        </h:panelGroup>  
                                                        <h:panelGroup>  
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.ctaHaberCart.codigo}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'ctaBanco')"/>
                                                        </h:panelGroup>
                                                    </p:panelGrid>
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup> 
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.ctaHaberCart.descripcion}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'nomCtaBanco')"/>
                                                        </h:panelGroup>  
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                                <h:panelGroup id="panelTipoTercero" rendered="#{itemTarifarioView.itemTercero.porcentajeServicio and itemTarifarioView.itemTercero.porcentaje.intValue()>0.00}" >
                                                    <p:outputLabel value="Tipo" for="tipo" /><br/><br/>
                                                    <p:selectOneMenu id="tipoFondoTercero" style="width:  85%" required="#{itemTarifarioView.requerido}"
                                                                     value="#{itemTarifarioView.tipoTercero}"
                                                                     converter="#{utilConverter}">
                                                        <f:selectItem itemLabel="Seleccionar" itemValue="#{null}" 
                                                                      noSelectionOption="true" />
                                                        <f:selectItems value="#{itemTarifarioView.tipos}"
                                                                       var="t"
                                                                       itemLabel="#{t.codigo}.-#{t.descripcion}"
                                                                       itemValue="#{t}"/>
                                                        <p:ajax update="tipo" />
                                                    </p:selectOneMenu>
                                                </h:panelGroup>
                                                <h:panelGroup rendered="#{itemTarifarioView.itemTercero.porcentajeServicio and itemTarifarioView.itemTercero.porcentaje.intValue()>0.00}" >
                                                    <p:outputLabel value="Partida" for="@next" /><br></br><br></br>
                                                    <p:autoComplete id="partidaTercero" required="#{itemTarifarioView.requerido}"
                                                                    dropdown="true" value="#{itemTarifarioView.itemTercero.partidacart}" 
                                                                    completeMethod="#{itemTarifarioView.catalogoCuentaTercero}" 
                                                                    var="pt" itemLabel="#{pt.codigo} #{pt.descripcion}" itemValue="#{pt}" 
                                                                    converter="#{utilConverter}" 
                                                                    forceSelection="true" panelStyle="width:150px"
                                                                    scrollHeight="250" moreText="Mas registros" maxResults="100" class="Wid100" 
                                                                    inputStyleClass="Wid90">
                                                        <p:ajax event="itemSelect" update="partida" />
                                                    </p:autoComplete> 
                                                </h:panelGroup>
                                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                    <h:panelGroup layout="span" >
                                                        <br></br>
                                                        <p:outputLabel value="Cta de Orden" for="@next" style="width: 100%;"/><p:spacer width="10" />
                                                        <p:selectBooleanCheckbox   id="ctaOrdenCheck"
                                                                                   value="#{itemTarifarioView.ctaOrdentercero}"
                                                                                   class="panelInput" >
                                                            <p:ajax update="fielDetalle:panelcuentas" />
                                                        </p:selectBooleanCheckbox><br></br>
                                                        <br></br>
                                                    </h:panelGroup>
                                                    <h:panelGroup layout="span" ></h:panelGroup>
                                                </p:panelGrid>
                                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{itemTarifarioView.ctaOrdentercero}" >
                                                    <p:outputLabel value="Cta de Orden Deudor" />
                                                    <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup>
                                                            <p:commandButton icon="ui-icon-plus" actionListener="#{itemTarifarioView.openDlgCuentaContable(5)}" process="@this"
                                                                             styleClass="secondary" />  
                                                        </h:panelGroup>  
                                                        <h:panelGroup>  
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.ctaOrdenDeudor.codigo}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'ctaBanco')"/>
                                                        </h:panelGroup>
                                                    </p:panelGrid>
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup> 
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.ctaOrdenDeudor.descripcion}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'nomCtaBanco')"/>
                                                        </h:panelGroup>  
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" rendered="#{itemTarifarioView.ctaOrdentercero}" >
                                                    <p:outputLabel value="Cta de Orden Acreedor" />
                                                    <p:panelGrid columns="2" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup>
                                                            <p:commandButton icon="ui-icon-plus" actionListener="#{itemTarifarioView.openDlgCuentaContable(6)}" process="@this"
                                                                             styleClass="secondary" />  
                                                        </h:panelGroup>  
                                                        <h:panelGroup>  
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.ctaOrdenAcreedor.codigo}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'ctaBanco')"/>
                                                        </h:panelGroup>
                                                    </p:panelGrid>
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group" >
                                                        <h:panelGroup> 
                                                            <p:inputText class="panelInput" style="width: 100%" 
                                                                         value="#{itemTarifarioView.itemTercero.ctaOrdenAcreedor.descripcion}"
                                                                         readonly="true" onkeypress="focusNextOnEnter(event, 'nomCtaBanco')"/>
                                                        </h:panelGroup>  
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                            </p:panelGrid>
                                            <br></br>
                                            <center>
                                                <p:commandButton value="Guardar" 
                                                                 style="width: 35%"
                                                                 icon="ui-icon-plus"
                                                                 actionListener="#{itemTarifarioView.guardarterceros()}"
                                                                 update="frmMain"                                                                           
                                                                 process="datos2"/>
                                                <p:commandButton value="Cancelar" 
                                                                 style="width: 35%;"
                                                                 icon="ui-icon-remove"
                                                                 actionListener="#{itemTarifarioView.init()}"
                                                                 update="frmMain"/>
                                            </center>
                                        </p:outputPanel>
                                    </p:tab>
                                </p:tabView>
                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                </p:confirmDialog>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </h:form>
        <p:dialog id="cuentasContablesDlg" header="CUENTAS CONTABLES" 
                  widgetVar="cuentasContablesDlg" width="30%" draggable="false"
                  modal="true" showEffect="fade" hideEffect="fade" resizable="false" position="center">
            <h:form prependId="false">
                <p:outputPanel id="cuentasContablesForm" style="width: 100%;" >
                    <p:dataTable  id="cuentasPresupuestarioTable" 
                                  widgetVar="cuentasPresupuestarioTable" 
                                  var="cuentaContable" value="#{itemTarifarioView.cuentaLazy}" 
                                  lazy="true" rows="20" style="width: 100%"
                                  selectionMode="single" rowKey="#{cuentaContable.id}" 
                                  selection="#{itemTarifarioView.cuentaContableSeleccionado}"
                                  paginatorPosition="bottom" paginator="true"
                                  currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                                  paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                  rowsPerPageTemplate="20,50,60,70,100"
                                  emptyMessage="No existen cuentas con el criterio de búsqueda especificado">
                        <p:ajax event="rowSelect" listener="#{itemTarifarioView.aniadirCuentaContable()}" process="@this" 
                                update="fielDetalle:panelcuentas,fielDetalle:datos"/>
                        <p:column headerText="Código" style="width: 3vw;" filterBy="#{cuentaContable.codigo}">
                            <h:outputText value="#{cuentaContable.codigo}" />
                        </p:column>
                        <p:column headerText="Nombre" style="width: 12vw;" filterBy="#{cuentaContable.descripcion}">
                            <h:outputText value="#{cuentaContable.descripcion}" />
                        </p:column>
                    </p:dataTable>
                </p:outputPanel>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>
