<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../../../WEB-INF/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="title">
        EGRESO DE INVENTARIO
    </ui:define>

    <ui:define name="content">
        <h:form id="frmMain">
            <p:growl id="msgs" showDetail="true"/>
            <div class="ui-fluid">
                <div class="ui-g">
                    <div class="ui-g-12">
                        <div class="card card-w-title">
                            <center><h1 style="font-weight: bold; font-size: 25px">EGRESO DE INVENTARIO</h1></center>
                            <div class="ui-g">
                                <div class="ui-g-12">
                                    <div style="float: right">
                                        <p:commandButton value="Nuevo Egreso"
                                                         icon="fa fa-plus"
                                                         process="@this"
                                                         update="frmMain"
                                                         actionListener="#{procesoEgresoInvController.nuevoEgreso()}"
                                                         style="float: right; width: 170px">
                                        </p:commandButton>
                                    </div> 
                                    <br/><br/><br/>

                                    <div class="ui-g">
                                        <div class="ui-g-4">
                                            <div style="float: left">
                                                <p:panelGrid columns="2" layout="grid" id="egresoCabecera1" styleClass="ui-panelgrid-blank form-group">
                                                    <p:panelGrid columns="2" style="width: 350px"  >
                                                        <p:outputLabel value="EGRESO NO:"/>
                                                        <p:inputText  id="egresoNum" style="width: 140px;font-weight: bold; font-size: 25px" 
                                                                      class="panelInput" readonly="true"
                                                                      value="#{procesoEgresoInvController.inventario.codigo}" >
                                                        </p:inputText>
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                            </div>
                                        </div>
                                        <div class="ui-g-8">
                                            <div style="float: right">
                                                <p:panelGrid columns="2" layout="grid"  id="egresoCabecera2" styleClass="ui-panelgrid-blank form-group">
                                                    <p:panelGrid columns="1">
                                                        <p:outputLabel value="Fecha ingreso" for="fechaEgreso" style="width: 100%;"/>
                                                        <p:calendar id="fechaEgreso" pattern="yyyy-MM-dd" mask="true" required="true" 
                                                                    navigator="true" yearRange="c-100:c+100" locale="es"
                                                                    value="#{procesoEgresoInvController.inventario.fechaMovimiento}"/>
                                                    </p:panelGrid>
                                                    <p:panelGrid columns="1">
                                                        <p:outputLabel value="Año" for="anioEgreso" style="width: 100%;"/>
                                                        <p:inputText  id="anioEgreso" 
                                                                      class="panelInput" readonly="false" required="true" 
                                                                      value="#{procesoEgresoInvController.inventario.anio}">

                                                        </p:inputText>
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                            </div>
                                        </div>



                                    </div>

                                </div>
                            </div>
                            <div class="card card-w-title">
                                <div class="ui-g">
                                    <div class="ui-g-6"> 
                                        <div class="ui-g">
                                            <div class="ui-g-12">
                                                <p:fieldset legend="DATOS" style="margin-bottom:40px; font-weight: bold" id="datosEgreso">
                                                    <p:outputPanel id="outPanelDatos" style="width: 100%">                                                        
                                                        <center>
                                                            <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid"  styleClass="ui-panelgrid-blank form-group">
                                                                <p:panelGrid columns="1">
                                                                    <p:outputLabel value="Originador" for="originador" style="width: 100%;"/>
                                                                    <p:inputText  id="originador" style="text-transform: uppercase" 
                                                                                  class="panelInput" readonly="true"
                                                                                  value="#{procesoEgresoInvController.inventario.usuarioOriginador}">
                                                                    </p:inputText>
                                                                </p:panelGrid>
                                                                <p:panelGrid columns="1">
                                                                    <p:outputLabel value="Motivo" style="width: 100%;"></p:outputLabel>
                                                                    <p:selectOneMenu style="width:170px" value="#{procesoEgresoInvController.inventario.motivoMovimiento}" 
                                                                                     disabled="#{procesoEgresoInvController.habilitarBtn}" converter="entityConverter">
                                                                        <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                                                        <f:selectItems value="#{procesoEgresoInvController.motivoMovimiento}" var="medidaUno"
                                                                                       itemLabel="#{medidaUno.texto}" itemValue="#{medidaUno}"/>
                                                                        <p:ajax listener="#{procesoEgresoInvController.mostrarBtn()}" update="frmMain"/>
                                                                    </p:selectOneMenu>
                                                                </p:panelGrid>
                                                            </p:panelGrid>
                                                        </center>
                                                        <center>
                                                            <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" styleClass="ui-panelgrid-blank form-group" id="ob">
                                                                <p:panelGrid columns="1">
                                                                    <p:outputLabel value="Observación" for="observacion"/>
                                                                    <p:inputTextarea id="observacion" rows="4" cols="30" autoResize="false" 
                                                                                     class="panelInput" 
                                                                                     readonly="false" 
                                                                                     style="width: 460px; text-transform: uppercase"
                                                                                     value="#{procesoEgresoInvController.inventario.observacion}"/>
                                                                </p:panelGrid>
                                                            </p:panelGrid>

                                                        </center>
                                                    </p:outputPanel>
                                                </p:fieldset>  
                                                <p:fieldset legend="SOLICITANTE" style="margin-bottom:40px; font-weight: bold" id="datosSolicitante">
                                                    <p:outputPanel id="outPanelSolicitante" style="width: 100%">                                                        
                                                        <center>
                                                            <p:panelGrid columns="1" layout="grid" style="float: left; width: 50%" styleClass="ui-panelgrid-blank form-group" >
                                                                <p:panelGrid columns="2" style="width: 70%">
                                                                    <p:outputLabel value="CI. IDENTIFICACION" style="width: 100%" />
                                                                    <div class="ui-inputgroup">
                                                                        <p:inputText id="identifica" 
                                                                                     class="panelInput" value="#{procesoEgresoInvController.servidor.persona.identificacion}"
                                                                                     maxlength="13" style=" width: 120px" required="true"/>  
                                                                        <p:commandButton 
                                                                            title="Buscar Servidor" 
                                                                            icon="fa fa-search" 
                                                                            disabled="#{procesoEgresoInvController.habilitarBtnSol}"
                                                                            actionListener="#{procesoEgresoInvController.buscarServidor()}"
                                                                            process="identifica" update="outPanelSolicitante, dd"
                                                                            styleClass="green-button button-group">
                                                                            <p:ajax event="dialogReturn" listener="#{procesoEgresoInvController.selectDataServidor}"
                                                                                    update="identifica,outPanelSolicitante"/>
                                                                        </p:commandButton>
                                                                    </div>
                                                                </p:panelGrid>
                                                                <p:panelGrid columns="1" style="width: 70%">
                                                                    <p:outputLabel value="Nombre" for="nombre" style="width: 100%;" />
                                                                    <p:inputText  id="nombre" style="text-transform: uppercase" 
                                                                                  class="panelInput" readonly="true"
                                                                                  value="#{procesoEgresoInvController.servidor.persona.nombre}">
                                                                    </p:inputText>
                                                                </p:panelGrid>
                                                                <p:panelGrid columns="1" style="width: 70%">
                                                                    <p:outputLabel value="Apellido" for="apellido" style="width: 100%;"/>
                                                                    <p:inputText  id="apellido" style="text-transform: uppercase" 
                                                                                  class="panelInput" readonly="true" value="#{procesoEgresoInvController.servidor.persona.apellido}">
                                                                    </p:inputText>
                                                                </p:panelGrid>
                                                            </p:panelGrid>
                                                            <p:panelGrid columns="1" layout="grid" style="float: right;width: 50%" styleClass="ui-panelgrid-blank form-group" >
                                                                <p:panelGrid columns="1" rendered="#{procesoEgresoInvController.habilitar}" id="dd" style="width: 70%">
                                                                    <p:outputLabel value="#{procesoEgresoInvController.unidadAdministrativa.tipoUnidad.texto 
                                                                                            eq null ? 'Direccion' :procesoEgresoInvController.unidadAdministrativa.tipoUnidad.texto }" 
                                                                                   for="direccion" style="width: 100%;"/>
                                                                    <p:inputText  id="direccion" style="text-transform: uppercase" 
                                                                                  class="panelInput" readonly="true"
                                                                                  value="#{procesoEgresoInvController.unidadAdministrativa.nombre}">
                                                                    </p:inputText>
                                                                </p:panelGrid>
                                                                <p:panelGrid columns="1" style="width: 70%">
                                                                    <p:outputLabel value="#{procesoEgresoInvController.servidor.distributivo.unidadAdministrativa.padre.tipoUnidad.texto 
                                                                                            eq null ? 'Departamento' :procesoEgresoInvController.servidor.distributivo.unidadAdministrativa.padre.tipoUnidad.texto}" 
                                                                                   for="departamento" style="width: 100%;"/>
                                                                    <p:inputText  id="departamento" style="text-transform: uppercase" 
                                                                                  class="panelInput" readonly="true"
                                                                                  value="#{procesoEgresoInvController.servidor.distributivo.unidadAdministrativa.padre.nombre}">
                                                                    </p:inputText>
                                                                </p:panelGrid>
                                                                <p:panelGrid columns="1" style="width: 70%">
                                                                    <p:outputLabel value="#{procesoEgresoInvController.servidor.distributivo.unidadAdministrativa.tipoUnidad.texto 
                                                                                            eq null ? 'Unidad' :procesoEgresoInvController.servidor.distributivo.unidadAdministrativa.tipoUnidad.texto}" 
                                                                                   for="unidad" style="width: 100%;"/>
                                                                    <p:inputText  id="unidad" style="text-transform: uppercase" 
                                                                                  class="panelInput" readonly="true"
                                                                                  value="#{procesoEgresoInvController.servidor.distributivo.unidadAdministrativa.nombre}">
                                                                    </p:inputText>
                                                                </p:panelGrid>
                                                            </p:panelGrid>
                                                        </center>
                                                    </p:outputPanel>
                                                </p:fieldset>  </div></div>

                                    </div> 
                                    <div class="ui-g-6"> 
                                        <div class="ui-g">
                                            <div class="ui-g-12">
                                                <p:fieldset legend="ORDEN DE REQUISICIÓN" style="margin-bottom:40px; font-weight: bold" id="datosOrden" rendered="#{procesoEgresoInvController.mostrarReq}">
                                                    <p:outputPanel id="outPanelRequisicion" style="width: 100%">
                                                        <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                                            <p:commandButton value="Adicionar"
                                                                             icon="fa fa-plus"
                                                                             process="@this" 
                                                                             disabled="#{procesoEgresoInvController.habilitarBtn}"
                                                                             actionListener="#{procesoEgresoInvController.abrirDialogRequisicion()}"
                                                                             style=" float: right; width: 130px">
                                                                <p:ajax event="dialogReturn" 
                                                                        listener="#{procesoEgresoInvController.selectDatosRequisicion}"
                                                                        update="dtRequisicion"/>
                                                            </p:commandButton>
                                                            <p:dataTable id="dtRequisicion" 
                                                                         var="req" 
                                                                         reflow="true" 
                                                                         paginator="true" 
                                                                         lazy="true" rows="10" 
                                                                         rowsPerPageTemplate="10,50,100" 
                                                                         paginatorPosition="bottom"
                                                                         value="#{procesoEgresoInvController.listOrdenRequisicion}"
                                                                         filterEvent="keyup"
                                                                         emptyMessage="No se encontró ninguna orden de Requisicion.">
                                                                <f:facet name="header">
                                                                    LISTA DE ORDENES DE REQUISICIÓN
                                                                </f:facet>
                                                                <p:column headerText="Número Orden de Requisición" style="font-weight: bold; width: 150px" >
                                                                    <h:outputText value="#{req.codigo}"/>   
                                                                </p:column>
                                                                <p:column headerText="Fecha Aprobación" style="font-weight: bold">
                                                                    <h:outputText value="#{req.fechaAprobacion}">
                                                                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                                                                    </h:outputText>  
                                                                </p:column>
                                                                <p:column headerText="Aprobado por:" style="font-weight: bold">
                                                                    <h:outputText value="#{req.servidorRevisor}"/>  
                                                                </p:column>
                                                                <p:column headerText="Acciones" style="font-weight: bold; width: 150px">
                                                                    <center>
                                                                        <p:commandLink title="Eliminar" process="@this" actionListener="#{procesoEgresoInvController.borrarElementoRequisicion(req)}"
                                                                                       update="dtRequisicion">
                                                                            <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 5px; color: red;"></i>
                                                                            <p:confirm header="Confirmación de eliminación" message="Esta seguro de eliminar la orden de requisicion?" icon="fa fa-exclamation-triangle" />
                                                                        </p:commandLink>        
                                                                    </center>
                                                                </p:column>
                                                            </p:dataTable>
                                                        </p:panelGrid>
                                                    </p:outputPanel>
                                                </p:fieldset>
                                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                                </p:confirmDialog>


                                                <p:fieldset legend="OFICIO" style="margin-bottom:40px; font-weight: bold" id="datosOficio" rendered="#{procesoEgresoInvController.mostrarOfi}">
                                                    <p:outputPanel id="outPanelOficio" style="width: 100%">
                                                        <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                                            <p:commandButton value="Adicionar"
                                                                             icon="fa fa-plus"
                                                                             process="@this"
                                                                             update="frmOficio"
                                                                             disabled="#{procesoEgresoInvController.habilitarBtn}"
                                                                             actionListener="#{procesoEgresoInvController.abrirDialogOficioCambios(null)}"

                                                                             style=" float: right; width: 130px">
                                                                <!--                                                                <p:ajax event="dialogReturn" 
                                                                                                                                        listener="# {procesoEgresoInvController.selectDatosOficio}"
                                                                                                                                        update="dtOficio"/>-->
                                                            </p:commandButton>
                                                            <p:dataTable id="dtOficio" 
                                                                         value="#{procesoEgresoInvController.listOficio}"
                                                                         var="of" 
                                                                         reflow="true" 
                                                                         paginator="true" 
                                                                         lazy="true" rows="10" 
                                                                         rowsPerPageTemplate="10,50,100" 
                                                                         paginatorPosition="bottom"
                                                                         filterEvent="keyup"
                                                                         emptyMessage="No se encontró ningun oficio.">
                                                                <f:facet name="header">
                                                                    LISTA DE OFICIOS
                                                                </f:facet>
                                                                <p:column headerText="Número Oficio" style="font-weight: bold; width: 150px" >
                                                                    <h:outputText value="#{of.numeroOficio}"/>   
                                                                </p:column>
                                                                <p:column headerText="Fecha Oficio" style="font-weight: bold">
                                                                    <h:outputText value="#{of.fechaOficio}">
                                                                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                                                                    </h:outputText>  
                                                                </p:column>
                                                                <p:column headerText="Acciones" style="font-weight: bold; width: 150px">
                                                                    <center>
                                                                        <p:commandLink title="Editar" update="frmOficio" 
                                                                                       actionListener="#{procesoEgresoInvController.abrirDialogOficioCambios(of)}" process="@this">
                                                                            <i class="fa fa-edit" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                                                        </p:commandLink>  
                                                                        <p:commandLink title="Eliminar" process="@this" actionListener="#{procesoEgresoInvController.borrarElementoOficio(of)}">
                                                                            <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 5px; color: red;"></i>
                                                                            <p:confirm header="Confirmación de eliminación" message="Esta seguro de eliminar oficio seleccionado?" icon="fa fa-exclamation-triangle" />
                                                                        </p:commandLink>        
                                                                    </center>
                                                                </p:column>
                                                            </p:dataTable>
                                                        </p:panelGrid>
                                                    </p:outputPanel>
                                                </p:fieldset>
                                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                                </p:confirmDialog>


                                                <p:fieldset legend="DATO INGRESO" id="carIngreso" style="margin-bottom:40px; font-weight: bold"  rendered="#{procesoEgresoInvController.mostrarIng}">
                                                    <p:outputPanel id="outPanelCargarIngreso" style="width: 100%">
                                                        <center>
                                                            <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                                                <p:panelGrid columns="1">
                                                                    <p:commandButton value="Cargar Ingreso"
                                                                                     process="@this" 
                                                                                     id="btnCargarIngreso"
                                                                                     actionListener="#{procesoEgresoInvController.abrirDialogIngreso()}"
                                                                                     style=" float: right; width: 130px">
                                                                        <p:ajax event="dialogReturn" 
                                                                                listener="#{procesoEgresoInvController.selectDatosIngreso}" 
                                                                                update="ingresoRel"/>
                                                                    </p:commandButton>
                                                                </p:panelGrid>
                                                                <p:panelGrid columns="1">
                                                                    <p:outputLabel value="Ingreso Relacionado" for="ingresoRel" style="width: 100%;"/>
                                                                    <p:inputText  id="ingresoRel" style="text-transform: uppercase"
                                                                                  value="#{procesoEgresoInvController.inventarioIngreso.codigo}"
                                                                                  class="panelInput" readonly="true">
                                                                    </p:inputText>
                                                                </p:panelGrid>
                                                            </p:panelGrid>
                                                        </center>                                                                        
                                                    </p:outputPanel>
                                                </p:fieldset>


                                                <p:fieldset legend="DATOS CONSTATACION FISICA INVENTARIO" style="margin-bottom:40px; font-weight: bold" id="datosCons" rendered="#{procesoEgresoInvController.rendCons}">
                                                    <p:outputPanel id="outPanelCons" style="width: 100%">
                                                        <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                                            <p:commandButton value="Adicionar"
                                                                             icon="fa fa-plus"
                                                                             process="@this" 
                                                                             actionListener="#{procesoEgresoInvController.abrirDialogCons()}"
                                                                             style=" float: right; width: 130px">
                                                                <p:ajax event="dialogReturn" 
                                                                        listener="#{procesoEgresoInvController.selectDatosCons}"
                                                                        update="dtCons"/>
                                                            </p:commandButton>
                                                            <p:dataTable id="dtCons" 
                                                                         var="con" 
                                                                         reflow="true" 
                                                                         paginator="true" 
                                                                         lazy="true" rows="10" 
                                                                         rowsPerPageTemplate="10,50,100" 
                                                                         paginatorPosition="bottom"
                                                                         value="#{procesoEgresoInvController.listCons}"
                                                                         filterEvent="keyup"
                                                                         emptyMessage="No se encontró ninguna constatación seleccionada.">
                                                                <f:facet name="header">
                                                                    LISTA DE CONSTATACIÓN FÍSICA DE INVENTARIO
                                                                </f:facet>
                                                                <p:column headerText="Número Constatación" style="font-weight: bold" >
                                                                    <h:outputText value="#{con.codigo}"/>   
                                                                </p:column>
                                                                <p:column headerText="Fecha Constatación" style="font-weight: bold">
                                                                    <h:outputText value="#{con.fechaConstatacion}">
                                                                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                                                                    </h:outputText>  
                                                                </p:column>
                                                                <p:column headerText="Originador" style="font-weight: bold" >
                                                                    <h:outputText value="#{con.usuarioCreacion}"/>   
                                                                </p:column>
                                                                <p:column headerText="Estado" style="font-weight: bold" >
                                                                    <h:outputText value="#{con.estado}"/>   
                                                                </p:column>
                                                                <p:column headerText="Acciones" style="font-weight: bold">
                                                                    <center>
                                                                        <p:commandLink title="Eliminar" process="@this" actionListener="#{procesoEgresoInvController.borrarElementoCons(con)}"
                                                                                       update="dtCons">
                                                                            <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 5px; color: red;"></i>
                                                                            <p:confirm header="Confirmación de eliminación" message="Esta seguro de eliminar elemento seleccionado?" icon="fa fa-exclamation-triangle" />
                                                                        </p:commandLink>        
                                                                    </center>
                                                                </p:column>
                                                            </p:dataTable>
                                                        </p:panelGrid>
                                                    </p:outputPanel>
                                                </p:fieldset>
                                                <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                    <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                                    <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                                </p:confirmDialog>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                            <div class="card card-w-title" >
                                <div class="ui-g">
                                    <p:panel id="listaItem" header="DETALLE DE ITEM" style="margin-bottom:20px">
                                        <h:panelGrid columns="1">
                                            <p:outputPanel id="outPanelItem" style="width: 100%">
                                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                                    <p:commandButton value="Adicionar"
                                                                     id="btnItem"
                                                                     disabled="#{procesoEgresoInvController.habilitarBtnItem}"
                                                                     process="@this" actionListener="#{procesoEgresoInvController.abrirDialogItem()}" 
                                                                     icon="fa fa-plus"
                                                                     style=" float: right; width: 130px">
                                                        <p:ajax event="dialogReturn" 
                                                                listener="#{procesoEgresoInvController.selectDatosItem}" 
                                                                update="dtItemEgreso"/>
                                                    </p:commandButton>
                                                    <p:remoteCommand name="onCellEdit" update="dtItemEgreso"/>
                                                    <p:dataTable 
                                                        emptyMessage="Ningún Item para mostrar." rowsPerPageTemplate="10,50,100" paginatorPosition="bottom"
                                                        reflow="true" paginator="true"  rows="10" 
                                                        id="dtItemEgreso" rowIndexVar="can" 
                                                        widgetVar="dtItemEgreso"
                                                        value="#{procesoEgresoInvController.listDetalle}"
                                                        var="egr" editable="#{procesoEgresoInvController.habilitar1}" editMode="cell">
                                                        <f:facet name="header" >
                                                            Detalle de Item 
                                                        </f:facet>
                                                        <p:ajax event="cellEdit" listener="#{procesoEgresoInvController.onCellEdit}" oncomplete="onCellEdit()"
                                                                update="dtItemEgreso"/>
                                                        <p:column headerText="#" style=" width: 10px" >
                                                            <h:outputText value="#{can +1 }"/>   
                                                        </p:column>
                                                        <p:column headerText="Item" >
                                                            <h:outputText value="#{egr.codigo}"/>  
                                                        </p:column>
                                                        <p:column headerText="Descripción" >
                                                            <h:outputText value="#{egr.descripcion}"/>  
                                                        </p:column>
                                                        <p:column headerText="Medida" >
                                                            <h:outputText value="#{egr.tipoMedida.descripcion}"/> 
                                                        </p:column>
                                                        <p:column headerText="Stock" >
                                                            <h:outputText value="#{egr.cantidadExistente}"/> 
                                                        </p:column>
                                                        <p:column headerText="Cantidad Solicitada" >
                                                            <p:cellEditor disabled="#{procesoEgresoInvController.habilitar2}">
                                                                <f:facet name="output"><h:outputText  value="#{egr.cantidadTempSol}" /></f:facet>
                                                                <f:facet name="input"><p:inputText  value="#{egr.cantidadTempSol}" style="width:100%"/></f:facet>
                                                            </p:cellEditor>
                                                        </p:column>
                                                        <p:column headerText="Despacho parcial" rendered="#{procesoEgresoInvController.habilitar1}">
                                                            <p:cellEditor>
                                                                <f:facet name="output"><h:outputText  value="#{egr.cantidadTempDes}" /></f:facet>
                                                                <f:facet name="input"><p:inputText value="#{egr.cantidadTempDes}" style="width:100%"/></f:facet>
                                                            </p:cellEditor>
                                                        </p:column>
                                                        <p:column headerText="Cantidad a despachar" id="uno" rendered="#{procesoEgresoInvController.habilitar1}">
                                                            <h:outputText value="#{egr.cantidadTemp}" />
                                                        </p:column>
                                                        <p:column headerText="Observación" >
                                                            <p:cellEditor>
                                                                <f:facet name="output"><h:outputText  value="#{egr.observacionTemp}" /></f:facet>
                                                                <f:facet name="input"><p:inputText value="#{egr.observacionTemp}" style="width:100%"/></f:facet>
                                                            </p:cellEditor>
                                                        </p:column>
                                                        <p:column headerText="Acciones" style=" width: 150px" rendered="#{procesoEgresoInvController.habilitar1}">
                                                            <center>
                                                                <p:commandLink title="Eliminar" process="@this" 
                                                                               actionListener="#{procesoEgresoInvController.borrarElementoLista(egr)}"
                                                                               update="dtItemEgreso">
                                                                    <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 5px; color: red;"></i>
                                                                    <p:confirm header="Confirmación de eliminación" message="Esta seguro de eliminar el item?" icon="fa fa-exclamation-triangle" />
                                                                </p:commandLink>        
                                                            </center>
                                                        </p:column>
                                                    </p:dataTable>
                                                </p:panelGrid>
                                            </p:outputPanel>
                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                            </p:confirmDialog>
                                        </h:panelGrid>
                                    </p:panel>
                                </div>
                            </div>
                            <center>
                                <p:commandButton rendered="false" value="Generar Egreso"
                                                 icon="fa fa-save"
                                                 id="btnGen"
                                                 disabled="#{procesoEgresoInvController.habilitarBtn}"
                                                 process="outPanelDatos"  update="frmMain"
                                                 actionListener="#{procesoEgresoInvController.guardar()}"
                                                 style=" width: 170px">
                                </p:commandButton>
                                <p:spacer width="10" />
                                <p:commandButton rendered="false" value="Cancelar"
                                                 icon="ui-icon-clear" styleClass="red-btn"
                                                 process="@this" update="frmMain"
                                                 actionListener="#{procesoEgresoInvController.limpiarTodo()}"
                                                 style="width: 170px">
                                </p:commandButton>




                            </center>
                        </div>
                    </div>
                </div>
            </div>
        </h:form>
        <h:form prependId="false">
            <center>
                <p:commandButton  value="Imprimir"
                                  icon="fa fa-print" 
                                  process="@this"
                                  actionListener="#{procesoEgresoInvController.imprimir()}"
                                  style="width: 170px;background: #0081cb;">
                </p:commandButton>
            </center>
        </h:form>
        <p:dialog header="Formulario Datos oficio"
                  widgetVar="dlgOficio"
                  modal="true"
                  resizable="false"
                  showEffect="fade"
                  hideEffect="fade"    
                  id="dlgOficios">
            <h:form prependId="false" id="frmOficio">
                <p:growl id="msgs1" showDetail="true"/>
                <div class="ui-g">
                    <div class="ui-g-12"> 
                        <p:outputPanel id="outPanelOficio" style="width: 100%">   
                            <p:fieldset legend="DATOS" style="margin-bottom:40px; font-weight: bold" id="datosOficioCambios">
                                <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <p:panelGrid columns="1" >
                                        <p:outputLabel value="Número de Oficio" for="numOficio" style="width: 100%;"/>
                                        <p:inputText  id="numOficio" style="text-transform: uppercase" 
                                                      value="#{procesoEgresoInvController.oficio.numeroOficio}" class="panelInput" readonly="false" >
                                        </p:inputText>
                                    </p:panelGrid>

                                    <p:panelGrid  columns="1"  >
                                        <p:outputLabel value="Fecha Oficio" style="width: 100%;"></p:outputLabel>
                                        <p:calendar id="fecOficio" pattern="dd-MM-yyyy" mask="true" required="true" 
                                                    value="#{procesoEgresoInvController.oficio.fechaOficio}"/>
                                    </p:panelGrid>
                                </p:panelGrid>
                            </p:fieldset>


                            <center>
                                <p:spacer width="10" />
                                <p:commandButton value="Guardar"
                                                 icon="fa fa-save"
                                                 actionListener="#{procesoEgresoInvController.guardarOficio()}"
                                                 process="@form" update="frmMain:dtOficio"
                                                 rendered="#{procesoEgresoInvController.nuevo}">
                                </p:commandButton>
                                <p:spacer width="10" />
                                <p:commandButton value="Editar"
                                                 actionListener="#{procesoEgresoInvController.editarOficio()}"
                                                 icon="fa fa-edit"
                                                 process="@form" update="frmMain:dtOficio"
                                                 rendered="#{!procesoEgresoInvController.nuevo}">
                                </p:commandButton>
                                <p:spacer width="10" />
                                <p:commandButton value="Cerrar"
                                                 onclick="PF('dlgOficio').hide()"
                                                 actionListener="#{procesoEgresoInvController.limpiarVariableOficio()}"
                                                 process="@this">

                                </p:commandButton>
                            </center>
                        </p:outputPanel>

                    </div>
                </div>
            </h:form>
        </p:dialog>


    </ui:define>

</ui:composition>
