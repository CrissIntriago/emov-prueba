<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:u="http://xmlns.jcp.org/jsf/composite/comp"
                xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:define name="title">
        INGRESOS A BODEGA
    </ui:define>

    <ui:define name="content">
        <h:form id="frmMain">
            <p:growl id="msgs" showDetail="true"/>
            <div class="ui-fluid">
                <div class="ui-g">
                    <div class="ui-g-12">

                        <div class="card card-w-title">
                            <div class="ui-g">
                                <br/><br/><br/><br/>
                                <div class="ui-g-12">
                                    <div class="ui-g">
                                        <div class="ui-g-12">
                                            <u:titleTask task="#{procesoIngresoInvView.tarea}" tramite="#{procesoIngresoInvView.tramite}" />
                                        </div>
                                    </div>
                                    <br/><br/>
                                    <div class="ui-g">
                                        <div class="ui-g-4">
                                            <div style="float: left" id="egrr">
                                                <p:panelGrid columns="2" layout="grid" id="ingresoCabecera1" styleClass="ui-panelgrid-blank form-group" >
                                                    <p:panelGrid columns="2" style="width: 350px"  >
                                                        <p:outputLabel for="num" value="INGRESO NO:"/>
                                                        <p:inputText   id="num" style="width: 140px;font-weight: bold; font-size: 25px"  
                                                                       class="panelInput" readonly="true" value="#{procesoIngresoInvView.inventario.codigo}">
                                                        </p:inputText>
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                            </div>

                                        </div>
                                        <div class="ui-g-8">
                                            <div style="float: right" id="egr">
                                                <p:panelGrid columns="2" layout="grid"  id="ingresoCabecera2" styleClass="ui-panelgrid-blank form-group">
                                                    <p:panelGrid columns="1">
                                                        <p:outputLabel value="Fecha Ingreso" for="fechaIngreso" style="width: 100%;"/>
                                                        <p:calendar id="fechaIngreso" pattern="dd/MM/yyyy" mask="true"  
                                                                    readonly="true"
                                                                    value="#{procesoIngresoInvView.inventario.fechaMovimiento}"/>
                                                    </p:panelGrid>
                                                    <p:panelGrid columns="1">
                                                        <p:outputLabel value="Año" for="anioIngreso" style="width: 100%;"/>
                                                        <p:inputText  id="anioIngreso" 
                                                                      class="panelInput" readonly="true" value="#{procesoIngresoInvView.inventario.anio}">

                                                        </p:inputText>
                                                    </p:panelGrid>
                                                </p:panelGrid>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="ui-g">
                                        <div class="ui-g-6">         
                                            <p:fieldset legend="DATOS NUEVO INGRESO" style="margin-bottom:40px; font-weight: bold">
                                                <p:outputPanel id="outPanelMedidaUno" style="width: 100%">
                                                    <p:panelGrid columns="3" columnClasses="ui-grid-col-4" layout="grid" styleClass="ui-panelgrid-blank form-group" style="width: 100%">
                                                        <p:panelGrid columns="1" style="width: 100%">
                                                            <p:outputLabel value="Responsable" for="responsableIngreso" style="width: 100%;"/>
                                                            <p:inputText  id="responsableIngreso" style="text-transform: uppercase; width: 100%;"
                                                                          class="panelInput" readonly="true" value="#{procesoIngresoInvView.inventario.usuarioOriginador}">
                                                            </p:inputText>
                                                        </p:panelGrid>
                                                        <p:panelGrid columns="1" style="width: 100%">
                                                            <p:outputLabel value="Tipo Movimiento" for="tipoMovimiento" style="width: 100%;"/>
                                                            <p:inputText  id="tipoMovimiento" style="text-transform: uppercase; width: 100%;" 
                                                                          class="panelInput" readonly="true" 
                                                                          value="#{procesoIngresoInvView.inventario.tipoMovimiento}">
                                                            </p:inputText>
                                                        </p:panelGrid>
                                                        <p:panelGrid columns="1" style="width: 100%">
                                                            <p:outputLabel value="Motivo" style="width: 100%;"></p:outputLabel>
                                                            <p:selectOneMenu style="width:100%;" value="#{procesoIngresoInvView.inventario.motivoMovimiento}" 
                                                                             disabled="#{procesoIngresoInvView.habilitar}" converter="entityConverter" >
                                                                <f:selectItem itemLabel="Seleccione" itemValue="#{null}"/>
                                                                <f:selectItems value="#{procesoIngresoInvView.motivoMovimiento}" var="medidaUno"
                                                                               itemLabel="#{medidaUno.texto}" itemValue="#{medidaUno}"/>
                                                                <p:ajax listener="#{procesoIngresoInvView.mostrarBtn()}" update="frmMain"/>
                                                            </p:selectOneMenu>
                                                        </p:panelGrid>
                                                    </p:panelGrid>

                                                    <p:panelGrid columns="1" columnClasses="ui-grid-col-12" layout="grid" styleClass="ui-panelgrid-blank form-group" style="width: 100%">
                                                        <p:panelGrid columns="1" style="width: 100%">
                                                            <p:outputLabel value="Observación" for="observacion"/>
                                                            <p:inputTextarea id="observacion" rows="4" cols="17" autoResize="false" readonly="true"
                                                                             class="panelInput" 
                                                                             style="width: 100%; text-transform: uppercase" 
                                                                             value="#{procesoIngresoInvView.inventario.observacion}"/>
                                                        </p:panelGrid>
                                                    </p:panelGrid>

                                                </p:outputPanel>
                                            </p:fieldset>
                                            <p:fieldset legend="DATO EGRESO" id="carEgreso" style="margin-bottom:40px; font-weight: bold" rendered="#{procesoIngresoInvView.mostrar}" >
                                                <p:outputPanel id="outPanelCargarEgreso" style="width: 100%">
                                                    <center>
                                                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                                            <p:panelGrid columns="1">
                                                                <p:commandButton value="Cargar Egreso"
                                                                                 process="@this" disabled="true"
                                                                                 id="btnCargarEgreso"
                                                                                 actionListener="#{procesoIngresoInvView.abrirDialogoEgreso()}"
                                                                                 style=" float: right; width: 130px">
                                                                    <p:ajax event="dialogReturn" 
                                                                            listener="#{procesoIngresoInvView.selectDatosEgreso}" 
                                                                            update="egresoRel"/>
                                                                </p:commandButton>
                                                            </p:panelGrid>
                                                            <p:panelGrid columns="1">
                                                                <p:outputLabel value="Egreso Relacionado" for="egresoRel" style="width: 100%;"/>
                                                                <p:inputText  id="egresoRel" style="text-transform: uppercase" 
                                                                              class="panelInput" readonly="true" 
                                                                              value="#{procesoIngresoInvView.inventarioEgreso.codigo}">
                                                                </p:inputText>
                                                            </p:panelGrid>
                                                        </p:panelGrid>
                                                    </center>                                                                        
                                                </p:outputPanel>
                                            </p:fieldset>


                                            <p:fieldset legend="DATOS DE PROVEEDOR" style="margin-bottom:40px; font-weight: bold" id="datosProv" rendered="#{procesoIngresoInvView.rendFactura}">
                                                <p:outputPanel id="outPanelMedidaCuatro" style="width: 100%">                                                        

                                                    <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid"  styleClass="ui-panelgrid-blank form-group" style="width: 100%">
                                                        <p:panelGrid columns="1" style="width: 100%">

                                                            <p:outputLabel value="IDENTIFICACIÓN" style="width: 100%" />
                                                            <p:inputText id="identifica" 
                                                                         class="panelInput" value="#{procesoIngresoInvView.proveedor.cliente.identificacion}" 
                                                                         maxlength="13" style=" width: 100%" required="true" readonly="true"/>  

                                                        </p:panelGrid>
                                                    </p:panelGrid> 
                                                    <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid"  styleClass="ui-panelgrid-blank form-group" style="width: 100%">
                                                        <p:panelGrid columns="1" style="width: 100%">
                                                            <p:outputLabel value="Razón social" for="razon" style="width: 100%;"/>
                                                            <p:inputText  value="#{procesoIngresoInvView.proveedor.cliente.nombre}"
                                                                          id="razon" style="text-transform: uppercase" 
                                                                          class="panelInput" readonly="true">
                                                            </p:inputText>
                                                        </p:panelGrid>
                                                        <p:panelGrid columns="1" style="width: 100%">
                                                            <p:outputLabel value="Nombre Comercial" for="nombreCom" style="width: 100%;"/>
                                                            <p:inputText  value="#{procesoIngresoInvView.proveedor.cliente.apellido}"
                                                                          id="nombreCom" style="text-transform: uppercase" 
                                                                          class="panelInput" readonly="true">
                                                            </p:inputText>
                                                        </p:panelGrid> 
                                                    </p:panelGrid>

                                                </p:outputPanel>
                                            </p:fieldset>



                                        </div>
                                        <div class="ui-g-6">
                                            <p:fieldset legend="DATOS DE ADQUISICIÓN" style="margin-bottom:40px; font-weight: bold" rendered="#{procesoIngresoInvView.rendOrden}">
                                                <p:outputPanel id="outPanelMedidaTres" style="width: 100%">
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">

                                                        <p:dataTable id="dtOrden" 
                                                                     var="ord" 
                                                                     value="#{procesoIngresoInvView.listAdq}"
                                                                     emptyMessage="Ninguna documento escogido.">
                                                            <f:facet name="header">
                                                                Datos de adquisición
                                                            </f:facet>
                                                            <p:column headerText="N° Orden" style="font-weight: bold; width: 170px" >
                                                                <h:outputText value="#{ord.idProceso}"/>   
                                                            </p:column>
                                                            <p:column headerText="Fecha Emisión" style="font-weight: bold">
                                                                <h:outputText value="#{ord.fechaEmision}">
                                                                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                                                                </h:outputText>  
                                                            </p:column>
                                                            <p:column headerText="Fecha Aceptación" style="font-weight: bold">
                                                                <h:outputText value="#{ord.fechaAceptacion}">
                                                                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                                                                </h:outputText>   
                                                            </p:column>
                                                        </p:dataTable>
                                                    </p:panelGrid>
                                                    <br></br>
                                                </p:outputPanel>
                                            </p:fieldset>
                                            <p:fieldset legend="DATOS CONSTATACIÓN FÍSICA INVENTARIO" style="margin-bottom:40px; font-weight: bold" id="datosCons" rendered="#{procesoIngresoInvView.rendCons}">
                                                <p:outputPanel id="outPanelCons" style="width: 100%">
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                                        <p:commandButton value="Adicionar"
                                                                         icon="fa fa-plus"
                                                                         process="@this" 
                                                                         actionListener="#{procesoIngresoInvView.abrirDialogCons()}"
                                                                         style=" float: right; width: 130px">
                                                            <p:ajax event="dialogReturn" 
                                                                    listener="#{procesoIngresoInvView.selectDatosCons}"
                                                                    update="dtCons"/>
                                                        </p:commandButton>
                                                        <p:dataTable id="dtCons" var="con" reflow="true" paginator="true" rows="10" rowsPerPageTemplate="10,50,100" 
                                                                     paginatorPosition="bottom" value="#{procesoIngresoInvView.listCons}" filterEvent="keyup"
                                                                     emptyMessage="No se encontró ninguna constatación seleccionada.">
                                                            <f:facet name="header">
                                                                LISTA DE CONSTATACIÓN FÍSICA DE INVENTARIO
                                                            </f:facet>
                                                            <p:column headerText="Número Constatación" style="font-weight: bold" >
                                                                <h:outputText value="#{con.codigo}"/>   
                                                            </p:column>
                                                            <p:column headerText="Fecha Constatación" style="font-weight: bold">
                                                                <h:outputText value="#{con.fechaConstatacion}">
                                                                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                                                                </h:outputText>  
                                                            </p:column>
                                                            <p:column headerText="Originador" style="font-weight: bold" >
                                                                <h:outputText value="#{con.usuarioCreacion}"/>   
                                                            </p:column>
                                                            <p:column headerText="Estado" style="font-weight: bold" >
                                                                <h:outputText value="#{con.estado}"/>   
                                                            </p:column>
                                                            <p:column headerText="Acciones" style="font-weight: bold">
                                                                <center>
                                                                    <p:commandLink title="Eliminar" process="@this" disabled="true"
                                                                                   actionListener="#{procesoIngresoInvView.borrarElementoCons(con)}"
                                                                                   update="dtCons">
                                                                        <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 5px; color: red;"></i>
                                                                        <p:confirm header="Confirmación de eliminación" message="Esta seguro de eliminar elemento seleccionado?" icon="fa fa-exclamation-triangle" />
                                                                    </p:commandLink>        
                                                                </center>
                                                            </p:column>
                                                        </p:dataTable>
                                                    </p:panelGrid>
                                                </p:outputPanel>
                                            </p:fieldset>
                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                            </p:confirmDialog>


                                            <p:fieldset legend="#{procesoIngresoInvView.condContrato eq true ? 'DATOS OFICIO' : 'DATOS OFICIO DE DONACIÓN'}" style="margin-bottom:40px; font-weight: bold" rendered="#{procesoIngresoInvView.rendOficio}">
                                                <p:outputPanel id="outPanelMedidaDos" style="width: 100%">
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                                        <p:commandButton value="Adicionar"
                                                                         process="@this"
                                                                         id="btnOficio"
                                                                         disabled="#{procesoIngresoInvView.habilitar}"
                                                                         icon="fa fa-plus"
                                                                         actionListener="#{procesoIngresoInvView.abrirDialogoOficioCambios(null)}"
                                                                         update="frmOficio,dlgOficios"
                                                                         style=" float: right; width: 130px">
                                                            <!--                                                                <p:ajax event="dialogReturn" 
                                                                                                                                    listener="# {procesoIngresoInvView.selectDatosOficio}"
                                                                                                                                    update="dtOficio"/>-->
                                                        </p:commandButton>
                                                        <p:dataTable id="dtOficio" var="of" reflow="true" paginator="true" rows="10" rowsPerPageTemplate="10,50,100" 
                                                                     paginatorPosition="bottom" value="#{procesoIngresoInvView.listOficio}" filterEvent="keyup"
                                                                     emptyMessage="#{procesoIngresoInvView.condContrato eq true ? 'No se encontró ningún oficio':'No se encontró ningún oficio'}">
                                                            <f:facet name="header">
                                                                #{procesoIngresoInvView.condContrato eq true ? 'Oficio relacionado a ingreso':'Oficio De Donación relacionado a ingreso'}  
                                                            </f:facet>
                                                            <p:column headerText="#{procesoIngresoInvView.condContrato eq true ? 'Número Oficio' : 'Número oficio Donación'}" style="font-weight: bold; width: 150px" >
                                                                <h:outputText value="#{of.numeroOficio}"/>   
                                                            </p:column>
                                                            <p:column headerText="#{procesoIngresoInvView.condContrato eq true ? 'Fecha Oficio' : 'Fecha oficio Donación'}" style="font-weight: bold">
                                                                <h:outputText value="#{of.fechaOficio}">
                                                                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                                                                </h:outputText>  
                                                            </p:column>
                                                            <p:column headerText="Identificación Proveedor" style="font-weight: bold" rendered="false" >
                                                                <h:outputText value="#{of.proveedor.cliente.identificacion}"/>  
                                                            </p:column>
                                                            <p:column headerText="Razón Social" style="font-weight: bold" rendered="false">
                                                                <h:outputText value="#{of.proveedor.cliente.nombre}"/>  
                                                            </p:column>
                                                            <p:column headerText="Nombre Comercial" style="font-weight: bold" rendered="false">
                                                                <h:outputText value="#{of.proveedor.cliente.apellido}"/>  
                                                            </p:column>
                                                            <p:column headerText="Acciones" style="font-weight: bold; width: 150px">
                                                                <center>  
                                                                    <p:commandLink title="Editar" update="frmOficio" disabled="true"
                                                                                   actionListener="#{procesoIngresoInvView.abrirDialogoOficioCambios(of)}" process="@this">
                                                                        <i class="fa fa-edit" style="font-size: 1.5em; margin-right: 8px; color: #0D47A1;"></i>
                                                                    </p:commandLink>  
                                                                    <p:commandLink title="Eliminar" process="@this" disabled="true" 
                                                                                   actionListener="#{procesoIngresoInvView.borrarElementoOficio(of)}"
                                                                                   update="dtOficio">
                                                                        <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 5px; color: red;"></i>
                                                                        <p:confirm header="Confirmación de eliminación" message="Esta seguro de eliminar el item?" icon="fa fa-exclamation-triangle" />
                                                                    </p:commandLink>         
                                                                </center>
                                                            </p:column>
                                                        </p:dataTable>
                                                    </p:panelGrid>
                                                </p:outputPanel>
                                            </p:fieldset>


                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                            </p:confirmDialog>

                                            <p:fieldset legend="FACTURAS RELACIONADAS A NUEVO INGRESO" style="margin-bottom:40px; font-weight: bold" rendered="#{procesoIngresoInvView.rendFactura}">
                                                <p:outputPanel id="outPanelMedidaCinco" style="width: 100%">
                                                    <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">

                                                        <p:dataTable id="dtFactura" var="fac" reflow="true" rows="10" value="#{procesoIngresoInvView.listFactura}"
                                                                     rowsPerPageTemplate="10,50,100" rowIndexVar="can" paginatorPosition="bottom" filterEvent="keyup"
                                                                     emptyMessage="No se encontró ninguna factura para mostrar.">
                                                            <f:facet name="header">
                                                                Facturas relacionada a Ingreso 
                                                            </f:facet>
                                                            <p:column headerText="Número Factura" style="font-weight: bold" >
                                                                <h:outputText value="#{fac.numFactura}"/>   
                                                            </p:column>
                                                            <p:column headerText="Fecha Emisión" style="font-weight: bold">
                                                                <h:outputText value="#{fac.fechaFactura}">
                                                                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                                                                </h:outputText>  
                                                            </p:column>
                                                            <p:column headerText="Fecha Caducidad" style="font-weight: bold">
                                                                <h:outputText value="#{fac.fechaCaducidad}">
                                                                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                                                                </h:outputText>  
                                                            </p:column>
                                                            <p:column headerText="Número Autorización" style="font-weight: bold" >
                                                                <h:outputText value="#{fac.numAutorizacion}"/>   
                                                            </p:column>

                                                        </p:dataTable>
                                                    </p:panelGrid>
                                                    <br></br>
                                                </p:outputPanel>
                                            </p:fieldset>

                                        </div>
                                    </div>

                                    <p:panel id="listaItem" header="DETALLE DE ITEM" style="margin-bottom:20px"  >
                                        <h:panelGrid columns="1">
                                            <p:outputPanel id="outPanelMedidaSeis" style="width: 100%" >
                                                <p:panelGrid columns="1" layout="grid" styleClass="ui-panelgrid-blank form-group">

                                                    <p:remoteCommand name="onCellEdit" update="dtItemIngreso"/>
                                                    <p:dataTable 
                                                        emptyMessage="Ningún Item para mostrar." rowsPerPageTemplate="10,50,100" paginatorPosition="bottom"
                                                        reflow="true" paginator="true"  rows="10" 
                                                        id="dtItemIngreso" rowIndexVar="can" 
                                                        value="#{procesoIngresoInvView.listDetalle}"
                                                        var="med" editable="false" editMode="cell" widgetVar="dtIngg">
                                                        <f:facet name="header" >
                                                            Detalle de Item 
                                                        </f:facet>
                                                        <p:ajax event="cellEdit" listener="#{procesoIngresoInvView.onCellEdit}" oncomplete="onCellEdit()"
                                                                update="dtItemIngreso"/>
                                                        <p:column headerText="#" style=" width: 10px" >
                                                            <h:outputText value="#{can +1 }"/>   
                                                        </p:column>
                                                        <p:column headerText="Cod. Item" >
                                                            <h:outputText value="#{med.codigoAgrupado}"/>  
                                                        </p:column>
                                                        <p:column headerText="Descripción" style=" width: 200px"  >
                                                            <h:outputText value="#{med.descripcion}"/>  
                                                        </p:column>
                                                        <p:column headerText="Cuenta Contable" style=" width: 100px; text-align: center" >
                                                            <h:outputText value="#{med.cuentaContable.codigo}"/>  
                                                        </p:column>
                                                        <p:column headerText="Estante" style=" width: 60px">
                                                            <p:cellEditor disabled="#{procesoIngresoInvView.mostrar3}">
                                                                <f:facet name="output"><h:outputText  value="#{med.estante}" /></f:facet>
                                                                <f:facet name="input"><p:inputText value="#{med.estante}" style="width:100%"/></f:facet>
                                                            </p:cellEditor>
                                                        </p:column>
                                                        <p:column headerText="Fila" style=" width: 60px">
                                                            <p:cellEditor disabled="#{procesoIngresoInvView.mostrar3}" >
                                                                <f:facet name="output"><h:outputText  value="#{med.fila}" /></f:facet>
                                                                <f:facet name="input"><p:inputText value="#{med.fila}" style="width:100%"/></f:facet>
                                                            </p:cellEditor>
                                                        </p:column>
                                                        <p:column headerText="Columna" style=" width: 60px">
                                                            <p:cellEditor disabled="#{procesoIngresoInvView.mostrar3}" >
                                                                <f:facet name="output"><h:outputText  value="#{med.columna}" /></f:facet>
                                                                <f:facet name="input"><p:inputText value="#{med.columna}" style="width:100%"/></f:facet>
                                                            </p:cellEditor>
                                                        </p:column>
                                                        <p:column headerText="Cajón" style=" width: 60px">
                                                            <p:cellEditor disabled="#{procesoIngresoInvView.mostrar3}" >
                                                                <f:facet name="output"><h:outputText  value="#{med.cajon}" /></f:facet>
                                                                <f:facet name="input"><p:inputText value="#{med.cajon}" style="width:100%"/></f:facet>
                                                            </p:cellEditor>
                                                        </p:column>
                                                        <p:column headerText="Cuadrante" style=" width: 60px">
                                                            <p:cellEditor disabled="#{procesoIngresoInvView.mostrar3}" >
                                                                <f:facet name="output"><h:outputText  value="#{med.cuadrante}" /></f:facet>
                                                                <f:facet name="input"><p:inputText value="#{med.cuadrante}" style="width:100%"/></f:facet>
                                                            </p:cellEditor>
                                                        </p:column>
                                                        <p:column headerText="Medida" >
                                                            <h:outputText value="#{med.tipoMedida.descripcion}"/>  
                                                        </p:column>
                                                        <p:column headerText="Cantidad a ingresar" >
                                                            <p:cellEditor disabled="#{procesoIngresoInvView.mostrar3}">
                                                                <f:facet name="output"><h:outputText  value="#{med.cantidadTemp}" /></f:facet>
                                                                <f:facet name="input"><p:inputText value="#{med.cantidadTemp}" style="width:100%"/></f:facet>
                                                            </p:cellEditor>
                                                        </p:column>

                                                        <p:column headerText="Precio Unitario" rendered="#{procesoIngresoInvView.mostrarAccObs}">
                                                            <p:cellEditor disabled="#{procesoIngresoInvView.mostrar3}" >
                                                                <f:facet name="output">
                                                                    <h:outputText  value="#{med.precioTemp}" style="float: right">
                                                                        <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                                    </h:outputText></f:facet>
                                                                <f:facet name="input"><p:inputText value="#{med.precioTemp}" style="width:100%" /></f:facet>
                                                            </p:cellEditor>                                              </p:column>
                                                        <p:column  headerText="Total" rendered="#{procesoIngresoInvView.mostrarAccObs}">
                                                            <h:outputText value="#{med.totalTemp}" style="float: right">
                                                                <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                                                            </h:outputText>
                                                        </p:column>
                                                        <p:column headerText="Observación" rendered="#{!procesoIngresoInvView.mostrarAccObs}">
                                                            <p:cellEditor>
                                                                <f:facet name="output"><h:outputText  value="#{med.observacionTemp}" /></f:facet>
                                                                <f:facet name="input"><p:inputText value="#{med.observacionTemp}" style="width:100%"/></f:facet>
                                                            </p:cellEditor>
                                                        </p:column>
                                                        <p:column headerText="Acciones" style=" width: 80px" rendered="#{procesoIngresoInvView.mostrarAccObs}">
                                                            <center>
                                                                <p:commandLink title="Eliminar" process="@this" disabled="true" actionListener="#{procesoIngresoInvView.borrarElementoLista(med)}"
                                                                               update="dtItemIngreso">
                                                                    <i class="fa fa-trash" style="font-size: 1.5em; margin-right: 5px; color: red;"></i>
                                                                    <p:confirm header="Confirmación de eliminación" message="Esta seguro de eliminar el item?" icon="fa fa-exclamation-triangle" />
                                                                </p:commandLink>        
                                                            </center>
                                                        </p:column>
                                                    </p:dataTable>
                                                </p:panelGrid>
                                            </p:outputPanel>
                                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                                <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes GreenButton" icon="fa fa-check" />
                                                <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no RedButton" icon="fa fa-times" />
                                            </p:confirmDialog>
                                        </h:panelGrid>
                                    </p:panel>

                                </div>
                            </div>
                            <center>
                                <p:commandButton rendered="false" value="Generar Ingreso"
                                                 icon="fa fa-save"
                                                 id="btnGen"
                                                 disabled="true"
                                                 process="outPanelMedidaUno"  update="frmMain"
                                                 actionListener="#{procesoIngresoInvView.guardar()}"
                                                 style=" width: 170px">
                                </p:commandButton>

                                <p:commandButton rendered="false"  value="Aprobar"  disabled="true"
                                                 icon="fa fa-arrow-circle-right"  actionListener="#{procesoIngresoInvView.aprobacionPrcoeso(1)}"  update="frmMain"    style="width: 170px; background: #0081cb;"  
                                                 />


                                <p:spacer width="10" />

                                <p:commandButton rendered="false"   value="Rechazar"
                                                 icon="ui-icon-clear" styleClass="red-btn"
                                                 process="@this" update="frmMain" disabled="true"
                                                 actionListener="#{procesoIngresoInvView.aprobacionPrcoeso(0)}"
                                                 style="width: 170px; background:red">
                                </p:commandButton>

                                <p:commandButton value="Generar Acta de Recepción" 
                                                 icon="fa fa-print" 
                                                 actionListener="#{procesoIngresoInvView.imprimir()}" style="width: 170px;"/>
                                <p:spacer width="10" />
                                <p:commandButton value="Continuar y Terminar Tarea" 
                                                 icon="fa fa-check-square-o" 
                                                 actionListener="#{procesoIngresoInvView.culimnarTarea()}" style="width: 170px; background: #0081cb;"/>


                                <p:spacer width="10" />


                            </center>
                        </div>
                    </div>
                </div>
            </div>
        </h:form>

        <p:dialog header="Continuar Proceso" widgetVar="continuarDlg" modal="true" height="150"
                  resizable="false"
                  showEffect="fade" >
            <p:ajax event="close" listener="#{procesoIngresoInvView.irBandejatareas()}" />
            <h:form prependId="false" id="frmContinuar">
                <div>
                    <hr></hr>
                    <br></br>
                    <p:outputLabel value="Continuar con el proceso"  style="width: 100%; font-size: 20px;"/>
                    <br></br>
                    <br></br>
                    <br></br>
                    <center>
                        <p:commandButton value="Continuar"
                                         icon="fa fa-arrow-circle-right"
                                         style="width: 150px; background: #0081cb;" 
                                         actionListener="#{procesoIngresoInvView.irBandejatareas()}"
                                         process="@this" />
                    </center>
                    <br></br>
                    <hr></hr>
                </div>

            </h:form>
        </p:dialog>


        <p:dialog header="Formulario Datos de Orden de Compra por Catálogo Electrónico"
                  widgetVar="dlgOrdenElectronico"
                  modal="true"
                  resizable="false"
                  showEffect="fade"
                  hideEffect="fade"
                  id="dlgOrdenElectronicos">
            <h:form prependId="false" id="frmOrden">
                <p:growl id="msgs" showDetail="true"/>
                <div class="ui-g">
                    <div class="ui-g-12"> 
                        <p:outputPanel id="outPanelOrden" style="width: 100%">   
                            <p:fieldset legend="DATOS" style="margin-bottom:40px; font-weight: bold" id="datosOrdenCambios">
                                <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <p:panelGrid columns="1" >
                                        <p:outputLabel value="Número de orden" for="numOrden" style="width: 100%;"/>
                                        <p:inputText  id="numOrden" style="text-transform: uppercase" 
                                                      value="#{procesoIngresoInvView.ordenCompra.numeroOrden}" class="panelInput" readonly="false" >
                                        </p:inputText>
                                    </p:panelGrid>

                                    <p:panelGrid  columns="1"  >
                                        <p:outputLabel value="Fecha Emisión" style="width: 100%;"></p:outputLabel>
                                        <p:calendar id="fecOrden" pattern="dd-MM-yyyy" mask="true" required="true" 
                                                    value="#{procesoIngresoInvView.ordenCompra.fechaOrden}"/>
                                    </p:panelGrid>
                                    <p:panelGrid  columns="1"  >
                                        <p:outputLabel value="Fecha Aceptación" style="width: 100%;"></p:outputLabel>
                                        <p:calendar id="fecAcepOrden" pattern="dd-MM-yyyy" mask="true" required="true" 
                                                    value="#{procesoIngresoInvView.ordenCompra.fechaAceptacion}"/>
                                    </p:panelGrid>
                                </p:panelGrid>
                            </p:fieldset>


                            <center>
                                <p:spacer width="10" />
                                <p:commandButton value="Guardar"
                                                 icon="fa fa-save"
                                                 actionListener="#{procesoIngresoInvView.guardarOrdenCatalogoElec()}"
                                                 process="@form" update="frmMain:dtOrden"
                                                 rendered="#{procesoIngresoInvView.nuevo}">
                                </p:commandButton>
                                <p:spacer width="10" />
                                <p:commandButton value="Editar"
                                                 actionListener="#{procesoIngresoInvView.editarOrdenCatalogoElec()}"
                                                 icon="fa fa-edit"
                                                 process="@form" update="frmMain:dtOrden"
                                                 rendered="#{!procesoIngresoInvView.nuevo}">
                                </p:commandButton>
                                <p:spacer width="10" />
                                <p:commandButton value="Cerrar"
                                                 onclick="PF('dlgOrdenElectronico').hide()"
                                                 actionListener="#{procesoIngresoInvView.limpiarVariableOrdenCatalogoElec()}"
                                                 process="@this">

                                </p:commandButton>
                            </center>
                        </p:outputPanel>

                    </div>
                </div>
            </h:form>
        </p:dialog>
        <p:dialog header="#{procesoIngresoInvView.condContrato eq true ? 'Formulario Datos Oficio' : 'Formulario Datos oficio de Donación'}"
                  widgetVar="dlgOficio"
                  modal="true"
                  resizable="false"
                  showEffect="fade"
                  hideEffect="fade"    
                  id="dlgOficios">
            <h:form prependId="false" id="frmOficio">
                <p:growl id="msgs1" showDetail="true"/>
                <div class="ui-g">
                    <div class="ui-g-12"> 
                        <p:outputPanel id="outPanelOficio" style="width: 100%">   
                            <p:fieldset legend="DATOS" style="margin-bottom:40px; font-weight: bold" id="datosOficioCambios">
                                <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <p:panelGrid columns="1" >
                                        <p:outputLabel value="#{procesoIngresoInvView.condContrato eq true ? 'Número de Oficio':'Número de Oficio Donación'}" for="numOficio" style="width: 100%;"/>
                                        <p:inputText  id="numOficio" style="text-transform: uppercase" 
                                                      value="#{procesoIngresoInvView.oficio.numeroOficio}" class="panelInput" readonly="false" >
                                        </p:inputText>
                                    </p:panelGrid>

                                    <p:panelGrid  columns="1"  >
                                        <p:outputLabel value="#{procesoIngresoInvView.condContrato eq true ? 'Fecha Oficio':'Fecha Oficio Donación'}" style="width: 100%;"></p:outputLabel>
                                        <p:calendar id="fecOficio" pattern="dd-MM-yyyy" mask="true" required="true" 
                                                    value="#{procesoIngresoInvView.oficio.fechaOficio}"/>
                                    </p:panelGrid>
                                </p:panelGrid>
                            </p:fieldset>

                            <p:fieldset legend="PROVEEDOR" style="margin-bottom:40px; font-weight: bold" id="datosProvOficioCambios" rendered="#{procesoIngresoInvView.condContrato}">
                                <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <p:panelGrid columns="2">
                                        <p:outputLabel value="IDENTIFICACIÓN" style="width: 100%" />
                                        <div class="ui-inputgroup">
                                            <p:inputText id="identifica3" 
                                                         class="panelInput" value="#{procesoIngresoInvView.proveedor.cliente.identificacion}" 
                                                         maxlength="13" style=" width: 120px" required="true"/>  
                                            <p:commandButton 
                                                title="Buscar Proveedor" 
                                                icon="fa fa-search"
                                                id="btnProveedorCambiosOficio"
                                                styleClass="green-button button-group"
                                                actionListener="#{procesoIngresoInvView.buscarProveedor()}"
                                                process="@this, identifica3" update="datosProvOficioCambios">
                                                <p:ajax event="dialogReturn" listener="#{procesoIngresoInvView.selectDatos}" update="identifica3, datoRazon2"/>
                                            </p:commandButton>
                                        </div>
                                    </p:panelGrid>
                                </p:panelGrid>
                                <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid"  styleClass="ui-panelgrid-blank form-group" id="datoRazon2" >
                                    <p:panelGrid columns="1">
                                        <p:outputLabel value="Razón social" for="razonCambioOficio" style="width: 100%;"/>
                                        <p:inputText  value="#{procesoIngresoInvView.proveedor.cliente.nombre}"
                                                      id="razonCambioOficio" style="text-transform: uppercase" 
                                                      class="panelInput" readonly="true">
                                        </p:inputText>
                                    </p:panelGrid>
                                    <p:panelGrid columns="1">
                                        <p:outputLabel value="Nombre Comercial" for="nombreComCambioOficio" style="width: 100%;"/>
                                        <p:inputText  value="#{procesoIngresoInvView.proveedor.cliente.apellido}"
                                                      id="nombreComCambioOficio" style="text-transform: uppercase" 
                                                      class="panelInput" readonly="true">
                                        </p:inputText>
                                    </p:panelGrid> 
                                </p:panelGrid>

                            </p:fieldset>


                            <center>
                                <p:spacer width="10" />
                                <p:commandButton value="Guardar"
                                                 icon="fa fa-save"
                                                 actionListener="#{procesoIngresoInvView.guardarOficio()}"
                                                 process="@form" update="frmMain:dtOficio"
                                                 rendered="#{procesoIngresoInvView.nuevo}">
                                </p:commandButton>
                                <p:spacer width="10" />
                                <p:commandButton value="Editar"
                                                 actionListener="#{procesoIngresoInvView.editarOficio()}"
                                                 icon="fa fa-edit"
                                                 process="@form" update="frmMain:dtOficio"
                                                 rendered="#{!procesoIngresoInvView.nuevo}">
                                </p:commandButton>
                                <p:spacer width="10" />
                                <p:commandButton value="Cerrar"
                                                 onclick="PF('dlgOficio').hide()"
                                                 actionListener="#{procesoIngresoInvView.limpiarVariableOficio()}"
                                                 process="@this">

                                </p:commandButton>
                            </center>
                        </p:outputPanel>

                    </div>
                </div>
            </h:form>
        </p:dialog>
        <p:dialog header="Formulario Datos de Factura"
                  widgetVar="dlgFactura"
                  modal="true"
                  resizable="false"
                  showEffect="fade"
                  hideEffect="fade"
                  id="dlgFacturas">
            <h:form prependId="false" id="frmFactura">
                <p:growl id="msgss" showDetail="true"/>
                <div class="ui-g">
                    <div class="ui-g-12"> 
                        <p:outputPanel id="outPanelfactura" style="width: 100%">   
                            <p:fieldset legend="DATOS" style="margin-bottom:40px; font-weight: bold" id="datosFacturaCambios">
                                <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                    <p:panelGrid columns="1" >
                                        <p:outputLabel value="Número Factura" for="numFacturaCambio" style="width: 100%;"/>
                                        <p:inputMask mask="999-999-999999999" id="numFacturaCambio" placeholder="999-999-999999999"
                                                     value="#{procesoIngresoInvSinProView.factura.numFactura}"/>
                                    </p:panelGrid>

                                    <p:panelGrid  columns="1"  >
                                        <p:outputLabel value="Fecha Emisión" style="width: 100%;"></p:outputLabel>
                                        <p:calendar id="fecFactura" pattern="dd-MM-yyyy" mask="true" required="true" 
                                                    value="#{procesoIngresoInvView.factura.fechaFactura}"/>
                                    </p:panelGrid>
                                    <p:panelGrid  columns="1"  >
                                        <p:outputLabel value="Fecha Caducidad" style="width: 100%;"></p:outputLabel>
                                        <p:calendar id="fecFacturaCad" pattern="dd-MM-yyyy" mask="true" required="true" 
                                                    value="#{procesoIngresoInvView.factura.fechaCaducidad}"/>
                                    </p:panelGrid>
                                    <p:panelGrid columns="1" >
                                        <p:outputLabel value="Número Autorización" for="numAut" style="width: 100%;"/>
                                        <p:inputText  id="numAut" style="text-transform: uppercase" 
                                                      value="#{procesoIngresoInvView.factura.numAutorizacion}" class="panelInput">
                                        </p:inputText>
                                    </p:panelGrid>

                                </p:panelGrid>
                            </p:fieldset>

                            <!--                                                        <p:fieldset legend="PROVEEDOR" style="margin-bottom:40px; font-weight: bold" id="datosProvCambios">
                                                                                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid" styleClass="ui-panelgrid-blank form-group">
                                                                                            <p:panelGrid columns="2">
                                                                                                <p:outputLabel value="IDENTIFICACION" style="width: 100%" />
                                                                                                <div class="ui-inputgroup">
                                                                                                    <p:inputText id="identifica2" 
                                                                                                                 class="panelInput" value="#{procesoIngresoInvView.proveedor.cliente.identificacion}" 
                                                                                                                 maxlength="13" style=" width: 120px" required="true"/>  
                                                                                                    <p:commandButton 
                                                                                                        title="Buscar Proveedor" 
                                                                                                        icon="fa fa-search"
                                                                                                        id="btnProveedorCambios"
                                                                                                        styleClass="green-button button-group"
                                                                                                        actionListener="#{procesoIngresoInvView.buscarProveedor()}"
                                                                                                        process="@this, identifica2" update="datosProvCambios">
                                                                                                        <p:ajax event="dialogReturn" listener="#{procesoIngresoInvView.selectDatos}" update="identifica2, datoRazon"/>
                                                                                                    </p:commandButton>
                                                                                                </div>
                                                                                            </p:panelGrid>
                                                                                        </p:panelGrid>
                                                                                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6" layout="grid"  styleClass="ui-panelgrid-blank form-group" id="datoRazon" >
                                                                                            <p:panelGrid columns="1">
                                                                                                <p:outputLabel value="Razon social" for="razonCambio" style="width: 100%;"/>
                                                                                                <p:inputText  value="#{procesoIngresoInvView.proveedor.cliente.nombre}"
                                                                                                              id="razonCambio" style="text-transform: uppercase" 
                                                                                                              class="panelInput" readonly="true">
                                                                                                </p:inputText>
                                                                                            </p:panelGrid>
                                                                                            <p:panelGrid columns="1">
                                                                                                <p:outputLabel value="Nombre Comercial" for="nombreComCambio" style="width: 100%;"/>
                                                                                                <p:inputText  value="#{procesoIngresoInvView.proveedor.cliente.apellido}"
                                                                                                              id="nombreComCambio" style="text-transform: uppercase" 
                                                                                                              class="panelInput" readonly="true">
                                                                                                </p:inputText>
                                                                                            </p:panelGrid> 
                                                                                        </p:panelGrid>
                                                        
                                                                                    </p:fieldset>-->


                            <center>
                                <p:spacer width="10" />
                                <p:commandButton value="Guardar"
                                                 icon="fa fa-save"
                                                 actionListener="#{procesoIngresoInvView.guardarFactura()}"
                                                 process="@form" update="frmMain:dtFactura"
                                                 rendered="#{procesoIngresoInvView.nuevo}">
                                </p:commandButton>
                                <p:spacer width="10" />
                                <p:commandButton value="Editar"
                                                 actionListener="#{procesoIngresoInvView.editarFactura()}"
                                                 icon="fa fa-edit"
                                                 process="@form" update="frmMain:dtFactura"
                                                 rendered="#{!procesoIngresoInvView.nuevo}">
                                </p:commandButton>
                                <p:spacer width="10" />
                                <p:commandButton value="Cerrar"
                                                 onclick="PF('dlgFactura').hide()"
                                                 actionListener="#{procesoIngresoInvView.limpiarVariableFactura()}"
                                                 process="@this">

                                </p:commandButton>
                            </center>
                        </p:outputPanel>

                    </div>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog header="DATOS DE ADQUISICION"
                  widgetVar="dlgAdquisiciones"
                  modal="true" width="80%"
                  resizable="false"
                  showEffect="fade"
                  hideEffect="fade"
                  id="dlgAdquisiciones">
            <h:form  id="frmDlgAdquisicion" prependId="false">

                <p:commandButton value="Mostrar Todo"
                                 icon="fa fa-eye"
                                 process="@this"
                                 actionListener="#{procesoIngresoInvView.mostrarTodasAdquisiciones()}"
                                 update="dtAdquisiciones"
                                 style="float: right; width: 170px">
                </p:commandButton>
                <br/>
                <br/>
                <br/>
                <p:dataTable id="dtAdquisiciones" var="ord" reflow="true"  paginator="true" 
                             rows="5" rowsPerPageTemplate="10,50,100" 
                             paginatorPosition="bottom" currentPageReportTemplate="Mostrando {startRecord}-{endRecord} de {totalRecords}"
                             filterEvent="keyup" value="#{procesoIngresoInvView.listaAdaqui}"
                             emptyMessage="No se encontró ningun orden de compra en el sistema.">
                    <f:facet name="header">
                        LISTA DE ORDEN DE ADQUISICIÓN
                    </f:facet>
                    <p:column headerText="N° Proceso" style="width: 10%;  font-size: 15px;">
                        <h:outputText value="#{ord.idProceso}" />
                    </p:column>
                    <p:column headerText="Tipo de Proceso" style="width: 10%;  font-size: 15px;" >
                        <h:outputText  value="#{ord.tipoProceso}"/>
                    </p:column>
                    <p:column headerText="N° Contrato" style="width: 10%;  font-size: 15px;" >
                        <h:outputText  value="#{ord.numeroContrato}"/>
                    </p:column>
                    <p:column headerText="Fecha Contrato" style="width: 10%;  font-size: 15px;" >
                        <h:outputText  value="#{ord.fechaContrato}"/>
                    </p:column>
                    <p:column headerText="Monto" style="width: 10%; font-size: 15px;" >
                        <h:outputText  value="#{ord.valorContratado}">
                            <f:convertNumber type="currency" currencySymbol="$" currencyCode="USD" locale="es_EC"/>
                        </h:outputText>
                    </p:column>
                    <p:column headerText="Descripción" style="width: 10%;  font-size: 15px;" >
                        <h:outputText  value="#{ord.descripcion}"/>
                    </p:column>
                    <p:column headerText="Acciones" style="text-align: center; width: 8%">

                        <p:commandLink value="Seleccionar" title="Seleccionar" actionListener="#{procesoIngresoInvView.closeSelectAdquisicion(ord)}" process="@this" update="frmMain:dtOrden"/>
                    </p:column>
                </p:dataTable>

            </h:form>
        </p:dialog>


    </ui:define>
</ui:composition>
