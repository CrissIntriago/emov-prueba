<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../../WEB-INF/template/template.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:define name="title">
        Registro de Efectivo de Dinero
    </ui:define>
    <ui:param name="tittle" value="Registro de efectivo de Dinero"/>
    <ui:define name="content">
        <h:form id="mainForm" >
            <p:panelGrid  id="panelRegistroDinero" columns="2" styleClass="ui-panelgrid-blank"
                          columnClasses="ui-grid-col-4,ui-grid-col-8" >
                <p:fieldset legend="Formulario de Registro">
                    <p:panelGrid columns="1" id="panelBilletes" >
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="billete100" value="Billetetes de $100" />
                            <p:inputText id="billete100" value="#{registroEfectivoMB.efectivoDinero.billete100}" 
                                         onkeypress="focusNextOnEnter(event, 'billete50-input')" class="panelInput" >
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="billete50-input" value="Billetetes de $50" />
                            <p:inputText id="billete50-input" value="#{registroEfectivoMB.efectivoDinero.billete50}"
                                         onkeypress="focusNextOnEnter(event, 'billete20-input')" class="panelInput" >
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="billete20-input" value="Billetetes de $20"/>
                            <p:inputText id="billete20-input" value="#{registroEfectivoMB.efectivoDinero.billete20}"
                                         onkeypress="focusNextOnEnter(event, 'billete10-input')">
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="billete10-input" value="Billetetes de $10"/>
                            <p:inputText id="billete10-input" value="#{registroEfectivoMB.efectivoDinero.billete10}"
                                         onkeypress="focusNextOnEnter(event, 'billete5-input')">
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="@next" value="Billetetes de $5"/>
                            <p:inputText id="billete5" value="#{registroEfectivoMB.efectivoDinero.billete5}"
                                         onkeypress="focusNextOnEnter(event, 'billeteMoneda')">
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="@next" value="Billetetes de $1"/>
                            <p:inputText id="billeteMoneda1" value="#{registroEfectivoMB.efectivoDinero.billeteMoneda1}"
                                         onkeypress="focusNextOnEnter(event, 'monedaDolar')">
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="@next" value="Monedas de $1"/>
                            <p:inputText id="monedaDolar" value="#{registroEfectivoMB.efectivoDinero.monedaDolar}"
                                         onkeypress="focusNextOnEnter(event, 'moneda50')">
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="@next" value="monedas de $0.50"/>
                            <p:inputText id="moneda50" value="#{registroEfectivoMB.efectivoDinero.moneda50}"
                                         onkeypress="focusNextOnEnter(event, 'moneda25')">
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="@next" value="monedas de $0.25"/>
                            <p:inputText id="moneda25" value="#{registroEfectivoMB.efectivoDinero.moneda25}"
                                         onkeypress="focusNextOnEnter(event, 'moneda10')">
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="@next" value="monedas de $0.10"/>
                            <p:inputText id="moneda10" value="#{registroEfectivoMB.efectivoDinero.moneda10}"
                                         onkeypress="focusNextOnEnter(event, 'moneda5')">
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="@next" value="monedas de $0.05"/>
                            <p:inputText id="moneda5" value="#{registroEfectivoMB.efectivoDinero.moneda5}"
                                         onkeypress="focusNextOnEnter(event, 'moneda1')">
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="@next" value="monedas de $0.01"/>
                            <p:inputText id="moneda1" value="#{registroEfectivoMB.efectivoDinero.moneda1}"
                                         onkeypress="focusNextOnEnter(event, 'totalGenerado')">
                                <p:ajax listener="#{registroEfectivoMB.sumarRegistro()}" update="totalGenerado"/>
                                <p:keyFilter regEx="/[\d]/"/>
                            </p:inputText>
                        </p:panelGrid>
                        <p:panelGrid columns="2" columnClasses="ui-grid-col-6,ui-grid-col-6">
                            <p:outputLabel for="@next" value="Total Generado: " style="font-size: 1.3em;font-weight: bolder;"/>
                            <p:inputText id="totalGenerado" readonly="true" value="#{registroEfectivoMB.totalGenerado}" style="font-size: 1.3em;font-weight: bolder;"/>
                        </p:panelGrid>


                        <p:panelGrid  styleClass="ui-panelgrid-blank form-group" columns="2">
                            <p:panelGrid layout="grid" columns="1">
                                <p:outputLabel value="Fecha de  registro:"/>
                                <p:datePicker id="timeMinMax" value="#{registroEfectivoMB.fechaActual}" showTime="true" pattern="yyyy/MM/dd" readonly="true" />
                            </p:panelGrid>
                            <p:panelGrid layout="grid" columns="1">
                                <p:outputLabel value="(*)Observaciones"/>
                                <p:inputTextarea rows="1" cols="20" value="#{registroEfectivoMB.efectivoDinero.observaciones}"/>
                            </p:panelGrid>
                            <p:commandButton actionListener="#{registroEfectivoMB.limpiar()}" 
                                             icon="fa fa-eraser" value="Limpiar" />
                            <p:commandButton actionListener="#{registroEfectivoMB.saveRegistroEfectivo()}" 
                                             icon="fa fa-floppy-o" value="Registrar" update="mainForm"/>
                        </p:panelGrid>
                    </p:panelGrid>
                </p:fieldset>
                <p:dataTable id="dtregistrosDinero" var="registro" value="#{registroEfectivoMB.registros}" 
                             paginatorPosition="bottom" paginator="true"
                             paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                             emptyMessage="Sin registros" lazy="true" rows="10" 
                             rowsPerPageTemplate="10,50,100">
                    <f:facet name="header">
                        REGISTROS
                    </f:facet>
                    <p:column headerText="Usuario" style="text-align: center">
                        <h:outputText value="#{registro.caja.usuario}"/>
                    </p:column>
                    <p:column headerText="Fecha Registro">
                        <center>
                            <h:outputText  value="#{registro.fechaRegistro}">
                                <f:convertDateTime pattern="dd-MM-yyyy hh:mm" locale="es" />
                            </h:outputText>
                        </center>
                    </p:column>
                    <p:column headerText="Observacion">
                        <center>
                            <h:outputText value="#{registro.observaciones}"/>
                        </center>
                    </p:column>
                    <p:column headerText="Detalle">
                        <center>
                            <p:commandButton icon="fa fa-eye" actionListener="#{registroEfectivoMB.abrirModal(registro)}" />
                            <p:spacer width="10" />
                            <p:commandLink title="Editar" update="mainForm" actionListener="#{registroEfectivoMB.editar(registro)}">
                                <i class="fa fa-edit" style="font-size: 1.5em" />
                            </p:commandLink>
                        </center>

                    </p:column>
                </p:dataTable>
            </p:panelGrid>
        </h:form>
        <p:dialog header="Visualizacion de registros" widgetVar="dlgRegistros" modal="true" resizable="false" style="width: 10%" width="20%" closeOnEscape="true">
            <h:form id="formInteres">
                <div class="ui-g">
                    <div class="ui-g-3">
                        <p:outputLabel  value="Billetes de 100" />
                        <p:inputText   value="#{registroEfectivoMB.registroEfectivo.billete100}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel  value="Billetes de 50" />
                        <p:inputText  value="#{registroEfectivoMB.registroEfectivo.billete50}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel  value="Billetes de 20" />
                        <p:inputText   value="#{registroEfectivoMB.registroEfectivo.billete20}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel  value="Billetes de 10" />
                        <p:inputText   value="#{registroEfectivoMB.registroEfectivo.billete10}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel  value="Billetes de 5" />
                        <p:inputText  value="#{registroEfectivoMB.registroEfectivo.billete5}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel  value="Billetes de 1" />
                        <p:inputText  value="#{registroEfectivoMB.registroEfectivo.billeteMoneda1}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel  value="Monedas de 1" />
                        <p:inputText  value="#{registroEfectivoMB.registroEfectivo.monedaDolar}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel  value="Monedas de 0.50" />
                        <p:inputText   value="#{registroEfectivoMB.registroEfectivo.moneda50}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel  value="Monedas de 0.25" />
                        <p:inputText  value="#{registroEfectivoMB.registroEfectivo.moneda25}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel  value="Monedas de 0.10" />
                        <p:inputText   value="#{registroEfectivoMB.registroEfectivo.moneda10}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">
                        <p:outputLabel  value="Monedas de 0.01" />
                        <p:inputText  value="#{registroEfectivoMB.registroEfectivo.moneda1}" style="width: 100%"  readonly="true"/>
                    </div>
                    <div class="ui-g-3">

                    </div>
                </div>
            </h:form>
        </p:dialog>
    </ui:define>
</ui:composition>