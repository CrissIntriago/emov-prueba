<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="/WEB-INF/template/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:p="http://primefaces.org/ui"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:poue="http://primefaces.org/ui/extensions"
                xmlns:dlg="http://xmlns.jcp.org/jsf/composite/dialog">
    <ui:param name="tittle" value="LIQUIDACIONES GENERALES"/>
    <ui:define name="content">
        <div class="ui-g ui-fluid">
            <div class="ui-g-12">
                <h:form id="mainForm" >
                    <p:tabView id="tvRecaudaciones">
                        <p:ajax event="tabChange" listener="#{liquidacionGenTributarioView.onChangeTab}"/>
                        <p:tab id="cobroGenerales"  title="Cobros Generales">
                            <div style="width:40%; margin:auto;">
                                <dlg:consultaPredioGeneral predio="#{liquidacionGenTributarioView.predio}" id="prediosConsulta"
                                                           consultar="#{liquidacionGenTributarioView.consultar()}"
                                                           tipoCons="#{liquidacionGenTributarioView.tipoCons}"
                                                           consultarModel="#{liquidacionGenTributarioView.validarClaveOtroCanton()}"
                                                           predioModel="#{liquidacionGenTributarioView.predioModel}"                                                      
                                                           tipo="#{liquidacionGenTributarioView.esUrbano}"
                                                           update="prediosConsulta,mainForm"/>
                                
                                
                            </div>
                            



                            <p:panelGrid columns="2" layout="grid" styleClass="ui-panel-grid-blank" 
                                         columnClasses="ui-g-5, ui-g-7">
                                <p:tree value="#{liquidacionGenTributarioView.root2}" var="node"  dynamic="false" 
                                        skipChildren="true" selectionMode="single" 
                                        selection="#{liquidacionGenTributarioView.selectedNode}"
                                        filterBy="#{node.nombreTransaccion}"
                                        style=" width: 100%; font-weight: bold; overflow: auto; font-size: 13px;">
                                    <p:ajax event="select" listener="#{liquidacionGenTributarioView.onNodeSelect}" update="mainForm,mainForm:tvRecaudaciones:dtRubros,mainForm:tvRecaudaciones:dtDetalle"/>
                                    <p:treeNode>
                                        <h:outputText value="#{node.id}-#{node.nombreTransaccion}"/>
                                    </p:treeNode>
                                </p:tree>

                                <p:panelGrid columns="1" styleClass="ui-panelgrid-blank form-group">
                                    <p:dataTable id="dtRubros" var="rubro"
                                                 value="#{liquidacionGenTributarioView.cobrosGenerales.tipoLiquidacion.renRubrosLiquidacionCollection}"
                                                 selectionMode="single" rendered="#{userSession.userId ne 110}"
                                                 selection="#{liquidacionGenTributarioView.rubroSelect}" rowKey="#{rubro.id}"
                                                 style="text-align: center;" emptyMessage="Item no posee rubros."
                                                 scrollable="true" scrollHeight="100">
                                        <f:facet name="header">RUBROS POR TITULOS</f:facet>
                                        <p:ajax event="rowSelect" listener="#{liquidacionGenTributarioView.onRowSelect()}" />
                                        <p:column headerText="Id" width="5%"> #{rubro.id} </p:column>
                                        <p:column headerText="Descripcion" width="85%" style="text-align: left; font-weight: bold;">#{rubro.descripcion} </p:column>

                                        <p:column headerText="Valor" width="10%"> #{rubro.valor} </p:column>
                                    </p:dataTable>
                                    <p:fieldset id="panelDetalle" legend="DETALLE DE TRANSACCION" style=" height: 200px;" 
                                                rendered="#{userSession.userId ne 110}">
                                        <p:dataTable id="dtDetalle" var="det" value="#{liquidacionGenTributarioView.rubrosSeleccionado}" scrollable="true"
                                                     scrollHeight="100" style="text-align: center;" editable="true" editMode="cell"
                                                     rowIndexVar="index" emptyMessage="Sin elementos seleccionados...">
                                            <p:column headerText="Seleccionar" width="10%">

                                                <center>     
                                                    <p:selectBooleanCheckbox value="#{det.cobrar}">
                                                        <p:ajax listener="#{liquidacionGenTributarioView.editarDetallePago(det, index)}" update="mainForm:tvRecaudaciones:dtDetalle,mainForm:tvRecaudaciones:panelDetalle"/>
                                                    </p:selectBooleanCheckbox>
                                                </center>

                                            </p:column>
                                            <p:column headerText="Descripcion" width="60%" style="text-align: left;"> #{det.descripcion} </p:column>
                                            <p:column headerText="Cantidad" width="10%"><p:outputLabel value="#{det.cantidad}" /></p:column>
                                            <p:column headerText="Valor" width="10%">
                                                <p:cellEditor>
                                                    <f:facet name="input">
                                                        <p:inputNumber value="#{det.valor}">
                                                            <p:ajax event="change" listener="#{liquidacionGenTributarioView.editarDetallePago(det,index)}" update="mainForm:tvRecaudaciones:dtDetalle,mainForm:tvRecaudaciones:panelDetalle" />
                                                        </p:inputNumber>
                                                    </f:facet>
                                                    <f:facet name="output">
                                                        <h:outputText value="#{det.valor}">                                                    
                                                            <f:convertNumber pattern="#0.00" locale="pt_BR"/>
                                                        </h:outputText>
                                                    </f:facet>
                                                </p:cellEditor>
                                            </p:column>
                                            <p:column headerText="Total" width="10%"><h:outputText value="#{det.valorTotal}">
                                                    <f:convertNumber pattern="#0.00" locale="pt_BR"/>
                                                </h:outputText>
                                            </p:column>
                                            <p:column headerText="Accion" width="10%">
                                                <p:commandLink title="Eliminar" update="dtDetalle" actionListener="#{liquidacionGenTributarioView.deleteRubrosDetalle(index)}">
                                                    <i class="fa fa-fw fa-remove" style="color: red; font-size: 1.5em"></i>
                                                </p:commandLink>
                                            </p:column>
                                        </p:dataTable>
                                        
                                        
                                        
                                        <br></br>
                                        <h:panelGrid columns="2" styleClass="noBorder" style="margin: 0 auto;">
                                            <p:outputLabel value="Valor Total: $" style="font-weight: bold; font-size: 14px;"/>
                                            <p:inputText value="#{liquidacionGenTributarioView.cobrosGenerales.totalPago}" readonly="true" style="font-weight: bold; font-size: 14px;"/>
                                        </h:panelGrid>
                                        
                                        
                                        
                                        
                                    </p:fieldset>
                                    
                                    <p:fieldset>
                                       <h:panelGrid id="inputConsultaSaldo" columns="4" styleClass="noBorder" style="margin: 0 auto;" 
                                                     rendered="#{liquidacionGenTributarioView.cobrosGenerales.tipoLiquidacion.prefijo eq 'TER'}">
                        
                                            <p:outputLabel value="Numero de comprobante:" style="font-weight: bolder;" />
                                             <p:inputText readonly="false" value="#{liquidacionGenTributarioView.numLiquiSaldo}">
                                             <p:ajax event="select" listener="#{liquidacionGenTributarioView.selectintp()}"/>
                                             </p:inputText>
                                             <p:outputLabel value=" VALOR DE SALDO A FAVOR:" style="font-weight: bolder;" />  
                                            <p:inputText readonly="true" id="avaluo_rubro" value="#{liquidacionGenTributarioView.saldoLiqui}" >
                                               
<!--                                                rendered="#{!liquidacionGenTributarioView.renderAlcabalaSolicitante(titulo)}"-->
                                                  
                                                 
                                            </p:inputText>
                                            
                                           
                                           
                                       
                                            
                                         </h:panelGrid>
                                        
                                      
                                         
                                      
                                        <p:panelGrid  columns="2" styleClass="noBorder" style="margin: 0 auto;" 
                                                     rendered="#{liquidacionGenTributarioView.cobrosGenerales.tipoLiquidacion.prefijo eq 'TER'}">
                                            <p:commandButton value="BUSCAR SALDO" style="font-size: 12px; width: auto;" 
                                                             icon="ui-icon-search" actionListener="#{liquidacionGenTributarioView.llenarSaldo()}"
                                                                     update="mainForm"/>
                                            
                                            <p:commandButton value="APLICAR SALDO" style="font-size: 12px; width: auto;" icon="ui-icon-search" actionListener="#{liquidacionGenTributarioView.setearSaldo()}" rendered="#{liquidacionGenTributarioView.descuentoSaldo}"
                                                                     update="mainForm,formListaLlenarCampos"/>
                                            
                                            
                                            
                                              <br/><br/>   
                                            <h:form id="formListaLlenarCampos">
                                                <p:dataTable id="listaLlenarCampos" var="liqui" value="#{liquidacionGenTributarioView.listaLlenarCampos}">

                                                        <p:column headerText="Numero de liquidacion">
                                                            <h:outputText value="#{liqui.idLiquidacion}" />
                                                        </p:column>
                                                        <p:column headerText="Contribuyente">
                                                            <h:outputText value="#{liqui.nombreComprador}" />
                                                        </p:column>
                                                        <p:column headerText="Año">
                                                            <h:outputText value="#{liqui.anio}" />                                                        </p:column>
                                                            <p:column headerText="Valor">
                                                                <h:outputText value="#{liqui.totalPago}" />
                                                        </p:column>

                                                </p:dataTable>  
                                           </h:form>
                                        </p:panelGrid>
                                    </p:fieldset>
                                    
                                    <p:fieldset id="panelInfoAdc" legend="INFORMACION ADICIONAL" style=" height: 280px;" >
                                        <p:panelGrid columns="2" style="width: 100%;"  
                                                     styleClass="ui-panelgrid-blank form-group">
                                            <p:panelGrid columns="1" layout="grid" >
                                                <h:panelGroup>
                                                    <div class="ui-g-12 ui-md-6">
                                                        <div class="ui-inputgroup">
                                                            <p:inputText value="#{liquidacionGenTributarioView.ciRucCobros}" 
                                                                         placeholder="No. Identificacion"  style="width: auto;" maxlength="10">
                                                                <p:ajax listener="#{liquidacionGenTributarioView.buscarEnte()}" process="@this" 
                                                                        update="mainForm:tvRecaudaciones:panelInfoAdc" />
                                                            </p:inputText>
                                                            <p:commandButton styleClass="btnStyle" style="border-radius: 0px 5px 5px 0px;"
                                                                             icon="ui-icon-search" 
                                                                             actionListener="#{liquidacionGenTributarioView.showDlgEntes(1)}" 
                                                                             update="panelInfoAdc"/>
                                                        </div>
                                                    </div>
                                                </h:panelGroup>
                                                <p:inputText value="#{liquidacionGenTributarioView.cobrosGenerales.comprador.apellido}"  readonly="true" size="30" 
                                                             placeholder="Apellidos" 
                                                             onkeydown="this.value = this.value.toUpperCase();" />

                                                <p:inputText value="#{liquidacionGenTributarioView.cobrosGenerales.comprador.nombre}" size="30" 
                                                             readonly="true"
                                                             placeholder="Nombres" 
                                                             onkeydown="this.value = this.value.toUpperCase();" />

                                                <p:inputText value="#{liquidacionGenTributarioView.cobrosGenerales.comprador.razonSocial}" size="30" 
                                                             readonly="true"
                                                             placeholder="Razon Social" 
                                                             onkeydown="this.value = this.value.toUpperCase();" />

                                                <p:inputText value="#{liquidacionGenTributarioView.cobrosGenerales.comprador.nombreComercial}" size="30"  
                                                             readonly="true"
                                                             placeholder="Nombre Comercial" 
                                                             onkeydown="this.value = this.value.toUpperCase();" />

                                                <p:inputText value="#{liquidacionGenTributarioView.cobrosGenerales.comprador.email}" size="30"  readonly="true"
                                                             placeholder="Email"/>

                                                <p:column>

                                                    <p:commandButton value="Limpiar" style="font-size: 12px; width: auto;" icon="ui-icon-refresh" actionListener="#{liquidacionGenTributarioView.limpiarDatosContribuyente()}"
                                                                     update="panelInfoAdc"/>
                                                    <!--NUEVO, ENRIQUE-->
                                                    <p:spacer width="10" />
                                                    <p:commandButton value="Actualizar Datos" styleClass="btnStyle" 
                                                                     style="font-size: 12px; width: auto;" 
                                                                     icon="ui-icon-pencil"
                                                                     oncomplete="PF('dlgEditSolicitante').show()"
                                                                     update="dlgEditSolicitante, formEditSolicitante"/>
                                                    <p:spacer width="10" />
                                                </p:column>
                                            </p:panelGrid>
                                            <h:panelGroup>
                                                <p:row>
                                                    <p:column colspan="4">
                                                        <p:outputLabel value="Observacion: " style="font-weight: bold; font-size: 14px;"/>
                                                        <p:inputTextarea value="#{liquidacionGenTributarioView.cobrosGenerales.observacion}" rows="3" style="width: 100%; font-size: 14px; font-weight: bold;"/>
                                                    </p:column>
                                                </p:row>
                                                <!--AGREGADO-->
                                                <p:row>
                                                    <p:column colspan="4">
                                                        <p:outputLabel value="Ubicación: " style="font-weight: bold; font-size: 14px;"/>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column colspan="4">
                                                        <p:inputTextarea value="#{liquidacionGenTributarioView.cobrosGenerales.ubicacion}" rows="1" 
                                                                         style="width: 100%; font-size: 14px; font-weight: bold;"/>
                                                    </p:column>
                                                </p:row>

                                                <p:row>

                                                    <center>
                                                        <br></br>
                                                        <p:commandButton value="Ingresar" styleClass="btnStyle" icon="ui-icon-circle-arrow-e"
                                                                         process="@form" 
                                                                         style="font-size: 13px; width: auto;" 
                                                                         actionListener="#{liquidacionGenTributarioView.seleccionarLiquidacion()}"/>
                                                    </center>

                                                </p:row>
                                            </h:panelGroup>
                                        </p:panelGrid>
                                    </p:fieldset>
                                </p:panelGrid>
                            </p:panelGrid>
                        </p:tab>

                        <p:tab id="tituloCredito" title="Titulos de Credito">
                            <p:dataTable id="dtLiquidaciones" reflow="true" paginator="true" lazy="true" rows="10" rowsPerPageTemplate="10,50,100" paginatorPosition="top"
                                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         value="#{liquidacionGenTributarioView.titulosCredito}" var="titulo" emptyMessage="No se encontraron elementos..." style="text-align: center;"
                                         selectionMode="single" rowKey="#{titulo.id}" selection="#{liquidacionGenTributarioView.liquidacion}" filterEvent="enter">
                                <p:ajax event="rowSelect" update="mainForm:tvRecaudaciones:opLiquidacionesEmitidas"/>
                                <p:column  headerText="ID Liquidación" width="50" filterBy="#{titulo.idLiquidacion}" filterStyle="width: 60%;">
                                    <h:outputText value="#{titulo.idLiquidacion}" />
                                </p:column>
                                <p:column  headerText="Liquidacion" width="200" filterBy="#{titulo.tipoLiquidacion.nombreTitulo}" filterMatchMode="contains" >
                                    <h:outputText value="#{titulo.tipoLiquidacion.nombreTitulo}" />
                                </p:column>
                                <p:column headerText="No. Liq." width="70" filterBy="#{titulo.numLiquidacion}" sortBy="#{titulo.numLiquidacion}" filterStyle="width: 80%;">
                                    <h:outputText value="#{titulo.numLiquidacion}" />
                                </p:column>
                                <p:column headerText="Anio" width="50" filterBy="#{titulo.anio}" sortBy="#{titulo.anio}" filterStyle="width: 60%;">
                                    <h:outputText value="#{titulo.anio}"/>
                                </p:column>
                                <p:column headerText="Predio" width="200" filterBy="#{titulo.predio.claveCat}" filterMatchMode="contains">
                                    <h:outputText value="#{titulo.predio.claveCat}" />
                                </p:column>
                                <p:column headerText="Local" width="200" filterBy="#{titulo.localComercial.numLocal}">
                                    <h:outputText value="#{titulo.localComercial.numLocal}" />
                                </p:column>
                                <p:column headerText="Validador" width="100" >
                                    <h:outputText value="#{titulo.usuarioValida eq null or titulo.usuarioValida eq ''?titulo.liquidadorResponsable:titulo.usuarioValida}" />
                                </p:column>
                                <p:column headerText="Fecha emision" width="200" >
                                    <h:outputText value="#{titulo.fechaIngreso}" >
                                        <f:convertDateTime type="date" pattern="dd-MM-yyyy HH:mm"/>
                                    </h:outputText>
                                </p:column>
                                <p:column  headerText="Identificacion" width="100" filterBy="#{titulo.comprador.identificacionCompleta}" filterStyle="width: 80%;">
                                   
                                    <h:outputText  value="#{titulo.comprador.identificacionCompleta}" />
                                </p:column>
                                <p:column headerText="Solicitante" width="250" filterBy="#{titulo.comprador.nombreCompleto}" filterMatchMode="contains">
                               
                                    <h:outputText  value="#{titulo.comprador.nombreCompleto}"/>
                                </p:column>

                                <p:column headerText="Valor Emitido" width="60"><h:outputText value="#{titulo.totalPago}" style="font-weight: bold;"/></p:column>
<!--                                <p:column headerText="Saldo" width="60"><h:outputText value="#{titulo.saldo}" style="font-weight: bold;"/></p:column>
                                <p:column headerText="Interes" width="60"><h:outputText value="#{liquidacionGenTributarioView.interes(titulo)}" style="font-weight: bold;"/></p:column>
                                <p:column headerText="Total Pago" width="60"><h:outputText value="#{titulo.totalPago+liquidacionGenTributarioView.interes(titulo)}" style="font-weight: bold;"/></p:column>-->
                                <p:column headerText="Estado" width="65"><h:outputText value="#{ !titulo.validada ? 'Sin validar' : titulo.estadoLiquidacion.descripcion}" style="font-weight: bold;"/></p:column>
                                <p:column headerText="*******" width="50" >
                                    <p:commandLink actionListener="#{liquidacionGenTributarioView.imprimir(titulo)}" 
                                                   title="#{titulo.idLiquidacion}" process="@this">                                   
                                        <i class="fa fa-fw fa-print" style="font-size: 1.5em;" />
                                    </p:commandLink>
                                    
                                                                                                 
                                    
                                </p:column>
                            </p:dataTable>
                            <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                                <p:commandButton value="SI" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                                <p:commandButton value="NO" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                            </p:confirmDialog>
                            <p:contextMenu id="opLiquidacionesEmitidas" for="dtLiquidaciones">
                                <p:menuitem value="Detalle" icon="ui-icon-comment" oncomplete="PF('dlgDetalle').show();" update="formDetEmision"  process="@this" actionListener="#{liquidacionGenTributarioView.calculosAdicionales()}"/>
                            </p:contextMenu>

                        </p:tab>
                        <p:tab id="tituloCreditoPagado" title="Titulos de Creditos - Pagados">
                            <p:dataTable id="dtLiquidacionesPagadas" reflow="true" paginator="true" lazy="true" rows="10" rowsPerPageTemplate="10,50,100" paginatorPosition="top"
                                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {CurrentPageReport} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                         value="#{liquidacionGenTributarioView.titulosCreditoPagado}" var="tituloPagado" emptyMessage="No se encontraron elementos..." style="text-align: center;"
                                         selectionMode="single" rowKey="#{tituloPagado.id}" selection="#{liquidacionGenTributarioView.liquidacion}" filterEvent="enter">
                                <p:ajax event="rowSelect" update="mainForm:tvRecaudaciones:opLiquidacionesPagadas"/>
                                <p:column id="tipoLiquidacionPagada" headerText="Prefijo" width="50" filterBy="#{tituloPagado.tipoLiquidacion.prefijo}" filterStyle="width: 60%;">
                                    <p:outputLabel value="#{tituloPagado.tipoLiquidacion.prefijo}" style="font-weight: bold;"/>
                                </p:column>
                                <p:column headerText="No. Liq." width="70" filterBy="#{tituloPagado.numLiquidacion}" sortBy="#{tituloPagado.numLiquidacion}" filterStyle="width: 80%;">
                                    <p:outputLabel value="#{tituloPagado.numLiquidacion}" style="font-weight: bold;"/>
                                </p:column>
                                <p:column headerText="No. Comprobante" width="100" filterBy="#{tituloPagado.numComprobante}" filterStyle="width: 80%;">
                                    <p:outputLabel value="#{tituloPagado.numComprobante}" style="font-weight: bold;"/>
                                </p:column>

                                <p:column headerText="Anio" width="50" filterBy="#{tituloPagado.anio}" sortBy="#{tituloPagado.anio}" filterStyle="width: 60%;">
                                    <p:outputLabel value="#{tituloPagado.anio}" style="font-weight: bold;"/>
                                </p:column>
                                <p:column headerText="Predio" width="200" >
                                    <h:outputText value="#{tituloPagado.predio == null ? tituloPagado.localComercial.clavePreial:tituloPagado.predio.claveCat }" />
                                </p:column>
                                <p:column headerText="Local" width="200" filterBy="#{tituloPagado.localComercial.numLocal}">
                                    <h:outputText value="#{tituloPagado.localComercial.numLocal}" />
                                </p:column>
                                <p:column id="identificacionPagada" headerText="Identificacion" width="120" filterBy="#{tituloPagado.comprador.identificacionCompleta}" filterStyle="width: 80%;">
                                    <p:outputLabel style="font-weight: bold; font-size: 13px;" value="#{tituloPagado.comprador.identificacionCompleta}"/>
                                </p:column>
                                <p:column headerText="Solicitante" width="300">
                                    #{tituloPagado.comprador ne null?tituloPagado.comprador.nombreCompleto:tituloPagado.nombreComprador}
                                </p:column>
                                <p:column headerText="Valor" width="75"><p:outputLabel value="#{tituloPagado.totalPago}" style="font-weight: bold;"/></p:column>
                                <p:column headerText="Saldo" width="75"><p:outputLabel value="#{tituloPagado.saldo}" style="font-weight: bold;"/></p:column>
                                <p:column headerText="Estado" width="75"><p:outputLabel value="#{tituloPagado.estadoLiquidacion.descripcion}" style="font-weight: bold;"/></p:column>

                                <!--AGREGADO-->
                                <p:column headerText="Imprimir" width="65" style="text-align: center;">
                                    <p:commandLink actionListener="#{liquidacionGenTributarioView.imprimir(tituloPagado)}" process="@this"
                                                   title="#{titulo.idLiquidacion}"  >
                                        <i class="fa fa-fw fa-print" style="font-size: 1.5em;" />
                                    </p:commandLink>
                                </p:column>
                            </p:dataTable>
                            <p:menuitem value="Detalle Pago" oncomplete="PF('dlgDetallePago').show();" update="formDetPago" icon="ui-icon-calculator" rendered="#{liquidacionGenTributarioView.liquidacion ne null}" process="@this"/>
                            <p:contextMenu id="opLiquidacionesPagadas" for="dtLiquidacionesPagadas">
                                <p:menuitem value="Detalle" icon="ui-icon-comment" oncomplete="PF('dlgDetalle').show();" update="formDetEmision" rendered="#{liquidacionGenTributarioView.liquidacion ne null}" process="@this" actionListener="#{liquidacionGenTributarioView.calculosAdicionales()}"/>
                                <!--<p:menuitem value="Detalle Pago" oncomplete="PF('dlgDetallePago').show();" update="formDetPago" icon="ui-icon-calculator" rendered="#{liquidacionGenTributarioView.liquidacion ne null}" process="@this"/>-->
                            </p:contextMenu>
                        </p:tab>
                    </p:tabView>
                    <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
                        <p:commandButton value="Si" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check" />
                        <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
                    </p:confirmDialog>
                </h:form>
            </div>
        </div>


        <!--FORMULARIO EDICION CLIENTE-->
        <p:dialog id="dlgEditSolicitante" header="SOLICITANTE" widgetVar="dlgEditSolicitante" modal="true" showEffect="fold" hideEffect="fade" resizable="false" width="600" height="450">
            <h:form id="formEditSolicitante" prependId="false" style="width: 100%;max-width: 98%;margin: 0 auto;display: flex;flex-direction: column;justify-content: center;align-items: center;">
                <p:panelGrid columns="1" style="width: 90%;align-items: center; margin-top: 20px;">
                    <h:panelGroup style="">
                        <p:outputLabel value="Identificación: " for="@next" style="font-weight: bold;"/>
                        <p:inputText placeholder="Ingrese Número de Identificación" required="false" requiredMessage="REQUERIDO"
                                     style="width: 100%" value="#{liquidacionGenTributarioView.ente2.identificacion}" onkeyup="javascript:this.value = this.value.toUpperCase();">

                            <p:commandLink title="Buscar" process="@form" actionListener="#{liquidacionGenTributarioView.buscarCliente()}" style="float: right;">
                                <i class="fa fa-search" style="font-size: 1.8em; margin-right: 8px;"></i>
                            </p:commandLink>
                        </p:inputText>

                    </h:panelGroup>
                    <h:panelGroup>
                        <p:outputLabel value="Nombres: " for="@next" style="font-weight: bold;"/>
                        <p:inputText placeholder="Ingrese los Nombres" required="false" requiredMessage="REQUERIDO"
                                     style="width: 100%" value="#{liquidacionGenTributarioView.ente2.nombre}" onkeyup="javascript:this.value = this.value.toUpperCase();">
                        </p:inputText>
                    </h:panelGroup>
                    <h:panelGroup>
                        <p:outputLabel value="Apellidos: " for="@next" style="font-weight: bold;"/>
                        <p:inputText placeholder="Ingrese los Apellidos" required="false" requiredMessage="REQUERIDO"
                                     style="width: 100%" value="#{liquidacionGenTributarioView.ente2.apellido}" onkeyup="javascript:this.value = this.value.toUpperCase();">
                        </p:inputText>
                    </h:panelGroup>
                    <h:panelGroup>
                        <p:outputLabel value="Dirección: " for="@next" style="font-weight: bold;"/>
                        <p:inputText placeholder="Ingrese la direccion" required="false" requiredMessage="REQUERIDO"
                                     style="width: 100%" value="#{liquidacionGenTributarioView.ente2.direccion}" onkeyup="javascript:this.value = this.value.toUpperCase();">
                        </p:inputText>
                    </h:panelGroup>
                    <h:panelGroup>
                        <p:outputLabel value="Correo: " for="@next" style="font-weight: bold;"/>
                        <p:inputText placeholder="Ingrese el correo electronico" required="false" requiredMessage="REQUERIDO"
                                     style="width: 100%" value="#{liquidacionGenTributarioView.ente2.email}" onkeyup="javascript:this.value = this.value.toUpperCase();">
                        </p:inputText>
                    </h:panelGroup>
                    <h:panelGroup>
                        <p:outputLabel value="Teléfono " for="@next" style="font-weight: bold;"/>
                        <p:inputText placeholder="Ingrese un numero de telefono" required="false" requiredMessage="REQUERIDO"
                                     style="width: 100%" value="#{liquidacionGenTributarioView.ente2.telefono}" onkeyup="javascript:this.value = this.value.toUpperCase();">
                        </p:inputText>
                    </h:panelGroup>
                </p:panelGrid>
                <p:commandButton value="Actualizar Datos" update="mainForm:tvRecaudaciones:panelInfoAdc" icon="ui-icon-plus" style="width: auto; margin-top: 20px; align-self: right"
                                 actionListener="#{liquidacionGenTributarioView.actualizarClienteEnBase(liquidacionGenTributarioView.ente2)}" styleClass="Fs16"
                                 oncomplete="PF('dlgEditSolicitante').hide();" process="@form"/>
            </h:form>
        </p:dialog>


        <p:dialog widgetVar="dlgReportesRecaudador" header="Reportes Recaudador" resizable="false" modal="true" position="center" height="350">
            <h:form id="reporteRecaudaciones">
                <h:outputText value="Fecha cierre: " style="font-weight: bolder;font-size: 14px"/>
                <p:calendar value="#{liquidacionGenTributarioView.fechaCierre}" navigator="true"/>
                <p:panelGrid styleClass="noBorder" columns="1" style="width: 100%;text-align: center">
                    <h:outputText value="#{liquidacionGenTributarioView.tipoReporte eq 1?'Cierre de Caja':liquidacionGenTributarioView.tipoReporte eq 2?'Recaudaciones Por Transaccion': liquidacionGenTributarioView.tipoReporte eq 3?'Resumen Cheques':''}" style="font-weight: bolder;font-size: 14px"/>
                    <h:outputText value="Fecha Reporte: " style="font-weight: bolder;font-size: 14px"/>
                    <p:calendar value="#{liquidacionGenTributarioView.fechaReporte}" mode="inline" />
                    <p:commandButton value="Generar Reporte" icon="ui-icon-print" styleClass="btnStyle" actionListener="#{liquidacionGenTributarioView.generarReporteCajero()}" style="float: end"/>
                </p:panelGrid>
            </h:form>
        </p:dialog>


        <p:dialog header="Detalle Pago" widgetVar="dlgDetallePago" resizable="false" closeOnEscape="true" modal="true" width="80%" position="center">
            <h:form id="formDetPago">
                <p:panelGrid style="width: 100%;">
                    <p:row>
                        <p:column>
                            <p:outputLabel value="N. Liquidacion"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.numLiquidacion}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Tipo de Pago"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.tipoLiquidacion.prefijo} - #{liquidacionGenTributarioView.liquidacion.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Solicitante"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.comprador.identificacion}-#{liquidacionGenTributarioView.liquidacion.comprador.apellido} #{liquidacionGenTributarioView.liquidacion.comprador.nombre} #{liquidacionGenTributarioView.liquidacion.comprador.razonSocial} #{liquidacionGenTributarioView.liquidacion.comprador.nombreComercial}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <center>
                    <p:commandButton value="Aceptar" styleClass="btnStyle" oncomplete="PF('dlgComprobante').hide();" icon="ui-icon-circle-close"/>
                </center>
                <p:outputLabel value="Total a pagar: #{liquidacionGenTributarioView.liquidacion.totalPago}" style="font-size: 14px; font-weight: bold"/>
                <br/>
<!--                <dialog:detallePago liquidacion="#{liquidacionGenTributarioView.liquidacion}"/>-->
                <center><p:commandButton value="Aceptar" oncomplete="PF('dlgDetallePago').hide();" styleClass="btnStyle"/></center>
            </h:form>
        </p:dialog>

        <p:dialog header="Detalle Emision" widgetVar="dlgDetalle" resizable="false" closeOnEscape="true" modal="true" width="80%" position="center" height="400">
            <h:form id="formDetEmision">
                <dlg:detalleLiquidacion liquidacion="#{liquidacionGenTributarioView.liquidacion}" mostrarCantidad="true" mostrarObservacion="true" />
                <center><p:commandButton value="Aceptar" oncomplete="PF('dlgDetalle').hide();" styleClass="btnStyle"/></center>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgSolicitante" header="Contribuyentes" width="800" height="90%" resizable="false" closable="true" closeOnEscape="true" modal="true">
            <h:form id="frmSolicitante">
                <div align="right">
                    <p:commandButton id="btnNuevo" value="Agregar" style="height: 30px" actionListener="#{liquidacionGenTributarioView.actualizarEnte()}" oncomplete="PF('dlgNewClient').show();" update="formNewClient">
                        <f:setPropertyActionListener target="#{managedEnte.tipoEnte}" value="#{1}" />
                    </p:commandButton>
                </div>
                <p:dataTable var="s" value="#{liquidacionGenTributarioView.solicitantes}" style="width: 100%;text-align: center;" lazy="true"
                             paginator="true" rows="10" filterEvent="enter" paginatorPosition="top"
                             selectionMode="single" selection="#{liquidacionGenTributarioView.cobrosGenerales.comprador}" rowKey="#{s.id}">
                    <p:column headerText="CI/RUC" sortBy="#{s.identificacion}" width="150" filterBy="#{s.identificacion}" filterStyle="width: 90%;">
                        <h:outputText value="#{s.identificacion}"/>
                    </p:column>

                    <p:column headerText="Apellidos" filterBy="#{s.apellido}" sortBy="#{s.apellido}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.apellido}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Nombres" filterBy="#{s.nombre}" sortBy="#{s.nombre}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.nombre}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Razon Social" filterBy="#{s.razonSocial}" sortBy="#{s.razonSocial}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.razonSocial}" style="text-transform: uppercase"/>
                    </p:column>
                    <f:facet name="footer">
                        <p:commandButton value="Seleccionar" icon="ui-icon-plus" actionListener="#{liquidacionGenTributarioView.seleccionar()}" style="height: 30px"/>
                    </f:facet>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgComprobante" widgetVar="dlgComprobante" header="Comprobante de Pago" appendTo="@(body)" width="75%" responsive="true" closable="true" closeOnEscape="true" position="center" modal="true" resizable="false">
            <h:form id="frmComprobante">
                <p:panelGrid style="width: 100%;">
                    <p:row>
                        <p:column>
                            <p:outputLabel value="N. Liquidacion"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.numLiquidacion}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Tipo de Pago"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.tipoLiquidacion.prefijo} - #{liquidacionGenTributarioView.liquidacion.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Solicitante"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.comprador.identificacion}-#{liquidacionGenTributarioView.liquidacion.comprador.apellido} #{liquidacionGenTributarioView.liquidacion.comprador.nombre} #{liquidacionGenTributarioView.liquidacion.comprador.razonSocial} #{liquidacionGenTributarioView.liquidacion.comprador.nombreComercial}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <center>
                    <p:commandButton value="Aceptar" styleClass="btnStyle" oncomplete="PF('dlgComprobante').hide();" icon="ui-icon-circle-close"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgEditContribuyente" widgetVar="dlgEditContribuyente" header="Edicion de Contribuyente" appendTo="@(body)" width="75%" responsive="true" closable="true" closeOnEscape="true" modal="true" resizable="false">
            <h:form id="frmEditContribuyente">
                <p:panelGrid style="width: 100%;">
                    <p:row>
                        <p:column>
                            <p:outputLabel value="N. Liquidacion"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.numLiquidacion}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="N. Comprobante"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.numComprobante}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Tipo de Pago"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.tipoLiquidacion.prefijo} - #{liquidacionGenTributarioView.liquidacion.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Valor"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.totalPago}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel value="SOLICITANTE: " style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column colspan="3">
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.comprador.identificacion}-#{liquidacionGenTributarioView.liquidacion.comprador.apellido} #{liquidacionGenTributarioView.liquidacion.comprador.nombre} #{liquidacionGenTributarioView.liquidacion.comprador.razonSocial} #{liquidacionGenTributarioView.liquidacion.comprador.nombreComercial}" style="font-weight: bold; font-size: 12px;"/>
                            <p:spacer width="15"/>
                            <p:commandButton value="Buscar" oncomplete="PF('dlgSolicitante').show();" update="frmSolicitante"/>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <br/>
                <center>
                    <p:commandButton value="Guardar Cambios" actionListener="#{liquidacionGenTributarioView.actualizarLiquidacion()}" oncomplete="PF('dlgEditContribuyente').hide();" styleClass="btnStyle" update="mainForm:tvRecaudaciones:dtLiquidaciones"/>
                    <p:spacer width="25"/>
                    <p:commandButton value="Cancelar" styleClass="btnStyle" oncomplete="PF('dlgEditContribuyente').hide();"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgAnulacion" widgetVar="dlgAnulacion" header="Anular Liquidacion" appendTo="@(body)" width="75%" responsive="true" closable="true" closeOnEscape="true" position="center" modal="true" resizable="false">
            <h:form id="frmAnulacion">
                <p:panelGrid style="width: 100%;">
                    <p:row>
                        <p:column colspan="4"><p:outputLabel value="DETALLE DEL TITULO DE CREDITO QUE SE VA A ANULAR" style="font-weight: bold; font-size: 12px;"/></p:column>
                    </p:row>
                    <p:row>
                        <p:column>
                            <p:outputLabel value="Liquidacion"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.idLiquidacion}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Valor"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.totalPago}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Tipo de Pago"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.tipoLiquidacion.prefijo} - #{liquidacionGenTributarioView.liquidacion.tipoLiquidacion.nombreTitulo}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="Solicitante"/><br/>
                            <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.comprador.identificacion}-#{liquidacionGenTributarioView.liquidacion.comprador.apellido} #{liquidacionGenTributarioView.liquidacion.comprador.nombre} #{liquidacionGenTributarioView.liquidacion.comprador.razonSocial} #{liquidacionGenTributarioView.liquidacion.comprador.nombreComercial}" style="font-weight: bold; font-size: 12px;"/>
                        </p:column>
                    </p:row>
                </p:panelGrid><br/>
                <center>
                    <p:commandButton value="Anular" styleClass="btnStyle" actionListener="#{liquidacionGenTributarioView.anularTituloReporte()}" oncomplete="PF('dlgAnulacion').hide();" update="mainForm:tvRecaudaciones:dtLiquidaciones">
                        <p:confirm header="Confirmación" message="Realizar la anulacion?" icon="ui-icon-alert" />
                    </p:commandButton>
                    <p:spacer width="25"/>
                    <p:commandButton value="Cancelar" styleClass="btnStyle" oncomplete="PF('dlgAnulacion').hide();"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgValorRubro" header="Detalle del rubro" resizable="false" modal="true">
            <h:form id="formValores">
                <p:focus context="pngValoresRubro" />
                <h:panelGrid styleClass="noBorder" columns="1" id="pngValoresRubro">
                    <h:panelGrid styleClass="noBorder" columns="2">
                        <p:outputLabel value="Cantidad:" style="font-weight: bolder;"/>
                        <p:inputText id="cant_rubro" value="#{liquidacionGenTributarioView.rubroSelect.cantidad}" type="num">
                            <!--<p:ajax event="input" listener="#{liquidacionGenTributarioView.encerarValor}" update="formValores, mainForm:tvRecaudaciones:panelInfoAdc" process="@form" />-->
                        </p:inputText>
                    </h:panelGrid>
                    <h:panelGrid styleClass="noBorder" columns="2" rendered="#{liquidacionGenTributarioView.rubroSelect.tipoValor.id eq 2 ? false:true}">
                        <p:outputLabel value="Avaluo:" style="font-weight: bolder;" rendered="#{liquidacionGenTributarioView.rubroSelect.id eq 1138 or (liquidacionGenTributarioView.rubroSelect.tipoValor.id eq 14 or liquidacionGenTributarioView.rubroSelect.tipoValor.id eq 2)}" />
                        <p:inputText id="avaluo_rubro" value="#{liquidacionGenTributarioView.rubroSelect.valorCalculo}"
                                     rendered="#{liquidacionGenTributarioView.rubroSelect.id eq 1138 or (liquidacionGenTributarioView.rubroSelect.tipoValor.id eq 14 or liquidacionGenTributarioView.rubroSelect.tipoValor.id eq 2)}" >
                            <p:ajax event="blur" listener="#{liquidacionGenTributarioView.encerarValor}" update="formValores, mainForm:tvRecaudaciones:panelInfoAdc" process="@form" />
                        </p:inputText>
                    </h:panelGrid>
                    <h:panelGrid styleClass="noBorder" columns="2" rendered="#{liquidacionGenTributarioView.rubroSelect.id eq 1140 ? true:false}">
                        <p:outputLabel value="Años:" style="font-weight: bolder;"/>
                        <p:inputText id="anio_d" value="#{liquidacionGenTributarioView.aniosPublicos}" placeholder="20XX-20XX"/>
                    </h:panelGrid>
                    <h:panelGrid styleClass="noBorder" columns="2" rendered="#{liquidacionGenTributarioView.rubroSelect.id eq 1141 ? true:false}">
                        <p:outputLabel value="Años:" style="font-weight: bolder;" />
                        <p:inputText id="anio_h" value="#{liquidacionGenTributarioView.aniosPrivado}" placeholder="20XX-20XX" >
                        </p:inputText>
                    </h:panelGrid>
                    <h:panelGrid styleClass="noBorder" columns="2">
                        <p:outputLabel value="Valor:" style="font-weight: bolder;"/>
                        <p:inputText id="valor_rubro" value="#{liquidacionGenTributarioView.rubroSelect.valor}" >
                            <!--<p:ajax event="click" listener="# {liquidacionGenTributarioView.encerarValor}" rendered="# {liquidacionGenTributarioView.rubroSelect.tipoValor.id eq 3}" />-->
                            <f:convertNumber locale="US" maxFractionDigits="2" />
                        </p:inputText>
                    </h:panelGrid>
                </h:panelGrid>
                <center style="margin-top: 10px; margin-bottom: 10px;">
                    <p:commandButton id="btn_detalle_rubro" value="Aceptar" styleClass="btnStyle"
                                     icon="ui-icon-check" actionListener="#{liquidacionGenTributarioView.guardaRubro()}" update="mainForm:tvRecaudaciones:panelInfoAdc"/>
                </center>
            </h:form>
        </p:dialog>
        <p:dialog widgetVar="dlgNumeroLiquidacion" header="Codigo de liquidacion generado" resizable="false" modal="true">
            <h:form id="formLiq">

                <h:panelGrid styleClass="noBorder" columns="1" >
                    <p:outputLabel value="#{liquidacionGenTributarioView.liquidacion.idLiquidacion} " style="font-weight: bold; font-size: 25px; text-align: center;" />
                </h:panelGrid>
                <center>
                    <p:commandButton value="Imprimir" actionListener="#{liquidacionGenTributarioView.imprimir(liquidacionGenTributarioView.liquidacion)}"/> 
                    <p:spacer width="10"/>
                    <p:commandButton value="Cerrar" styleClass="btnStyle"
                                     oncomplete="PF('dlgNumeroLiquidacion').hide();" update=":mainForm"
                                     action="#{liquidacionGenTributarioView.resetForm()}"/>
                </center>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgEspeciesDisp" header="Especies Disponibles" resizable="false" modal="true">
            <h:form id="formEspecies">
                <p:panelGrid styleClass="noBorder" columns="4" style="font-size: 16px;">
                    Cantidad:
                    <p:inputNumber value="#{liquidacionGenTributarioView.rubroSelect.cantidad}" decimalPlaces="0">
                        <p:ajax event="change" update="formEspecies" listener="#{liquidacionGenTributarioView.updateValoresEspecies()}"/>
                    </p:inputNumber>
                    Disponibles:
                    <p:inputText value="#{liquidacionGenTributarioView.acta.disponibles}"  readonly="true" style="background-color: #fce1b1"/>
                    Desde:
                    <p:inputText value="#{liquidacionGenTributarioView.acta.desdeTemp}" readonly="true" style="background-color: #fce1b1"/>
                    Hasta:
                    <p:inputText value="#{liquidacionGenTributarioView.acta.hastaTemp}" readonly="true" style="background-color: #fce1b1"/>
                    V.Uni.:
                    <p:inputNumber value="#{liquidacionGenTributarioView.rubroSelect.valor}" decimalPlaces="2"/>
                    V.Total:
                    <p:inputNumber value="#{liquidacionGenTributarioView.rubroSelect.valorTotal}" decimalPlaces="2"/>
                </p:panelGrid>
                <div align="center">
                    <p:commandButton value="Aceptar" styleClass="btnStyle" icon="ui-icon-check" actionListener="#{liquidacionGenTributarioView.guardaRubro()}"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog header="Seleccionar Predio" widgetVar="selPredio" modal="true" resizable="false" width="700">
            <h:form id="formPredSel">
                <p:dataTable id="dtSelPred" paginator="true" style="text-align: center;" emptyMessage="No se encontro Movimientos" filterEvent="enter"
                             rows="10" value="#{liquidacionGenTributarioView.propiedades}" var="pl" paginatorPosition="top">
                    <p:column headerText="No Predio" filterBy="#{pl.numPredio}" filterStyle="width: 90%" width="100">
                        <p:outputLabel value="#{pl.numPredio}"/>
                    </p:column>
                    <p:column headerText="Cod. Predial" width="200">
                        <p:outputLabel value="#{pl.codigoPredialCompleto}"/>
                    </p:column>
                    <p:column headerText="Urbanizacion">
                        <p:outputLabel value="#{pl.ciudadela.nombre}"/>
                    </p:column>
                    <p:column headerText="MZ" filterBy="#{pl.urbMz}" width="50" filterStyle="width: 95%" filterMatchMode="exact">
                        <p:outputLabel value="#{pl.urbMz}"/>
                    </p:column>
                    <p:column headerText="SL" filterBy="#{pl.urbSolarnew}" width="50" filterStyle="width: 95%" filterMatchMode="exact">
                        <p:outputLabel value="#{pl.urbSolarnew}"/>
                    </p:column>
                    <p:column headerText="Selec." width="50">
                        <p:commandLink actionListener="#{liquidacionGenTributarioView.seleccionaPredio(pl)}">
                            <p:graphicImage value="/css/homeIconsImages/ir.png" height="16"/>
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </h:form>
        </p:dialog>

        <p:dialog id="dlgNuevoCliente" header="Ingreso de Cliente" widgetVar="dlgNewClient" modal="true" resizable="false" closeOnEscape="false" position="center">
            <h:form  id="formNewClient">
                <p:panelGrid styleClass="noBorder" style="width: 100%">
                    <p:row>
                        <p:column style="text-align: right"><p:outputLabel value="Tipo Persona:" style="font-weight: bolder"/></p:column>
                        <p:column>
                            <p:selectOneMenu value="#{liquidacionGenTributarioView.tipoEnte}" style="width: 160px;">
                                <f:selectItem itemLabel="Natural" itemValue="1" />
                                <f:selectItem itemLabel="Jurídica" itemValue="2" />
                                <!--                                <f:selectItem itemLabel="Excepcionales" itemValue="3" />-->
                                <p:ajax update="tabNewEnte"/>
                            </p:selectOneMenu>
                        </p:column>
                    </p:row>
                </p:panelGrid>
                <p:tabView id="tabNewEnte" style="width: 520px;height: 400px">
                    <p:tab title="Datos Principales">
                        <p:panelGrid styleClass="noBorder" style="width: 100%">
                            <p:row>
                                <p:column colspan="4">
                                    <p:outputLabel value="NOTA: CAMPOS OBLIGATORIOS (*)" style="font-weight: bolder;color: #0033FF"/>
                                </p:column>
                            </p:row>
                            <p:row rendered="#{liquidacionGenTributarioView.tipoEnte==3}">
                                <p:column colspan="4">
                                    <p:selectBooleanCheckbox value="#{liquidacionGenTributarioView.excepcionalEmpresa}" itemLabel="EXCEPCIONALES JURIDICO:" style="float: left; font-weight: bold; font-size: 12px;">
                                        <p:ajax update="tabNewEnte" process="@this"/>
                                    </p:selectBooleanCheckbox>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="#{liquidacionGenTributarioView.tipoEnte==1?'(*)Cédula:':liquidacionGenTributarioView.tipoEnte==2?'(*)R.U.C.:':liquidacionGenTributarioView.tipoEnte==3?'(*)Identificación:':''}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column>
                                    <p:inputText value="#{liquidacionGenTributarioView.registroEnte.identificacion}" rendered="#{liquidacionGenTributarioView.tipoEnte==1 or liquidacionGenTributarioView.tipoEnte==2}">
                                        <p:ajax event="blur" listener="#{liquidacionGenTributarioView.existeCedula()}" update="formNewClient"/>
                                    </p:inputText>
                                    <p:inputText readonly="true" value="Lo asigna el sistema" disabled="#{liquidacionGenTributarioView.tipoEnte==3}" rendered="#{liquidacionGenTributarioView.tipoEnte==3}"/>
                                </p:column>
                                <p:column>
                                    <p:outputLabel value="Fec. Nacimiento:" rendered="#{liquidacionGenTributarioView.tipoEnte==1 or managedEnte.tipoEnte==3}" style="font-weight: bolder"/>
                                    <p:outputLabel value="Fec. Constitución:" rendered="#{liquidacionGenTributarioView.tipoEnte==2}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column>
                                    <p:calendar value="#{liquidacionGenTributarioView.registroEnte.fechaNacimiento}" placeholder="DÍA-MES-AÑO" maxdate="sysdate" pattern="dd-MM-yyyy" mask="true" />
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="(*)Nombres:" rendered="#{liquidacionGenTributarioView.tipoEnte==1 or (liquidacionGenTributarioView.tipoEnte==3 and !liquidacionGenTributarioView.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                    <p:outputLabel value="(*)Razón Social:" rendered="#{liquidacionGenTributarioView.tipoEnte==2 or (liquidacionGenTributarioView.tipoEnte==3 and liquidacionGenTributarioView.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{liquidacionGenTributarioView.registroEnte.nombre}" rendered="#{liquidacionGenTributarioView.tipoEnte==1 or (liquidacionGenTributarioView.tipoEnte==3 and !liquidacionGenTributarioView.excepcionalEmpresa)}" style="width: 100%"/>
                                    <p:inputText value="#{liquidacionGenTributarioView.registroEnte.razonSocial}" rendered="#{liquidacionGenTributarioView.tipoEnte==2 or (liquidacionGenTributarioView.tipoEnte==3 and liquidacionGenTributarioView.excepcionalEmpresa)}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="(*)Apellidos:" rendered="#{liquidacionGenTributarioView.tipoEnte==1 or (liquidacionGenTributarioView.tipoEnte==3 and !liquidacionGenTributarioView.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                    <p:outputLabel value="Nombre Comercial:" rendered="#{liquidacionGenTributarioView.tipoEnte==2 or (liquidacionGenTributarioView.tipoEnte==3 and liquidacionGenTributarioView.excepcionalEmpresa)}" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{liquidacionGenTributarioView.registroEnte.apellido}" rendered="#{liquidacionGenTributarioView.tipoEnte==1 or (liquidacionGenTributarioView.tipoEnte==3 and !liquidacionGenTributarioView.excepcionalEmpresa)}" style="width: 100%"/>
                                    <p:inputText value="#{liquidacionGenTributarioView.registroEnte.nombreComercial}" rendered="#{liquidacionGenTributarioView.tipoEnte==2 or (liquidacionGenTributarioView.tipoEnte==3 and liquidacionGenTributarioView.excepcionalEmpresa)}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                            <p:row>
                                <p:column>
                                    <p:outputLabel value="Dirección:" style="font-weight: bolder"/>
                                </p:column>
                                <p:column colspan="3">
                                    <p:inputText value="#{liquidacionGenTributarioView.registroEnte.direccion}" style="width: 100%"/>
                                </p:column>
                            </p:row>
                        </p:panelGrid>
                    </p:tab>
                </p:tabView>
                <div align="center">
                    <p:commandButton value="Guardar" icon="ui-icon-disk" actionListener="#{liquidacionGenTributarioView.guardarEnte()}"/>
                </div>
            </h:form>
        </p:dialog>

        <p:dialog widgetVar="dlgAnular" header="Escribir Observaciones para Anular la Emision"
                  height="500" width="500" responsive="true" closable="true" closeOnEscape="true"
                  modal="true" appendTo="@(body)" >

            <h:form id="frmAnular">
                <p:outputLabel value="Seleccione el Documento a Adjuntar"
                               style="font-size: 18px; font-weight: bold;" />
                <p:fileUpload fileUploadListener="#{liquidacionGenTributarioView.handleFileDocumentBySave}" dragDropSupport="false"
                              multiple="false" mode="advanced"
                              uploadLabel="Subir" cancelLabel="Cancelar"
                              update="frmAnular"
                              label="Seleccionar" skinSimple="true"
                              sizeLimit="350000000" sequential="true"
                              allowTypes="/(\.|\/)(pdf|xlsx|docx|xls|doc)$/" />

                <p:dataTable id="dtDocumentosAnexos"  value="#{liquidacionGenTributarioView.listaDocumentos}" var="pp" reflow="true"
                             rowIndexVar="index"
                             paginator="true" rows="5" paginatorPosition="top" style="width: 100%" widgetVar="dtDocumentosAnexos"
                             emptyMessage="No existen documentos Asociados">
                    <p:column headerText="Fecha Creacion">
                        <h:outputText value="#{pp.fechaCreacion}"/>
                    </p:column>
                    <p:column headerText="Descripcion">
                        <h:outputText value="#{pp.nombre}"/>
                    </p:column>
                    <p:column headerText="Tipo Archivo">
                        <h:outputText value="#{pp.descripcion}" />

                    </p:column>
                    <p:column headerText="Accion" style="text-align: center" >

                        <p:commandLink actionListener="#{titulosPrediales.inactivarDocumento(pp,index)}" update="frmAnular">
                            <i class="fa fa-fw fa-trash" style="font-size: 1.5em"></i>
                        </p:commandLink>
                    </p:column>

                </p:dataTable>
                <br></br>
                <center>
                    <h:panelGrid columns="1">
                        <p:inputTextarea id="obsservacion21" value="#{liquidacionGenTributarioView.observacion}"
                                         rows="10" cols="50" style="width: 98%; text-transform: uppercase" />
                    </h:panelGrid>

                    <p:commandButton value="Aceptar"
                                     process="@all" actionListener="#{liquidacionGenTributarioView.anularLiquidacion()}"  update="mainForm:tvRecaudaciones:dtLiquidaciones"  >
                        <p:confirm header="Confirmacion" message="Esta seguro de anular la liquidacion" icon="ui-icon-alert" />
                    </p:commandButton>
                </center>


            </h:form>
        </p:dialog>


        <script>
            $(document).ready(function () {
                //attach click event to button
                $("#formValores [type='reset']").click(function () {
                    $("#formValores [name='valorMain']").focus();
                });
            });</script>


    </ui:define>
</ui:composition>