<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <p:dialog id="dlgContribuyentes" widgetVar="dlgContribuyentes" header="LISTADO DE CONTRIBUYENTES" appendTo="@(body)" width="70%" responsive="true" closable="true" closeOnEscape="true" modal="true" position="center">
        <h:form id="frmContribuyentes">
            <h:panelGroup layout="block" id="wizarContainer1" class="Container Wid100 MarTop10" >
                <h:panelGroup layout="block" class="Container90" >
                    <h1 class="BigTopic Fs16">Contribuyentes</h1>
                </h:panelGroup>
                <h:panelGroup layout="block" class="Container10" >
                    <p:commandButton value="Nuevo" icon="fa fa-plus" title="Nuevo" actionListener="#{espaciosPublicos.nuevoCliente()}" >

                    </p:commandButton><br/>

                </h:panelGroup>
            </h:panelGroup>
            <hr></hr>
            <div align="center">
                <p:dataTable id="dtContribuyente" value="#{espaciosPublicos.contribuyentes}" var="s" selection="#{espaciosPublicos.propietario}" 
                             rowKey="#{s.id}" style="width: 98%" lazy="true" reflow="true" paginator="true" rows="10" filterEvent="enter" paginatorPosition="top">
                    <p:ajax event="rowSelect" update="frmContribuyentes:btnSelectProp" />
                    <p:ajax event="rowUnselect"  update="frmContribuyentes:btnSelectProp" />
                    <p:ajax event="rowSelectRadio"  update="frmContribuyentes:btnSelectProp" />
                    <p:column headerText="*" selectionMode="multiple" style="width:30px;text-align:center" />
                    <p:column headerText="Identificacion" sortBy="#{s.identificacion}" filterBy="#{s.identificacion}" filterMatchMode="contains" filterStyle="width: 59%;" style="width: 20%;text-align:center">
                        <h:outputText value="#{s.identificacion}"/>
                    </p:column>
                    <p:column headerText="Apellidos" filterBy="#{s.apellido}" sortBy="#{s.apellido}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.apellido}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Nombres" filterBy="#{s.nombre}" sortBy="#{s.nombre}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.nombre}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Razon Social" filterBy="#{s.razonSocial}" sortBy="#{s.razonSocial}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.razonSocial}" style="text-transform: uppercase"/>
                    </p:column>
                </p:dataTable>  
            </div>
            <center>
                <p:commandButton  id="btnSelectProp" 
                                  actionListener="#{espaciosPublicos.seleccionarPropietarios()}" value="Seleccionar"  
                                  oncomplete="PF('dlgContribuyentes').hide()" style="height: 30px; margin-top: 10px;" 
                                  update="registroCementerioForm" />
            </center>
        </h:form>
    </p:dialog> 





    <p:dialog id="dlgContribuyentesSepultados" widgetVar="dlgContribuyentesSepultados" header="LISTADO DE CONTRIBUYENTES" appendTo="@(body)" width="70%" responsive="true" closable="true" closeOnEscape="true" modal="true" position="center">
        <h:form id="frmContribuyentesSepultados">
            <h:panelGroup layout="block" id="wizarContainer11" class="Container Wid100 MarTop10" >
                <h:panelGroup layout="block" class="Container90" >
                    <h1 class="BigTopic Fs16">Contribuyentes</h1>
                </h:panelGroup>
                <h:panelGroup layout="block" class="Container10" >


                    <p:commandButton title="Nuevo" value="Nuevo" icon="fa fa-plus" actionListener="#{espaciosPublicos.nuevoCliente()}" >

                    </p:commandButton><br/>

                </h:panelGroup>
            </h:panelGroup>
            <hr></hr>
            <div align="center">
                <p:dataTable id="dtContribuyenteSepultados" value="#{espaciosPublicos.contribuyentes}" var="s" selection="#{espaciosPublicos.sepultados}" 
                             rowKey="#{s.id}" style="width: 98%" lazy="true" reflow="true" paginator="true" rows="10" filterEvent="enter" paginatorPosition="top">
                    <p:ajax event="rowSelect" update="frmContribuyentesSepultados:btnSelectProp" />
                    <p:ajax event="rowUnselect"  update="frmContribuyentesSepultados:btnSelectProp" />
                    <p:ajax event="rowSelectRadio"  update="frmContribuyentesSepultados:btnSelectProp" />
                    <p:column headerText="*" selectionMode="multiple" style="width:30px;text-align:center" />
                    <p:column headerText="Identificacion" sortBy="#{s.identificacion}" filterBy="#{s.identificacion}" filterMatchMode="contains" filterStyle="width: 59%;" style="width: 20%;text-align:center">
                        <h:outputText value="#{s.identificacion}"/>/
                    </p:column>
                    <p:column headerText="Apellidos" filterBy="#{s.apellido}" sortBy="#{s.apellido}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.apellido}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Nombres" filterBy="#{s.nombre}" sortBy="#{s.nombre}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.nombre}" style="text-transform: uppercase"/>
                    </p:column>
                    <p:column headerText="Razon Social" filterBy="#{s.razonSocial}" sortBy="#{s.razonSocial}" filterStyle="width: 95%;">
                        <h:outputText value="#{s.razonSocial}" style="text-transform: uppercase"/>
                    </p:column>
                </p:dataTable>  
            </div>
            <center>
                <p:commandButton  id="btnSelectProp" 
                                  actionListener="#{espaciosPublicos.seleccionarSepultados()}" value="Seleccionar"  
                                  oncomplete="PF('dlgContribuyentesSepultados').hide()" style="height: 30px; margin-top: 10px;" 
                                  update=":registroCementerioForm" />
            </center>
        </h:form>
    </p:dialog> 




    <p:dialog id="dlgSubida" widgetVar="dlgSubida" appendTo="@(body)" modal="true" header="Carga de fotos" width="65%" height="500" closable="true" closeOnEscape="true">
        <h:form id="frmSubFotos">
            <p:fileUpload fileUploadListener="#{espaciosPublicos.handleFileUpload}"
                          multiple="true"
                          mode="advanced" 
                          update=":registroCementerioForm"
                          uploadLabel="Subir"
                          cancelLabel="Cancelar"
                          label="Seleccionar"  immediate="true"
                          sizeLimit="350000000"
                          sequential="true"
                          oncomplete="PF('dlgSubida').hide()"
                          fileLimit="10" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
        </h:form>
    </p:dialog>

    <p:dialog widgetVar="dlgAdjDoc" header="Advertencia" 
              height="200" width="650" responsive="true" closable="true" closeOnEscape="true" 
              modal="true" appendTo="@(body)" >

        <h:form id="frmAdjDocDialog">
            <p:outputLabel value="Seleccione el Documento a Adjuntar.?" 
                           style="font-size: 18px; font-weight: bold;" />
            <p:fileUpload fileUploadListener="#{espaciosPublicos.handleFileDocumentBySave}" dragDropSupport="false"
                          multiple="false" mode="advanced" 
                          uploadLabel="Subir" cancelLabel="Cancelar"
                          update=":registroCementerioForm"
                          label="Seleccionar" skinSimple="true"
                          sizeLimit="350000000" sequential="true" 
                          allowTypes="/(\.|\/)(pdf|xlsx|docx|xls|doc)$/" />

        </h:form>
    </p:dialog>

    <!--Visualizador de Fotos-->
    <p:dialog   widgetVar="dlgFoto" appendTo="@(body)" modal="true" header="Foto: #{espaciosPublicos.espFotoBovedaSeleccionada.nombre}" width="45%" height="80%" closable="true" closeOnEscape="true">
        <h:form id="frmFotos">
            <!--<p:growl autoUpdate="true" showDetail="true"/>-->
            <div align="center">
                <p:panel id="pFotos" style="width: 100%">
                    <p:graphicImage id="myImage" url="/FotosBovedaServlet?fotoId=#{espaciosPublicos.espFotoBovedaSeleccionada.id}" alt="Descripcion: #{espaciosPublicos.espFotoBovedaSeleccionada.descripcion}" title="#{espaciosPublicos.espFotoBovedaSeleccionada.nombre}" style="width: 100%; height: 400px"/>
                    <pe:imageRotateAndResize id="rotateAndResize" for="myImage" widgetVar="rotateAndResizeWidget"/>
                    <f:facet name="footer">
                        <div align="center">
                            <p:panelGrid columns="5" layout="grid">
                                <p:commandButton icon="ui-icon-arrowreturnthick-1-w" onclick="PF('rotateAndResizeWidget').rotateLeft(90);
                                        return
                                        false;"/>
                                <p:commandButton icon="ui-icon-arrowreturnthick-1-e" onclick="PF('rotateAndResizeWidget').rotateRight(90);
                                        return
                                        false;"/>
                                <p:commandButton icon="ui-icon-zoomin" onclick="PF('rotateAndResizeWidget').scale(1.05);
                                        return false;"/>
                                <p:commandButton icon="ui-icon-zoomout" onclick="PF('rotateAndResizeWidget').scale(0.95);
                                        return false;"/>
                                <!--<p:commandButton id="btnElimFoto" icon="ui-icon-trash" title="Eliminar foto" actionListener="#{espaciosPublicos.eliminarFoto()}" oncomplete="PF('dlgFoto').hide()"/>-->
                            </p:panelGrid>
                        </div>
                    </f:facet>
                </p:panel>
            </div>
        </h:form>
    </p:dialog>



    <p:dialog   widgetVar="dlgFotoBoveda"  modal="true" header="Foto: " width="45%" height="500px"  closable="true" closeOnEscape="true">
        <h:form id="frmFotosBoveda">
            <!--<p:growl autoUpdate="true" showDetail="true"/>-->
            <center>
                <h2 style="color: #0033FF">#{espaciosPublicos.espFotoBovedaSeleccionada.descripcion}</h2>
            </center>
            <hr/>
            <br/>

            <p:graphicImage id="myImage" url="/images?ruta=#{espaciosPublicos.espFotoBovedaSeleccionada.ruta}"  rendered="#{espaciosPublicos.espFotoBovedaSeleccionada ne null}"
                            alt="Descripcion: #{espaciosPublicos.espFotoBovedaSeleccionada.descripcion}"
                            title="#{espaciosPublicos.espFotoBovedaSeleccionada.nombre}" style="width: 100%; height: 400px"/> 
            <pe:imageRotateAndResize id="rotateAndResize" for="myImage" widgetVar="rotateAndResizeWidget"/>
            <p:panelGrid columns="5" layout="grid">
                <p:commandButton icon="fa fa-undo" onclick="PF('rotateAndResizeWidget').rotateLeft(90);
                        return
                        false;"/>
                <p:commandButton icon="fa fa-repeat" onclick="PF('rotateAndResizeWidget').rotateRight(90);
                        return
                        false;"/>
                <p:commandButton icon="fa fa-plus" onclick="PF('rotateAndResizeWidget').scale(1.05);
                        return false;"/>
                <p:commandButton icon="fa fa-minus" onclick="PF('rotateAndResizeWidget').scale(0.95);
                        return false;"/>
                <!--<p:commandButton id="btnElimFoto" icon="ui-icon-trash" title="Eliminar foto" actionListener="#{espaciosPublicos.eliminarFoto()}" oncomplete="PF('dlgFoto').hide()"/>-->
            </p:panelGrid>



        </h:form>
    </p:dialog>

</html>
